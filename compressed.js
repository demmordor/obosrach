(function(e){function t(a){if(n[a])return n[a].exports;var o=n[a]={exports:{},id:a,loaded:!1};return e[a].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)})([function(e,t,n){n(1),n(2),n(3),n(4),n(5),n(6),n(7),n(10),n(11),n(16),n(17),n(18),n(19),n(22),n(27),n(28),n(32),n(35),n(43),n(44),n(46),n(47),n(48),n(49),n(50),n(51),n(52),n(53),n(54),n(55),n(56)},function(){window.cytubeEnhancedDefaultTranslates=window.cytubeEnhancedDefaultTranslates||{},window.cytubeEnhancedDefaultTranslates.ru={qCommands:{"of course":"\u043E\u043F\u0440\u0435\u0434\u0435\u043B\u0435\u043D\u043D\u043E \u0434\u0430",yes:"\u0434\u0430",maybe:"\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E",impossible:"\u043D\u0438 \u0448\u0430\u043D\u0441\u0430","no way":"\u043E\u043F\u0440\u0435\u0434\u0435\u043B\u0435\u043D\u043D\u043E \u043D\u0435\u0442","don't think so":"\u0432\u0435\u0440\u043E\u044F\u0442\u043D\u043E\u0441\u0442\u044C \u043C\u0430\u043B\u0430",no:"\u043D\u0435\u0442","cirno is busy":"\u0421\u043C\u043E\u0442\u0440\u044F\u0449\u0438\u0439 \u0443\u0441\u0442\u0430\u043B \u0438 \u043E\u0442\u0432\u0435\u0447\u0430\u0442\u044C \u043D\u0435 \u0431\u0443\u0434\u0435\u0442","I regret to inform you":"\u043E\u0442\u043A\u0430\u0437\u044B\u0432\u0430\u044E\u0441\u044C \u043E\u0442\u0432\u0435\u0447\u0430\u0442\u044C"},chatCommands:{"%username% action (e.g: <i>/me is dancing</i>)":"%username% \u0447\u0442\u043E-\u0442\u043E \u0441\u0434\u0435\u043B\u0430\u043B. \u041D\u0430\u043F\u0440\u0438\u043C\u0435\u0440: <i>/me \u0442\u0430\u043D\u0446\u0443\u0435\u0442</i>",spoiler:"\u0441\u043F\u043E\u0439\u043B\u0435\u0440",'sets the "AFK" status':"\u0443\u0441\u0442\u0430\u043D\u0430\u0432\u043B\u0438\u0432\u0430\u0435\u0442 \u0441\u0442\u0430\u0442\u0443\u0441 \"\u041E\u0442\u043E\u0448\u0451\u043B\"","random option from the list of options (!pick option1, option2, option3)":"\u0432\u044B\u0431\u043E\u0440 \u0441\u043B\u0443\u0447\u0430\u0439\u043D\u043E\u0439 \u043E\u043F\u0446\u0438\u0438 \u0438\u0437 \u0443\u043A\u0430\u0437\u0430\u043D\u043D\u043E\u0433\u043E \u0441\u043F\u0438\u0441\u043A\u0430 \u0441\u043B\u043E\u0432, \u0440\u0430\u0437\u0434\u0435\u043B\u0435\u043D\u043D\u044B\u0445 \u0437\u0430\u043F\u044F\u0442\u044B\u043C\u0438 (\u041D\u0430\u043F\u0440\u0438\u043C\u0435\u0440: <i>!pick \u0441\u043B\u043E\u0432\u043E1, \u0441\u043B\u043E\u0432\u043E2, \u0441\u043B\u043E\u0432\u043E3</i>)","asking a question with yes/no/... type answer (e.g. <i>!ask Will i be rich?</i>)":"\u0437\u0430\u0434\u0430\u0442\u044C \u0432\u043E\u043F\u0440\u043E\u0441 \u0441 \u0432\u0430\u0440\u0438\u0430\u043D\u0442\u0430\u043C\u0438 \u043E\u0442\u0432\u0435\u0442\u0430 \u0434\u0430/\u043D\u0435\u0442/... (\u041D\u0430\u043F\u0440\u0438\u043C\u0435\u0440: <i>!ask \u0421\u0435\u0433\u043E\u0434\u043D\u044F \u043F\u043E\u0439\u0434\u0435\u0442 \u0434\u043E\u0436\u0434\u044C?</i>)","show the current time":"\u043F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u0442\u0435\u043A\u0443\u0449\u0435\u0435 \u0432\u0440\u0435\u043C\u044F","current time":"\u0442\u0435\u043A\u0443\u0449\u0435\u0435 \u0432\u0440\u0435\u043C\u044F","throw a dice":"\u043A\u0438\u043D\u0443\u0442\u044C \u043A\u043E\u0441\u0442\u044C","random number between 0 and 999":"\u0441\u043B\u0443\u0447\u0430\u0439\u043D\u043E\u0435 \u0447\u0438\u0441\u043B\u043E \u043E\u0442 0 \u0434\u043E 999","show the random quote":"\u043F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u0441\u043B\u0443\u0447\u0430\u0439\u043D\u0443\u044E \u0446\u0438\u0442\u0430\u0442\u0443","there aren't any quotes.":"\u0446\u0438\u0442\u0430\u0442\u044B \u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044E\u0442.","vote for the video skip":"\u043F\u0440\u043E\u0433\u043E\u043B\u043E\u0441\u043E\u0432\u0430\u0442\u044C \u0437\u0430 \u043F\u0440\u043E\u043F\u0443\u0441\u043A \u0442\u0435\u043A\u0443\u0449\u0435\u0433\u043E \u0432\u0438\u0434\u0435\u043E","you have been voted for the video skip":"\u043E\u0442\u0434\u0430\u043D \u0433\u043E\u043B\u043E\u0441 \u0437\u0430 \u043F\u0440\u043E\u043F\u0443\u0441\u043A \u0442\u0435\u043A\u0443\u0449\u0435\u0433\u043E \u0432\u0438\u0434\u0435\u043E","play the next video":"\u043F\u0440\u043E\u0438\u0433\u0440\u0430\u0442\u044C \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0435 \u0432\u0438\u0434\u0435\u043E","the next video is playing":"\u043D\u0430\u0447\u0430\u0442\u043E \u043F\u0440\u043E\u0438\u0433\u0440\u044B\u0432\u0430\u043D\u0438\u0435 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0433\u043E \u0432\u0438\u0434\u0435\u043E","bump the last video":"\u043F\u043E\u0434\u043D\u044F\u0442\u044C \u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0435\u0435 \u0432\u0438\u0434\u0435\u043E","the last video was bumped: ":"\u043F\u043E\u0434\u043D\u044F\u0442\u043E \u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0435\u0435 \u0432\u0438\u0434\u0435\u043E: ","adds the video to the end of the playlist (e.g. <i>!add https://www.youtube.com/watch?v=hh4gpgAZkc8</i>)":"\u0434\u043E\u0431\u0430\u0432\u043B\u044F\u0435\u0442 \u0432\u0438\u0434\u0435\u043E \u0432 \u043A\u043E\u043D\u0435\u0446 \u043F\u043B\u0435\u0439\u043B\u0438\u0441\u0442\u0430 (\u041D\u0430\u043F\u0440\u0438\u043C\u0435\u0440: <i>!add https://www.youtube.com/watch?v=hh4gpgAZkc8</i>)","error: the wrong link":"\u043E\u0448\u0438\u0431\u043A\u0430: \u043D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0441\u044B\u043B\u043A\u0430","the video was added":"\u0432\u0438\u0434\u0435\u043E \u0431\u044B\u043B\u043E \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u043E","show the current video's name":"\u043F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0442\u0435\u043A\u0443\u0449\u0435\u0433\u043E \u0432\u0438\u0434\u0435\u043E","now: ":"\u0441\u0435\u0439\u0447\u0430\u0441 \u0438\u0433\u0440\u0430\u0435\u0442: ","show the random emote":"\u043F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u0441\u043B\u0443\u0447\u0430\u0439\u043D\u044B\u0439 \u0441\u043C\u0430\u0439\u043B\u0438\u043A","the secret command":"\u0441\u0435\u043A\u0440\u0435\u0442\u043D\u0430\u044F \u043A\u043E\u043C\u0430\u043D\u0434\u0430","Use !pick variant1, variant2":"\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439 !pick \u0432\u0430\u0440\u0438\u0430\u043D\u04421, \u0432\u0430\u0440\u0438\u0430\u043D\u04422"},"The list of chat commands":"\u0421\u043F\u0438\u0441\u043E\u043A \u043A\u043E\u043C\u0430\u043D\u0434 \u0447\u0430\u0442\u0430","Standard commands":"\u0421\u0442\u0430\u043D\u0434\u0430\u0440\u0442\u043D\u044B\u0435 \u043A\u043E\u043C\u0430\u043D\u0434\u044B","Extra commands":"\u0414\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0435 \u043A\u043E\u043C\u0430\u043D\u0434\u044B","Commands list":"\u0421\u043F\u0438\u0441\u043E\u043A \u043A\u043E\u043C\u0430\u043D\u0434",AFK:"\u0410\u0424\u041A",Clear:"\u041E\u0447\u0438\u0441\u0442","Are you sure, that you want to clear the chat?":"\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u043E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u0447\u0430\u0442?",favPics:{"Show your favorite images":"\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u0438\u0437\u0431\u0440\u0430\u043D\u043D\u044B\u0435 \u043A\u0430\u0440\u0442\u0438\u043D\u043A\u0438","Export pictures":"\u042D\u043A\u0441\u043F\u043E\u0440\u0442","Import pictures":"\u0418\u043C\u043F\u043E\u0440\u0442","Picture url":"\u0410\u0434\u0440\u0435\u0441",Add:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C",Remove:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C","The image already exists":"\u0422\u0430\u043A\u0430\u044F \u043A\u0430\u0440\u0442\u0438\u043D\u043A\u0430 \u0443\u0436\u0435 \u0431\u044B\u043B\u0430 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0430","Drop the picture here to remove it":"\u041F\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0441\u044E\u0434\u0430 \u043A\u0430\u0440\u0442\u0438\u043D\u043A\u0443, \u0447\u0442\u043E\u0431\u044B \u0435\u0451 \u0443\u0434\u0430\u043B\u0438\u0442\u044C",Exit:"\u0412\u044B\u0445\u043E\u0434","<p>Favourite pictures feature if for saving favourite pictures like browser bookmarks.</p><p>Features:<ul><li><strong>Only links to images can be saved</strong>, so if image from link was removed, it also removes from your panel.</li><li>Images links are storing in browser. There are export and import buttons to share them between browsers.</li><li>Images are the same for site channels, but <strong>they are different for http:// and https://</strong></li></ul></p>":"<p>\u0418\u0437\u0431\u0440\u0430\u043D\u043D\u044B\u0435 \u043A\u0430\u0440\u0442\u0438\u043D\u043A\u0438 \u043D\u0443\u0436\u043D\u044B \u0434\u043B\u044F \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F \u043F\u043E\u043D\u0440\u0430\u0432\u0438\u0432\u0448\u0438\u0445\u0441\u044F \u043A\u0430\u0440\u0442\u0438\u043D\u043E\u043A, \u043A\u0430\u043A \u0437\u0430\u043A\u043B\u0430\u0434\u043A\u0438 \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0430.</p><p>\u041E\u0441\u043E\u0431\u0435\u043D\u043D\u043E\u0441\u0442\u0438:<ul><li><strong>\u0425\u0440\u0430\u043D\u044F\u0442\u0441\u044F \u043D\u0435 \u043A\u0430\u0440\u0442\u0438\u043D\u043A\u0438, \u0430 \u0441\u0441\u044B\u043B\u043A\u0438 \u043D\u0430 \u043D\u0438\u0445</strong>, \u0434\u0440\u0443\u0433\u0438\u043C\u0438 \u0441\u043B\u043E\u0432\u0430\u043C\u0438 \u0435\u0441\u043B\u0438 \u043A\u0430\u0440\u0442\u0438\u043D\u043A\u0430 \u043F\u043E \u0441\u0441\u044B\u043B\u043A\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u0441\u044F, \u0442\u043E \u043E\u043D\u0430 \u0443\u0434\u0430\u043B\u0438\u0442\u0441\u044F \u0438 \u0443 \u0432\u0430\u0441.</li><li>\u0421\u0441\u044B\u043B\u043A\u0438 \u043D\u0430 \u043A\u0430\u0440\u0442\u0438\u043D\u043A\u0438 \u0445\u0440\u0430\u043D\u044F\u0442\u0441\u044F \u0432 \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0435. \u0414\u043B\u044F \u0442\u043E\u0433\u043E, \u0447\u0442\u043E\u0431\u044B \u0438\u0445 \u043F\u0435\u0440\u0435\u043C\u0435\u0449\u0430\u0442\u044C \u043C\u0435\u0436\u0434\u0443 \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0430\u043C\u0438 \u0438\u043C\u0435\u0435\u0442\u0441\u044F \u043A\u043D\u043E\u043F\u043A\u0430 \u044D\u043A\u0441\u043F\u043E\u0440\u0442\u0430 (\u0432\u044B\u0442\u0430\u0449\u0438\u0442\u044C) \u0438 \u0438\u043C\u043F\u043E\u0440\u0442 (\u0432\u0441\u0442\u0430\u0432\u043A\u0430 \u044D\u043A\u0441\u043F\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u043E\u0433\u043E \u0444\u0430\u0439\u043B\u0430).</li><li>\u041A\u0430\u0440\u0442\u0438\u043D\u043A\u0438 \u043E\u0431\u0449\u0438\u0435 \u0434\u043B\u044F \u043A\u0430\u043D\u0430\u043B\u043E\u0432 \u0441\u0430\u0439\u0442\u0430, \u043D\u043E <strong>\u0440\u0430\u0437\u043D\u044B\u0435 \u0434\u043B\u044F http:// \u0438 https://</strong></li></ul></p>","Your old pictures will be removed and replaced with the images from uploaded file (file must correspond to format of the file from export button of this panel).<br>Are you sure you want to continue?":"\u0412\u0430\u0448\u0438 \u0441\u0442\u0430\u0440\u044B\u0435 \u043A\u0430\u0440\u0442\u0438\u043D\u043A\u0438 \u0431\u0443\u0434\u0443\u0442 \u0443\u0434\u0430\u043B\u0435\u043D\u044B, \u0438 \u0437\u0430\u043C\u0435\u043D\u0435\u043D\u044B \u043A\u0430\u0440\u0442\u0438\u043D\u043A\u0430\u043C\u0438 \u0438\u0437 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u043D\u043E\u0433\u043E \u0444\u0430\u0439\u043B\u0430 (\u043F\u043E\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044E\u0442\u0441\u044F \u0442\u043E\u043B\u044C\u043A\u043E \u0444\u0430\u0439\u043B\u044B, \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u043D\u044B\u0435 \u044D\u043A\u0441\u043F\u043E\u0440\u0442\u043E\u043C \u0447\u0435\u0440\u0435\u0437 \u044D\u0442\u0443 \u0436\u0435 \u043F\u0430\u043D\u0435\u043B\u044C).<br>\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u043F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C?","Can't detect any pictures in this file.":"\u041D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E \u0440\u0430\u0441\u043F\u043E\u0437\u043D\u0430\u0442\u044C \u043A\u0430\u0440\u0442\u0438\u043D\u043A\u0438 \u0438\u0437 \u0444\u0430\u0439\u043B\u0430."},videoInfo:{"Now:":"\u0421\u0435\u0439\u0447\u0430\u0441:","Added by":"\u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u043E","Nothing is playing now":"\u0421\u0435\u0439\u0447\u0430\u0441 \u043D\u0438\u0447\u0435\u0433\u043E \u043D\u0435 \u0432\u043E\u0441\u043F\u0440\u043E\u0438\u0437\u0432\u043E\u0434\u0438\u0442\u0441\u044F"},tabs:{Title:"\u0417\u0430\u0433\u043E\u043B\u043E\u0432\u043E\u043A",Content:"\u0421\u043E\u0434\u0435\u0440\u0436\u0438\u043C\u043E\u0435","Show tabs settings (cytube enhanced)":"\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0432\u043A\u043B\u0430\u0434\u043E\u043A (cytube enhanced)","Tabs settings":"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0430 \u0432\u043A\u043B\u0430\u0434\u043E\u043A","Channel description":"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043A\u0430\u043D\u0430\u043B\u0430","Add tab":"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432\u043A\u043B\u0430\u0434\u043A\u0443","Remove the last tab":"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043F\u043E\u0441\u043B\u0435\u0434\u043D\u044E\u044E \u0432\u043A\u043B\u0430\u0434\u043A\u0443","Convert to the editor's code":"\u041F\u0440\u0435\u043E\u0431\u0440\u0430\u0437\u043E\u0432\u0430\u0442\u044C \u0432 \u043A\u043E\u0434 \u0440\u0435\u0434\u0430\u043A\u0442\u043E\u0440\u0430","The code in the editor will be replaced with the new code, continue?":"\u041A\u043E\u0434 \u0432 \u0440\u0435\u0434\u0430\u043A\u0442\u043E\u0440\u0435 \u0431\u0443\u0434\u0435\u0442 \u0443\u0434\u0430\u043B\u0451\u043D \u0438 \u0437\u0430\u043C\u0435\u043D\u0435\u043D \u043D\u043E\u0432\u044B\u043C, \u043F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C?","Tabs settings will be replaced with the code from the editor, continue?":"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0432\u043A\u043B\u0430\u0434\u043E\u043A \u0431\u0443\u0434\u0443\u0442 \u0437\u0430\u043C\u0435\u043D\u0435\u043D\u044B \u043A\u043E\u0434\u043E\u043C \u0438\u0437 \u0440\u0435\u0434\u0430\u043A\u0442\u043E\u0440\u0430, \u043F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C?","Wrong content for the dropdown":"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u043E\u0435 \u0441\u043E\u0434\u0435\u0440\u0436\u0438\u043C\u043E\u0435 \u0434\u043B\u044F \u0432\u044B\u043F\u0430\u0434\u0430\u044E\u0449\u0435\u0433\u043E \u0441\u043F\u0438\u0441\u043A\u0430: ","Convert from the editor's code":"\u041F\u0440\u0435\u043E\u0431\u0440\u0430\u0437\u043E\u0432\u0430\u0442\u044C \u0438\u0437 \u043A\u043E\u0434\u0430 \u0440\u0435\u0434\u0430\u043A\u0442\u043E\u0440\u0430","By default tab behaves like simple tab.":"\u041F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E \u0432\u043A\u043B\u0430\u0434\u043A\u0430 \u0432\u0435\u0434\u0451\u0442 \u0441\u0435\u0431\u044F \u043A\u0430\u043A \u043E\u0431\u044B\u0447\u043D\u0430\u044F \u0432\u043A\u043B\u0430\u0434\u043A\u0430.",'Use !dropdown! prefix to create dropdown list. Example: !dropdown!My dropdown. Value must look like "[n]Link title 1[/n][a]URL 1[/a], [n]Link title 2[/n][a]URL 2[/a], [n]Link title 3[/n][a]URL 3[/a]"':"\u0427\u0442\u043E\u0431\u044B \u0441\u043E\u0437\u0434\u0430\u0442\u044C \u0432\u044B\u043F\u0430\u0434\u0430\u044E\u0449\u0438\u0439 \u0441\u043F\u0438\u0441\u043E\u043A, \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u043F\u0440\u0435\u0444\u0438\u043A\u0441 !dropdown! \u043F\u0435\u0440\u0435\u0434 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435\u043C, \u043D\u0430\u043F\u0440\u0438\u043C\u0435\u0440 \"!dropdown!\u041C\u043E\u0439 \u0432\u044B\u043F\u0430\u0434\u0430\u044E\u0449\u0438\u0439 \u0441\u043F\u0438\u0441\u043E\u043A\". \u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0434\u043E\u043B\u0436\u043D\u043E \u0432\u044B\u0433\u043B\u044F\u0434\u0435\u0442\u044C \u0442\u0430\u043A \"[n]\u0417\u0430\u0433\u043E\u043B\u043E\u0432\u043E\u043A 1[/n][a]\u0410\u0434\u0440\u0435\u0441 \u0441\u0441\u044B\u043B\u043A\u0438 1[/a], [n]\u0417\u0430\u0433\u043E\u043B\u043E\u0432\u043E\u043A 2[/n][a]\u0410\u0434\u0440\u0435\u0441 \u0441\u0441\u044B\u043B\u043A\u0438 2[/a], [n]\u0417\u0430\u0433\u043E\u043B\u043E\u0432\u043E\u043A 3[/n][a]\u0410\u0434\u0440\u0435\u0441 \u0441\u0441\u044B\u043B\u043A\u0438 3[/a]\"","Use !link! prefix to create link. Example: !link!My link. Value must contain URL.":"\u0427\u0442\u043E\u0431\u044B \u0441\u043E\u0437\u0434\u0430\u0442\u044C \u0441\u0441\u044B\u043B\u043A\u0443, \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u043F\u0440\u0435\u0444\u0438\u043A\u0441 !link! \u043F\u0435\u0440\u0435\u0434 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435\u043C, \u043D\u0430\u043F\u0440\u0438\u043C\u0435\u0440 \"!link!\u041C\u043E\u044F \u0441\u0441\u044B\u043B\u043A\u0430\". \u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0434\u043E\u043B\u0436\u043D\u043E \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u0430\u0434\u0440\u0435\u0441 \u0441\u0441\u044B\u043B\u043A\u0438."},emotes:{"Show emotes":"\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u0441\u043C\u0430\u0439\u043B\u0438\u043A\u0438"},settings:{"Extended settings":"+",Save:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",Cancel:"\u041E\u0442\u043C\u0435\u043D\u0430","Some settings need to refresh the page to get to work. Do it now?":"\u0414\u043B\u044F \u043D\u043E\u0440\u043C\u0430\u043B\u044C\u043D\u043E\u0439 \u0440\u0430\u0431\u043E\u0442\u044B \u043D\u0435\u043A\u043E\u0442\u043E\u0440\u044B\u0445 \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043A \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044F \u043F\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0443. \u0421\u0434\u0435\u043B\u0430\u0442\u044C \u044D\u0442\u043E \u0441\u0435\u0439\u0447\u0430\u0441?",Yes:"\u0414\u0430",No:"\u041D\u0435\u0442"},general:{General:"\u041E\u0431\u0449\u0435\u0435","Smiles and pictures together":"\u0421\u043C\u0430\u0439\u043B\u0438\u043A\u0438 \u0438 \u043A\u0430\u0440\u0442\u0438\u043D\u043A\u0438 \u0432\u043C\u0435\u0441\u0442\u0435","Show emotes and favorite images":"\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u0441\u043C\u0430\u0439\u043B\u0438\u043A\u0438 \u0438 \u0438\u0437\u0431\u0440\u0430\u043D\u043D\u044B\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F","Interface language":"\u042F\u0437\u044B\u043A \u0438\u043D\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430"},chatAvatars:{"Chat avatars":"\u0410\u0432\u0430\u0442\u0430\u0440\u043A\u0438 \u0432 \u0447\u0430\u0442\u0435",Disabled:"\u0412\u044B\u043A\u043B\u044E\u0447\u0435\u043D\u044B",Small:"\u041C\u0430\u043B\u0435\u043D\u044C\u043A\u0438\u0435",Big:"\u0411\u043E\u043B\u044C\u0448\u0438\u0435"},standardUI:{"Create a poll":"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u043E\u043F\u0440\u043E\u0441","Add video":"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432\u0438\u0434\u0435\u043E","Add video from url":"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432\u0438\u0434\u0435\u043E \u043F\u043E \u0441\u0441\u044B\u043B\u043A\u0435","connected users":"\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439","connected user":"\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C",AFK:"\u0410\u0424\u041A",Anonymous:"\u0410\u043D\u043E\u043D\u0438\u043C\u043D\u044B\u0445","Channel Admins":"\u0410\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440\u043E\u0432 \u043A\u0430\u043D\u0430\u043B\u0430",Guests:"\u0413\u043E\u0441\u0442\u0435\u0439",Moderators:"\u041C\u043E\u0434\u0435\u0440\u0430\u0442\u043E\u0440\u043E\u0432","Regular Users":"\u041E\u0431\u044B\u0447\u043D\u044B\u0445 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439","Site Admins":"\u0410\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440\u043E\u0432 \u0441\u0430\u0439\u0442\u0430","Welcome, ":"\u0414\u043E\u0431\u0440\u043E \u043F\u043E\u0436\u0430\u043B\u043E\u0432\u0430\u0442\u044C, ","Log out":"\u0412\u044B\u0439\u0442\u0438",Login:"\u041B\u043E\u0433\u0438\u043D",Password:"\u041F\u0430\u0440\u043E\u043B\u044C","Remember me":"\u0417\u0430\u043F\u043E\u043C\u043D\u0438\u0442\u044C","Log in":"\u0412\u0445\u043E\u0434",Home:"\u041D\u0430 \u0433\u043B\u0430\u0432\u043D\u0443\u044E",Account:"\u0410\u043A\u043A\u0430\u0443\u043D\u0442",Logout:"\u0412\u044B\u0445\u043E\u0434",Channels:"\u041A\u0430\u043D\u0430\u043B\u044B",Profile:"\u041F\u0440\u043E\u0444\u0438\u043B\u044C","Change Password/Email":"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u043F\u0430\u0440\u043E\u043B\u044C/\u043F\u043E\u0447\u0442\u0443",Register:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F",Options:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438","Channel Settings":"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u043A\u0430\u043D\u0430\u043B\u0430",Layout:"\u041E\u0444\u043E\u0440\u043C\u043B\u0435\u043D\u0438\u0435","Chat Only":"\u0422\u043E\u043B\u044C\u043A\u043E \u0447\u0430\u0442","Remove Video":"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u0438\u0434\u0435\u043E","Video url":"\u0410\u0434\u0440\u0435\u0441 \u0432\u0438\u0434\u0435\u043E",Next:"\u0421\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u043C","At end":"\u0412 \u043A\u043E\u043D\u0435\u0446",Play:"\u041F\u0440\u043E\u0438\u0433\u0440\u0430\u0442\u044C","Queue Next":"\u041F\u043E\u0441\u0442\u0430\u0432\u0438\u0442\u044C \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u043C","Make Temporary":"\u0421\u0434\u0435\u043B\u0430\u0442\u044C \u0432\u0440\u0435\u043C\u0435\u043D\u043D\u044B\u043C","Make Permanent":"\u0421\u0434\u0435\u043B\u0430\u0442\u044C \u043F\u043E\u0441\u0442\u043E\u044F\u043D\u043D\u044B\u043C",Delete:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",Name:"\u0418\u043C\u044F","Guest login":"\u0413\u043E\u0441\u0442\u0435\u0432\u043E\u0439 \u0432\u0445\u043E\u0434"},video:{"Refresh video":"\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u0432\u0438\u0434\u0435\u043E","Hide video":"\u0421\u043A\u0440\u044B\u0442\u044C \u0432\u0438\u0434\u0435\u043E",best:"\u043D\u0430\u0438\u0432\u044B\u0441\u0448\u0435\u0435",Quality:"\u041A\u0430\u0447\u0435\u0441\u0442\u0432\u043E","Use Youtube JS Player":"\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u044C Youtube JS Player","Expand playlist":"\u0420\u0430\u0437\u0432\u0435\u0440\u043D\u0443\u0442\u044C \u043F\u043B\u0435\u0439\u043B\u0438\u0441\u0442","Unexpand playlist":"\u0421\u0432\u0435\u0440\u043D\u0443\u0442\u044C \u043F\u043B\u0435\u0439\u043B\u0438\u0441\u0442","Scroll the playlist to the current video":"\u041F\u0440\u043E\u043A\u0440\u0443\u0442\u0438\u0442\u044C \u043F\u043B\u0435\u0439\u043B\u0438\u0441\u0442 \u043A \u0442\u0435\u043A\u0443\u0449\u0435\u043C\u0443 \u0432\u0438\u0434\u0435\u043E","Contributors' list":"\u0421\u043F\u0438\u0441\u043E\u043A \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439, \u0434\u043E\u0431\u0430\u0432\u0438\u0432\u0448\u0438\u0445 \u0432\u0438\u0434\u0435\u043E","Video's count":"\u0412\u0441\u0435\u0433\u043E \u0432\u0438\u0434\u0435\u043E"},markdown:{"Markdown helper":"\u041F\u043E\u043C\u043E\u0449\u043D\u0438\u043A \u0440\u0430\u0437\u043C\u0435\u0442\u043A\u0438","Bold text":"\u0416\u0438\u0440\u043D\u044B\u0439 \u0442\u0435\u043A\u0441\u0442","Cursive text":"\u041D\u0430\u043A\u043B\u043E\u043D\u043D\u044B\u0439 \u0442\u0435\u043A\u0441\u0442",Spoiler:"\u0421\u043F\u043E\u0439\u043B\u0435\u0440",Monospace:"\u041C\u043E\u043D\u043E\u0448\u0438\u0440\u0438\u043D\u043D\u044B\u0439 \u0442\u0435\u043A\u0441\u0442",Strike:"\u041F\u0435\u0440\u0435\u0447\u0451\u0440\u043A\u043D\u0443\u0442\u044B\u0439 \u0442\u0435\u043A\u0441\u0442"},pmHistory:{History:"\u0418\u0441\u0442","Chat history":"\u0418\u0441\u0442\u043E\u0440\u0438\u044F \u0447\u0430\u0442\u0430","Your chat messages history.":"\u0418\u0441\u0442\u043E\u0440\u0438\u044F \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0439, \u0430\u0434\u0440\u0435\u0441\u043E\u0432\u0430\u043D\u043D\u044B\u0445 \u0432\u0430\u043C \u0432 \u0447\u0430\u0442\u0435.","Reset history":"\u0421\u0431\u0440\u043E\u0441\u0438\u0442\u044C \u0438\u0441\u0442\u043E\u0440\u0438\u044E","Are you sure, that you want to clear messages history?":"\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0441\u0431\u0440\u043E\u0441\u0438\u0442\u044C \u0438\u0441\u0442\u043E\u0440\u0438\u044E \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0439?",Exit:"\u0412\u044B\u0445\u043E\u0434"},extras:{Extras:"\u0421\u0442\u043E\u0440\u043E\u043D\u043D\u0438\u0435 \u043C\u043E\u0434\u0443\u043B\u0438","Extras for additional functionality":"\u0421\u0442\u043E\u0440\u043E\u043D\u043D\u0438\u0435 \u043C\u043E\u0434\u0443\u043B\u0438 \u0434\u043B\u044F \u0434\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0433\u043E \u0444\u0443\u043D\u043A\u0446\u0438\u043E\u043D\u0430\u043B\u0430.",Source:"\u0418\u0441\u0442\u043E\u0447\u043D\u0438\u043A"},themes:{Themes:"\u0422\u0435\u043C\u044B","Theme settings":"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0430 \u0442\u0435\u043C\u044B","Apply this theme?":"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u0442\u0435\u043C\u0443 \u043D\u0430 \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u0443\u044E?",'Default theme was changed to "%themeTitle%" by administrator. Do you want to try it? (Don\'t forget, that you can switch your theme in extended settings anytime.)':"\u0422\u0435\u043C\u0430 \u043F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E \u0431\u044B\u043B\u0430 \u0438\u0437\u043C\u0435\u043D\u0430 \u0430\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440\u043E\u043C \u043D\u0430 \"%themeTitle%\". \u0412\u044B \u0445\u043E\u0442\u0438\u0442\u0435 \u043F\u043E\u043F\u0440\u043E\u0431\u043E\u0432\u0430\u0442\u044C \u0435\u0451? (\u041D\u0435 \u0437\u0430\u0431\u044B\u0432\u0430\u0439\u0442\u0435, \u0447\u0442\u043E \u0432\u044B \u043C\u043E\u0436\u0435\u0442\u0435 \u043F\u043E\u043C\u0435\u043D\u044F\u0442\u044C \u0441\u0432\u043E\u044E \u0442\u0435\u043C\u0443 \u0432 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043D\u043D\u044B\u0445 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0430\u0445 \u0432 \u043B\u044E\u0431\u043E\u0435 \u0432\u0440\u0435\u043C\u044F.)"},Help:"\u041F\u043E\u043C\u043E\u0449\u044C",Close:"\u0417\u0430\u043A\u0440\u044B\u0442\u044C",ru:"\u0420\u0443\u0441\u0441\u043A\u0438\u0439",en:"\u0410\u043D\u0433\u043B\u0438\u0439\u0441\u043A\u0438\u0439",Confirm:"\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044C",Cancel:"\u041E\u0442\u043C\u0435\u043D\u0430",OK:"OK"}},function(){window.CytubeEnhancedHelpers=function(){this;this.getViewportSize=function(){var e=Math.max(document.documentElement.clientWidth,window.innerWidth||0),t=Math.max(document.documentElement.clientHeight,window.innerHeight||0);return{width:e,height:t}},this.addMessageToChatInput=function(e,t){var n=$(chatline);t=t||"end","begin"===t?e+=n.val():e=n.val()+e,n.val(e).focus()}}},function(){window.CytubeEnhancedStorage=function(e,t,n){var a=this;t=!("undefined"!=typeof t)||t,n="undefined"!=typeof n&&n;var o={},i={},s={};try{s=JSON.parse(window.localStorage.getItem(e+"-"+(t?"":CHANNEL.name)+e)),s=_.isPlainObject(s)?s:{}}catch(e){s={}}i=_.cloneDeep(s),this.getDefault=function(e){return o[e]},this.setDefault=function(e,t){t=_.cloneDeep(t),o[e]=t,s[e]="undefined"==typeof s[e]?t:s[e],i[e]="undefined"==typeof i[e]?t:i[e]},this.get=function(e){return s[e]},this.set=function(e,t){var o=s[e]=_.cloneDeep(t);return n&&a.save(),o},this.toggle=function(e){var t=s[e]=!s[e];return n&&a.save(),t},this.isDirty=function(e){var t=!1;if(_.isArray(e)){for(var n in e)if(!d(s[n],i[n])){t=!0;break}}else t=!d(s[e],i[e]);return t},this.save=function(){try{return window.localStorage.setItem(e+"-"+(t?"":CHANNEL.name)+e,JSON.stringify(s))}catch(e){return!1}},this.reset=function(){s=_.cloneDeep(o)};var d=function(e,t){return _.isArray(e)&&_.isArray(t)?0===_.difference(e,t).length&&0===_.difference(t,e).length:_.isEqual(e,t)}}},function(){window.CytubeEnhancedUISettings=function(e){'use strict';var t=this;this.$navbar=$("#nav-collapsible").find(".navbar-nav"),this.tabs={},this.$tabsContainerHeader=$("<div class=\""+e.prefix+"ui__header\"></div>"),this.$tabsContainerBody=$("<div class=\""+e.prefix+"ui__body tab-content\"></div>"),this.$tabsContainerTabs=$("<ul class=\"nav nav-tabs\">"),this.$tabsContainerFooter=$("<div class=\""+e.prefix+"ui__footer\"></div>"),this.$tabsContainerOpenButton=$("<a href=\"#\" id=\""+e.prefix+"ui\"></a>").text(e.t("settings[.]Extended settings")).on("click",function(e){e.preventDefault(),e.stopPropagation(),t.openSettings()});var n=$("#useroptions .modal-header .nav-tabs");0!==n.length&&!1?this.$tabsContainerOpenButton.appendTo(n).wrap("<li>"):this.$tabsContainerOpenButton.appendTo(t.$navbar).wrap("<li>"),this.themeTabName="theme-settings",this.themeTabTitle=e.t("themes[.]Theme settings"),this.storage=new CytubeEnhancedStorage("settings",!1);var a=!1;$("<h4>"+e.t("settings[.]Extended settings")+"</h4>").appendTo(t.$tabsContainerHeader),t.$tabsContainerTabs.appendTo(t.$tabsContainerHeader),$("<button type=\"button\" data-dismiss=\"modal\" class=\"btn btn-success\">"+e.t("settings[.]Save")+"</button>").appendTo(t.$tabsContainerFooter).on("click",function(){t.save()}),$("<button type=\"button\" data-dismiss=\"modal\" class=\""+e.prefix+"user-settings btn btn-default\">"+e.t("settings[.]Cancel")+"</button>").appendTo(t.$tabsContainerFooter),this.onSave=function(n){$(document).on(e.prefix+"settings.save",function(){n(t.storage)})},this.save=function(){$(document).trigger(e.prefix+"settings.save"),t.storage.save(),a&&e.UI.createConfirmWindow(e.t("settings[.]Some settings need to refresh the page to get to work. Do it now?"),function(e){e&&window.location.reload()})},this.reset=function(){t.storage.reset(),e.UI.createConfirmWindow(e.t("settings[.]Some settings need to refresh the page to get to work. Do it now?"),function(e){e&&window.location.reload()})};var o=function(n,a,o){var i=new window.CytubeEnhancedUITab(e,n,a,o);return i.$button.appendTo(t.$tabsContainerTabs),i.$content.appendTo(t.$tabsContainerBody),t.tabs[n]=i,t.sortTabs(),i};this.getTab=function(e,n,a){return"undefined"==typeof t.tabs[e]?n?o(e,n,a):null:t.tabs[e]},this.configureTheme=function(n){var a=t.getTab(t.themeTabName,t.themeTabTitle,99999),o=new CytubeEnhancedStorage("themes."+e.Settings.storage.get("themes.selected"),!0,!0);n(e,a,o)},this.openTab=function(e){return!!t.tabs[e]&&(t.tabs[e].show(),!0)},t.removeTab=function(e){return!!t.tabs[e]&&(t.tabs[e].remove(),delete t.tabs[e],!0)},this.sortTabs=function(){var e=[];for(var n in t.tabs)e.push(t.tabs[n]);e=e.sort(function(e,t){return e.sort>t.sort?1:e.sort<t.sort?-1:0});for(var a=0,o=e.length;a<o;a++)e[a].$button.detach().appendTo(t.$tabsContainerTabs)},this.openSettings=function(){e.UI.createModalWindow("settings",t.$tabsContainerHeader,t.$tabsContainerBody,t.$tabsContainerFooter,!0);var n;for(var a in t.tabs)("undefined"==typeof n||"undefined"==typeof n.sort||n.sort>t.tabs[a].sort)&&(n=t.tabs[a]);n.show()},this.requestPageReload=function(){a=!0}}},function(){window.CytubeEnhancedUITab=function(e,t,n,a){'use strict';var o=this;this.$button=$("<li><a href=\"#"+e.prefix+t+"__content\" class=\""+t+"__button\" data-toggle=\"tab\">"+n+"</a></li>"),this.$content=$("<div id=\""+e.prefix+t+"__content\" class=\"tab-pane\">"),this.$form=e.UI.createControlsWrapper("horizontal").appendTo(this.$content),this.sort=Math.abs(parseInt(a,10))||0,this.controls={},this.show=function(){o.$button.find("a").tab("show"),$(document).trigger(e.prefix+"tab-"+t+".show")},this.$button.on("show.bs.tab",function(){$(document).trigger(e.prefix+"tab-"+t+".show")}),this.onShow=function(n){$(document).on(e.prefix+"tab-"+t+".show",function(){n(o)})},this.addControl=function(t,n,a,i,s,d,r,l){t=-1==["select","checkbox"].indexOf(t)?"select":t,r=Math.abs(parseInt(r,10))||0;var c="create"+t.slice(0,1).toUpperCase()+t.slice(1)+"Control",p=e.UI[c](n,a,i,s,d);return p.data("sort",r),o.controls[i]={$el:p,sort:r},l?p.appendTo(l):p.appendTo(o.$form),o.sortControls(),p},this.sortControls=function(){var e=[];for(var t in o.controls)e.push(o.controls[t]);e=e.sort(function(e,t){return e.sort>t.sort?1:e.sort<t.sort?-1:0});for(var n=0,a=e.length;n<a;n++)e[n].$el.detach().appendTo(o.$form)},this.getName=function(){return t},this.remove=function(){o.$button.empty(),o.$content.empty()}}},function(){window.CytubeEnhancedUI=function(e){var t=this;this.createModalWindow=function(t,n,a,o,i){$(".modal").modal("hide"),t=e.prefix+"modal-"+t;var s=$("#"+t);if(!i)s.remove();else if(s.length)return s.modal("show"),s;var d=$("<div class=\"modal fade\" id=\""+t+"\" role=\"dialog\" tabindex=\"-1\">").appendTo($("body")),r=$("<div class=\"modal-dialog modal-lg\">").appendTo(d),l=$("<div class=\"modal-content\">").appendTo(r);if(n){var c=$("<div class=\"modal-header\">").append(n).appendTo(l);$("<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\""+e.t("Close")+"\">").html("<span aria-hidden=\"true\">&times;</span>").prependTo(c)}return a&&$("<div class=\"modal-body\">").append(a).appendTo(l),o&&$("<div class=\"modal-footer\">").append(o).appendTo(l),d.on("hidden.bs.modal",function(){i||$(this).remove()}),d.modal({keyboard:!0}),d},this.createConfirmWindow=function(n,a){var o=!1,i=$("<div class=\"modal fade "+e.prefix+"modal-confirm modal-centered\" role=\"dialog\" tabindex=\"-1\">").appendTo($("body")),s=$("<div class=\"modal-dialog modal-sm\">").appendTo(i),d=$("<div class=\"modal-content\">").appendTo(s);$("<div class=\"modal-header\">").html($("<h3 class=\"modal-title\">").html(n)).appendTo(d);var r=$("<div class=\"modal-footer\">").appendTo(d);$("<button type=\"button\" class=\"btn btn-default\">"+e.t("Confirm")+"</button>").appendTo(r).on("click",function(){o=!0,i.modal("hide")}),$("<button type=\"button\" data-dismiss=\"modal\" class=\""+e.prefix+"user-settings btn btn-default\">"+e.t("Cancel")+"</button>").appendTo(r),i.on("shown.bs.modal",function(){t.centerModals($(this))}),i.on("hidden.bs.modal",function(){_.isFunction(a)&&a(o),$(this).remove()}),i.modal({keyboard:!0})},this.createAlertWindow=function(n,a){var o=$("<div class=\"modal fade "+e.prefix+"modal-confirm modal-centered\" role=\"dialog\" tabindex=\"-1\">").appendTo($("body")),i=$("<div class=\"modal-dialog modal-sm\">").appendTo(o),s=$("<div class=\"modal-content\">").appendTo(i);$("<div class=\"modal-header\">").html($("<h3 class=\"modal-title\">").html(n)).appendTo(s);var d=$("<div class=\"modal-footer\">").appendTo(s);$("<button type=\"button\" data-dismiss=\"modal\" class=\"btn btn-default\">"+e.t("OK")+"</button>").appendTo(d),o.on("shown.bs.modal",function(){t.centerModals($(this))}),o.on("hidden.bs.modal",function(){_.isFunction(a)&&a(),$(this).remove()}),o.modal({keyboard:!0})},this.createControlsWrapper=function(e){return e=-1==["default","horizontal","inline"].indexOf(e)?"default":e,$("<div class=\"form-"+e+"\">")},this.createSelectControl=function(t,n,a,o,i){o=o||[];var s=$("<div class=\"form-group\">"),d;if("horizontal"==t){$("<label for=\""+e.prefix+a+"\" class=\"control-label col-sm-4\">"+n+"</label>").appendTo(s);var r=$("<div class=\"col-sm-8\">").appendTo(s);d=$("<select id=\""+e.prefix+a+"\" class=\"form-control\">").appendTo(r)}else $("<label for=\""+e.prefix+a+"\">"+n+"</label>").appendTo(s),d=$("<select id=\""+e.prefix+a+"\" class=\"form-control\">").appendTo(s);i&&d.on("change",i);for(var l=0,c=o.length,p;l<c;l++)p=o[l].selected?"selected":"",d.append("<option value=\""+o[l].value+"\" "+p+">"+o[l].title+"</option>");return s},this.createButton=function(e,t,n){var a=$("<button type=\"button\" class=\"btn btn-"+e+"\">"+t+"</button>");return n&&a.on("click",n),a},this.toggleLoader=function(e,t){e.each(function(){"undefined"==typeof t&&(t=e.hasClass("loading-spinner__loading")?"off":"on"),$(this).removeClass("loading-spinner__loading"),$(".loading-spinner__overlay").remove(),$(this).css("height","auto"),$(this).css("width","auto"),"on"===t&&($(this).addClass("loading-spinner__loading"),$(this).css("height",$(this).outerHeight()),$(this).css("width",$(this).outerWidth()),$("<div class=\"loading-spinner__overlay\">").append($("<div class=\"loading-spinner__wrapper\">").append("<div class=\"loading-spinner\">")).appendTo($(this)))})},$.fn.toggleLoader=function(e){t.toggleLoader($(this),e)},this.centerModals=function(e){"undefined"==typeof e&&(e=$(".modal-centered")),e.each(function(){var t=e.find(".modal-dialog");t.css({display:"block",marginTop:Math.max(0,($(window).height()-t.outerHeight())/2)})})},$(window).resize(function(){t.centerModals()})}},function(e,t,n){n(8),window.CytubeEnhanced=function(e,t,n){'use strict';var a=this;this.translations={},this.prefix="ce-",this.version="2.8.0";var o={},i=100;if(this.getModule=function(e){var t=$.Deferred(),n=6e4;return function a(){if("undefined"!=typeof o[e])t.resolve(o[e]);else if(0>=n)throw new Error("Load timeout for module "+e+".");else n-=i,setTimeout(a,i)}(),t},this.addModule=function(e,a){if(this.isModulePermitted(e)){var i=t[e]||{},s=new a(this,i);n[e]&&n[e](s),o[e]=s}},this.isModulePermitted=function(e){return!t.hasOwnProperty(e)||!t[e].hasOwnProperty("enabled")||t[e].enabled},this.addTranslation=function(e,t){"undefined"==typeof a.translations[e]?a.translations[e]=t:$.extend(!0,a.translations[e],t)},this.t=function(e){var t=e;if(!("en"!==a.storage.get("language")&&a.translations[a.storage.get("language")]))-1!==e.indexOf("[.]")&&(t=e.split("[.]").pop(),t=t||e);else if(-1!==e.indexOf("[.]")){var n=e.split("[.]");if(t=a.translations[a.storage.get("language")][n[0]],"undefined"==typeof t)return t=e.split("[.]").pop(),t||e;for(var o=1,i=n.length;o<i;o++)if(t=t[n[o]],"undefined"==typeof t)return t=e.split("[.]").pop(),t||e;t=t||n[n.length-1]}else t=a.translations[a.storage.get("language")][e];return t},this.parseJSON=function(e,t){t="undefined"==typeof t?null:t;var n;try{n=window.JSON.parse(e)}catch(e){n=t}return n},this.toJSON=function(e,t){t="undefined"==typeof t?null:t;var n;try{n=window.JSON.stringify(e)}catch(e){n=t}return n},$.ajaxSetup({cache:!0}),window.cytubeEnhancedDefaultTranslates)for(var s in window.cytubeEnhancedDefaultTranslates)this.addTranslation(s,window.cytubeEnhancedDefaultTranslates[s]);this.storage=new window.CytubeEnhancedStorage("default",!0,!0),this.storage.setDefault("language",e),this.UI=new window.CytubeEnhancedUI(this),this.Helpers=new window.CytubeEnhancedHelpers(this),this.Settings=new window.CytubeEnhancedUISettings(this)}},function(e,t,n){var a;(function(e,o){(function(){function i(e,t){return e.set(t[0],t[1]),e}function s(e,t){return e.add(t),e}function d(e,t,n){var a=n.length;return 0===a?e.call(t):1===a?e.call(t,n[0]):2===a?e.call(t,n[0],n[1]):3===a?e.call(t,n[0],n[1],n[2]):e.apply(t,n)}function r(e,t,n,a){for(var o=-1,i=e.length;++o<i;){var s=e[o];t(a,s,n(s),e)}return a}function l(e,t){for(var n=-1,a=e.length,o=-1,i=t.length,s=Array(a+i);++n<a;)s[n]=e[n];for(;++o<i;)s[n++]=t[o];return s}function c(e,t){for(var n=-1,a=e.length;++n<a&&!(!1===t(e[n],n,e)););return e}function p(e,t){for(var n=e.length;n--&&!(!1===t(e[n],n,e)););return e}function u(e,t){for(var n=-1,a=e.length;++n<a;)if(!t(e[n],n,e))return!1;return!0}function m(e,t){for(var n=-1,a=e.length,o=0,i=[];++n<a;){var s=e[n];t(s,n,e)&&(i[o++]=s)}return i}function h(e,t){return!!e.length&&-1<k(e,t,0)}function g(e,t,n){for(var a=-1,o=e.length;++a<o;)if(n(t,e[a]))return!0;return!1}function f(e,t){for(var n=-1,a=e.length,o=Array(a);++n<a;)o[n]=t(e[n],n,e);return o}function b(e,t){for(var n=-1,a=t.length,o=e.length;++n<a;)e[o+n]=t[n];return e}function v(e,t,n,a){var o=-1,i=e.length;for(a&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n}function y(e,t,n,a){var o=e.length;for(a&&o&&(n=e[--o]);o--;)n=t(n,e[o],o,e);return n}function x(e,t){for(var n=-1,a=e.length;++n<a;)if(t(e[n],n,e))return!0;return!1}function T(e,t,n,a){var o;return n(e,function(e,n,i){if(t(e,n,i))return o=a?n:e,!1}),o}function w(e,t,n){for(var a=e.length,o=n?a:-1;n?o--:++o<a;)if(t(e[o],o,e))return o;return-1}function k(e,t,n){if(t!==t)return W(e,n);for(var a=n-1,o=e.length;++a<o;)if(e[a]===t)return a;return-1}function C(e,t,n,a){for(var o=n-1,i=e.length;++o<i;)if(a(e[o],t))return o;return-1}function E(e,t){var n=e?e.length:0;return n?P(e,t)/n:K}function S(e,t,n,a,o){return o(e,function(e,o,i){n=a?(a=!1,e):t(n,e,o,i)}),n}function I(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function P(e,t){for(var n=-1,a=e.length,o;++n<a;){var i=t(e[n]);i!==void 0&&(o=o===void 0?i:o+i)}return o}function M(e,t){for(var n=-1,a=Array(e);++n<e;)a[n]=t(n);return a}function A(e,t){return f(t,function(t){return[t,e[t]]})}function O(e){return function(t){return e(t)}}function j(e,t){return f(t,function(t){return e[t]})}function R(e,t){for(var n=-1,a=e.length;++n<a&&-1<k(t,e[n],0););return n}function B(e,t){for(var n=e.length;n--&&-1<k(t,e[n],0););return n}function U(e){return e&&e.Object===Object?e:null}function L(e,t){for(var n=e.length,a=0;n--;)e[n]===t&&a++;return a}function N(e){return Ht[e]}function D(e){return Wt[e]}function H(e){return"\\"+Vt[e]}function W(e,t,n){for(var a=e.length,o=t+(n?0:-1);n?o--:++o<a;){var i=e[o];if(i!==i)return o}return-1}function q(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(t){}return t}function F(e){for(var t=[],n;!(n=e.next()).done;)t.push(n.value);return t}function V(e){var t=-1,n=Array(e.size);return e.forEach(function(e,a){n[++t]=[a,e]}),n}function z(e,t){for(var n=-1,a=e.length,o=0,i=[];++n<a;){var s=e[n];(s===t||s==="__lodash_placeholder__")&&(e[n]="__lodash_placeholder__",i[o++]=n)}return i}function G(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function Y(e){if(!(e&&Bt.test(e)))return e.length;for(var t=jt.lastIndex=0;jt.test(e);)t++;return t}function Z(e){return e.match(jt)}function X(e){return qt[e]}function Q(e){function t(e){if(ko(e)&&!ed(e)&&!(e instanceof o)){if(e instanceof a)return e;if(gi.call(e,"__wrapped__"))return Wa(e)}return new a(e)}function n(){}function a(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}function o(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function U(){}function ee(e,t){return ne(e,t)&&delete e[t]}function te(e,t){if(Qi){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return gi.call(e,t)?e[t]:void 0}function ne(e,t){return Qi?void 0!==e[t]:gi.call(e,t)}function ae(e,t,n){e[t]=Qi&&void 0===n?"__lodash_hash_undefined__":n}function oe(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}function ie(e){var t=-1,n=e?e.length:0;for(this.__data__=new oe;++t<n;)this.push(e[t])}function se(e,t){var n=e.__data__;if(Aa(t)){var a=n.__data__,o="string"==typeof t?a.string:a.hash;return"__lodash_hash_undefined__"===o[t]}return n.has(t)}function de(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var a=e[t];this.set(a[0],a[1])}}function re(e,t){var n=pe(e,t);if(0>n)return!1;var a=e.length-1;return n==a?e.pop():Oi.call(e,n,1),!0}function le(e,t){var n=pe(e,t);return 0>n?void 0:e[n][1]}function ce(e,t){return-1<pe(e,t)}function pe(e,t){for(var n=e.length;n--;)if(ho(e[n][0],t))return n;return-1}function ue(e,t,n){var a=pe(e,t);0>a?e.push([t,n]):e[a][1]=n}function me(e,t,n,a){return void 0===e||ho(e,ui[n])&&!gi.call(a,n)?t:e}function he(e,t,n){(void 0===n||ho(e[t],n))&&("number"!=typeof t||void 0!==n||t in e)||(e[t]=n)}function ge(e,t,n){var a=e[t];gi.call(e,t)&&ho(a,n)&&(void 0!==n||t in e)||(e[t]=n)}function fe(e,t,n,a){return ls(e,function(e,o,i){t(a,e,n(e),i)}),a}function be(e,t){return e&&Nn(t,qo(t),e)}function ve(e,t){for(var n=-1,a=t.length,o=Array(a);++n<a;)o[n]=null==e?void 0:Ho(e,t[n]);return o}function ye(e,t,n){return e===e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}function xe(e,t,n,a,o,i,s){var d;if(a&&(d=i?a(e,o,i,s):a(e)),void 0!==d)return d;if(!wo(e))return e;var r=ed(e);if(!r){var l=ya(e),p="[object Function]"==l||"[object GeneratorFunction]"==l;if(td(e))return Cn(e,t);if("[object Object]"==l||"[object Arguments]"==l||p&&!i){if(q(e))return i?e:{};if(d=wa(p?{}:e),!t)return $n(e,be(d,e))}else{if(!Dt[l])return i?e:{};d=ka(e,l,xe,t)}}else if(d=_a(e),!t)return Ln(e,d);s||(s=new de);var u=s.get(e);if(u)return u;if(s.set(e,d),!r)var m=n?ca(e):qo(e);return c(m||e,function(o,i){m&&(i=o,o=e[i]),ge(d,i,xe(o,t,n,a,i,e,s))}),d}function Te(e){var t=qo(e),n=t.length;return function(a){if(null==a)return!n;for(var o=n;o--;){var i=t[o],s=e[i],d=a[i];if(void 0===d&&!(i in Object(a))||!s(d))return!1}return!0}}function _e(e){return wo(e)?Pi(e):{}}function we(e,t,n){if("function"!=typeof e)throw new ci("Expected a function");return Ai(function(){e.apply(void 0,n)},t)}function ke(e,t,n,a){var o=-1,i=h,s=!0,d=e.length,r=[],l=t.length;if(!d)return r;n&&(t=f(t,O(n))),a?(i=g,s=!1):200<=t.length&&(i=se,s=!1,t=new ie(t));outer:for(;++o<d;){var c=e[o],p=n?n(c):c;if(c=a||0!==c?c:0,s&&p===p){for(var u=l;u--;)if(t[u]===p)continue outer;r.push(c)}else i(t,p,a)||r.push(c)}return r}function nt(e,t){var n=!0;return ls(e,function(e,a,o){return n=!!t(e,a,o),n}),n}function ot(e,t,n){for(var a=-1,o=e.length;++a<o;){var i=e[a],s=t(i);if(null!=s&&(void 0===d?s===s&&!Oo(s):n(s,d)))var d=s,r=i}return r}function it(e,t,n,a){var o=e.length;for(n=Uo(n),0>n&&(n=-n>o?0:o+n),a=void 0===a||a>o?o:Uo(a),0>a&&(a+=o),a=n>a?0:Lo(a);n<a;)e[n++]=t;return e}function st(e,t){var n=[];return ls(e,function(e,a,o){t(e,a,o)&&n.push(e)}),n}function dt(e,t,n,a,o){var i=-1,s=e.length;for(n||(n=Ea),o||(o=[]);++i<s;){var d=e[i];0<t&&n(d)?1<t?dt(d,t-1,n,a,o):b(o,d):!a&&(o[o.length]=d)}return o}function rt(e,t){return e&&ps(e,t,qo)}function ct(e,t){return e&&us(e,t,qo)}function pt(e,t){return m(t,function(t){return xo(e[t])})}function ut(e,t){t=Ma(t,e)?[t]:wn(t);for(var n=0,a=t.length;null!=e&&n<a;)e=e[Da(t[n++])];return n&&n==a?e:void 0}function mt(e,t,n){var a=t(e);return ed(e)?a:b(a,n(e))}function ht(e,t){return e>t}function ft(e,t){return gi.call(e,t)||"object"==typeof e&&t in e&&null===ba(e)}function bt(e,t){return t in Object(e)}function vt(e,t,n){return e>=Di(t,n)&&e<$i(t,n)}function yt(e,t,n){for(var a=n?g:h,o=e[0].length,i=e.length,s=i,d=Array(i),r=1/0,l=[],c;s--;)c=e[s],s&&t&&(c=f(c,O(t))),r=Di(c.length,r),d[s]=!n&&(t||120<=o&&120<=c.length)?new ie(s&&c):void 0;c=e[0];var p=-1,u=d[0];outer:for(;++p<o&&l.length<r;){var m=c[p],b=t?t(m):m;if(m=n||0!==m?m:0,u?!se(u,b):!a(l,b,n)){for(s=i;--s;){var v=d[s];if(v?!se(v,b):!a(e[s],b,n))continue outer}u&&u.push(b),l.push(m)}}return l}function xt(e,t,n,a){return rt(e,function(e,o,i){t(a,n(e),o,i)}),a}function Tt(e,t,n){Ma(t,e)||(t=wn(t),e=Na(e,t),t=za(t));var a=null==e?e:e[Da(t)];return null==a?void 0:d(a,e,n)}function _t(e,t,n,a,o){return e===t||(null!=e&&null!=t&&(wo(e)||ko(t))?wt(e,t,_t,n,a,o):e!==e&&t!==t)}function wt(e,t,n,a,o,i){var s=ed(e),d=ed(t),r="[object Array]",l="[object Array]";s||(r=ya(e),r="[object Arguments]"==r?"[object Object]":r),d||(l=ya(t),l="[object Arguments]"==l?"[object Object]":l);var c="[object Object]"==r&&!q(e),p="[object Object]"==l&&!q(t),u=r==l;if(u&&!c)return i||(i=new de),s||jo(e)?da(e,t,n,a,o,i):ra(e,t,r,n,a,o,i);if(!(2&o)){var m=c&&gi.call(e,"__wrapped__"),h=p&&gi.call(t,"__wrapped__");if(m||h){var g=m?e.value():e,f=h?t.value():t;return i||(i=new de),n(g,f,a,o,i)}}return!!u&&(i||(i=new de),la(e,t,n,a,o,i))}function kt(e,t,n,a){var o=n.length,i=o,s=!a;if(null==e)return!i;for(e=Object(e);o--;){var d=n[o];if(s&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return!1}for(;++o<i;){d=n[o];var r=d[0],l=e[r],c=d[1];if(!(s&&d[2])){var p=new de;if(a)var u=a(l,c,r,e,t,p);if(void 0===u?!_t(c,l,a,3,p):!u)return!1}else if(void 0===l&&!(r in e))return!1}return!0}function Ct(e){return"function"==typeof e?e:null==e?ei:"object"==typeof e?ed(e)?jt(e[0],e[1]):Mt(e):oi(e)}function Et(e){return Ni(Object(e))}function St(e){e=null==e?e:Object(e);var t=[];for(var n in e)t.push(n);return t}function It(e,t){return e<t}function Pt(e,t){var n=-1,a=fo(e)?Array(e.length):[];return ls(e,function(e,o,i){a[++n]=t(e,o,i)}),a}function Mt(e){var t=ha(e);return 1==t.length&&t[0][2]?Ba(t[0][0],t[0][1]):function(n){return n===e||kt(n,e,t)}}function jt(e,t){return Ma(e)&&Ra(t)?Ba(Da(e),t):function(n){var a=Ho(n,e);return void 0===a&&a===t?Wo(n,e):_t(t,a,void 0,3)}}function Ht(e,t,n,a,o){if(e!==t){if(!(ed(t)||jo(t)))var i=Fo(t);c(i||t,function(s,d){if(i&&(d=s,s=t[d]),wo(s))o||(o=new de),Wt(e,t,d,n,Ht,a,o);else{var r=a?a(e[d],s,d+"",e,t,o):void 0;void 0===r&&(r=s),he(e,d,r)}})}}function Wt(e,t,n,a,o,i,s){var d=e[n],r=t[n],l=s.get(r);if(l)return void he(e,n,l);var c=i?i(d,r,n+"",e,t,s):void 0,p=void 0===c;p&&(c=r,ed(r)||jo(r)?ed(d)?c=d:bo(d)?c=Ln(d):(p=!1,c=xe(r,!0)):Io(r)||go(r)?go(d)?c=$o(d):!wo(d)||a&&xo(d)?(p=!1,c=xe(r,!0)):c=d:p=!1),s.set(r,c),p&&o(c,r,a,i,s),s["delete"](r),he(e,n,c)}function qt(e,t){var a=e.length;if(a)return t+=0>t?a:0,Ia(t,a)?e[t]:void 0}function Ft(e,t,n){var a=-1;t=f(t.length?t:[ei],O(ma()));var o=Pt(e,function(e){var n=f(t,function(t){return t(e)});return{criteria:n,index:++a,value:e}});return I(o,function(e,t){return Rn(e,t,n)})}function Vt(e,t){return e=Object(e),v(t,function(t,n){return n in e&&(t[n]=e[n]),t},{})}function Yt(e,t){for(var n=-1,a=pa(e),o=a.length,i={};++n<o;){var s=a[n],d=e[s];t(d,s)&&(i[s]=d)}return i}function Zt(e){return function(t){return null==t?void 0:t[e]}}function Qt(e){return function(t){return ut(t,e)}}function Jt(e,t,n,a){var o=a?C:k,i=-1,s=t.length,d=e;for(n&&(d=f(e,O(n)));++i<s;)for(var r=0,l=t[i],c=n?n(l):l;-1<(r=o(d,c,r,a));)d!==e&&Oi.call(d,r,1),Oi.call(e,r,1);return e}function Kt(e,t){for(var n=e?t.length:0,a=n-1,o;n--;)if(o=t[n],n==a||o!==i){var i=o;if(Ia(o))Oi.call(e,o,1);else if(!Ma(o,e)){var s=wn(o),d=Na(e,s);null!=d&&delete d[Da(za(s))]}else delete e[Da(o)]}return e}function en(e,t){return e+Ri(Wi()*(t-e+1))}function an(e,t,n,a){for(var o=-1,i=$i(ji((t-e)/(n||1)),0),s=Array(i);i--;)s[a?i:++o]=e,e+=n;return s}function on(e,t){var a="";if(!e||1>t||9007199254740991<t)return a;do t%2&&(a+=e),t=Ri(t/2),t&&(e+=e);while(t);return a}function sn(e,t,n,a){t=Ma(t,e)?[t]:wn(t);for(var o=-1,i=t.length,s=e,d;null!=s&&++o<i;){if(d=Da(t[o]),wo(s)){var r=n;if(o!=i-1){var l=s[d];r=a?a(l,d,s):void 0,void 0===r&&(r=null==l?Ia(t[o+1])?[]:{}:l)}ge(s,d,r)}s=s[d]}return e}function dn(e,t,n){var a=-1,o=e.length;0>t&&(t=-t>o?0:o+t),n=n>o?o:n,0>n&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(o);++a<o;)i[a]=e[a+t];return i}function rn(e,t){var n;return ls(e,function(e,a,o){return n=t(e,a,o),!n}),!!n}function ln(e,t,n){var a=0,o=e?e.length:a;if("number"==typeof t&&t===t&&2147483647>=o){for(;a<o;){var i=a+o>>>1,s=e[i];null!==s&&!Oo(s)&&(n?s<=t:s<t)?a=i+1:o=i}return o}return cn(e,t,ei,n)}function cn(e,t,n,a){t=n(t);for(var o=0,i=e?e.length:0,s=t!==t,d=null===t,r=Oo(t),l=void 0===t;o<i;){var c=Ri((o+i)/2),p=n(e[c]),u=void 0!==p,m=null===p,h=p===p,g=Oo(p);if(s)var f=a||h;else f=l?h&&(a||u):d?h&&u&&(a||!m):r?h&&u&&!m&&(a||!g):!(m||g)&&(a?p<=t:p<t);f?o=c+1:i=c}return Di(i,4294967294)}function pn(e,t){for(var n=-1,a=e.length,o=0,i=[];++n<a;){var s=e[n],d=t?t(s):s;if(!n||!ho(d,r)){var r=d;i[o++]=0===s?0:s}}return i}function un(e){return"number"==typeof e?e:Oo(e)?K:+e}function mn(e){if("string"==typeof e)return e;if(Oo(e))return rs?rs.call(e):"";var t=e+"";return"0"==t&&1/e==-J?"-0":t}function hn(e,t,n){var a=-1,o=h,i=e.length,s=!0,d=[],r=d;if(n)s=!1,o=g;else if(200<=i){var l=t?null:hs(e);if(l)return G(l);s=!1,o=se,r=new ie}else r=t?[]:d;outer:for(;++a<i;){var c=e[a],p=t?t(c):c;if(c=n||0!==c?c:0,s&&p===p){for(var u=r.length;u--;)if(r[u]===p)continue outer;t&&r.push(p),d.push(c)}else o(r,p,n)||(r!==d&&r.push(p),d.push(c))}return d}function gn(e,t){t=Ma(t,e)?[t]:wn(t),e=Na(e,t);var n=Da(za(t));return!(null!=e&&ft(e,n))||delete e[n]}function fn(e,t,n,a){return sn(e,t,n(ut(e,t)),a)}function bn(e,t,n,a){for(var o=e.length,i=a?o:-1;(a?i--:++i<o)&&t(e[i],i,e););return n?dn(e,a?0:i,a?i+1:o):dn(e,a?i+1:0,a?o:i)}function vn(e,t){var n=e;return n instanceof o&&(n=n.value()),v(t,function(e,t){return t.func.apply(t.thisArg,b([e],t.args))},n)}function yn(e,t,n){for(var a=-1,o=e.length,i;++a<o;)i=i?b(ke(i,e[a],t,n),ke(e[a],i,t,n)):e[a];return i&&i.length?hn(i,t,n):[]}function xn(e,t,n){for(var a=-1,o=e.length,i=t.length,s={},d;++a<o;)d=a<i?t[a]:void 0,n(s,e[a],d);return s}function Tn(e){return bo(e)?e:[]}function _n(e){return"function"==typeof e?e:ei}function wn(e){return ed(e)?e:ys(e)}function kn(e,t,n){var a=e.length;return n=void 0===n?a:n,!t&&n>=a?e:dn(e,t,n)}function Cn(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}function En(e){var t=new e.constructor(e.byteLength);return new ki(t).set(new ki(e)),t}function Sn(e,t){var n=t?En(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function In(e,t,n){var a=t?n(V(e),!0):V(e);return v(a,i,new e.constructor)}function Pn(e){var t=new e.constructor(e.source,ze.exec(e));return t.lastIndex=e.lastIndex,t}function Mn(e,t,n){var a=t?n(G(e),!0):G(e);return v(a,s,new e.constructor)}function An(e){return ds?Object(ds.call(e)):{}}function On(e,t){var n=t?En(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function jn(e,t){if(e!==t){var n=void 0!==e,a=null===e,o=e===e,i=Oo(e),s=void 0!==t,d=null===t,r=t===t,l=Oo(t);if(!d&&!l&&!i&&e>t||i&&s&&r&&!d&&!l||a&&s&&r||!n&&r||!o)return 1;if(!a&&!i&&!l&&e<t||l&&n&&o&&!a&&!i||d&&n&&o||!s&&o||!r)return-1}return 0}function Rn(e,t,n){for(var a=-1,o=e.criteria,i=t.criteria,s=o.length,d=n.length,r;++a<s;)if(r=jn(o[a],i[a]),r){if(a>=d)return r;var l=n[a];return r*("desc"==l?-1:1)}return e.index-t.index}function Bn(e,t,n,a){for(var o=-1,i=e.length,s=n.length,d=-1,r=t.length,l=$i(i-s,0),c=Array(r+l),p=!a;++d<r;)c[d]=t[d];for(;++o<s;)(p||o<i)&&(c[n[o]]=e[o]);for(;l--;)c[d++]=e[o++];return c}function Un(e,t,n,a){for(var o=-1,i=e.length,s=-1,d=n.length,r=-1,l=t.length,c=$i(i-d,0),p=Array(c+l),u=!a;++o<c;)p[o]=e[o];for(var m=o;++r<l;)p[m+r]=t[r];for(;++s<d;)(u||o<i)&&(p[m+n[s]]=e[o++]);return p}function Ln(e,t){var n=-1,a=e.length;for(t||(t=Array(a));++n<a;)t[n]=e[n];return t}function Nn(e,t,n,a){n||(n={});for(var o=-1,i=t.length;++o<i;){var s=t[o],d=a?a(n[s],e[s],s,n,e):e[s];ge(n,s,d)}return n}function $n(e,t){return Nn(e,va(e),t)}function Dn(e,t){return function(n,a){var o=ed(n)?r:fe,i=t?t():{};return o(n,e,ma(a),i)}}function Hn(e){return po(function(t,n){var a=-1,o=n.length,i=1<o?n[o-1]:void 0,s=2<o?n[2]:void 0;for(i="function"==typeof i?(o--,i):void 0,s&&Pa(n[0],n[1],s)&&(i=3>o?void 0:i,o=1),t=Object(t);++a<o;){var d=n[a];d&&e(t,d,a,i)}return t})}function Wn(e,t){return function(n,a){if(null==n)return n;if(!fo(n))return e(n,a);for(var o=n.length,i=t?o:-1,s=Object(n);(t?i--:++i<o)&&!1!==a(s[i],i,s););return n}}function qn(e){return function(t,n,a){for(var o=-1,i=Object(t),s=a(t),d=s.length,r;d--&&(r=s[e?d:++o],!1!==n(i[r],r,i)););return t}}function Fn(e,t,n){function a(){var t=this&&this!==tn&&this instanceof a?i:e;return t.apply(o?n:this,arguments)}var o=1&t,i=Gn(e);return a}function Vn(e){return function(t){t=Do(t);var n=Bt.test(t)?Z(t):void 0,a=n?n[0]:t.charAt(0),o=n?kn(n,1).join(""):t.slice(1);return a[e]()+o}}function zn(e){return function(t){return v(Jo(Zo(t).replace(At,"")),e,"")}}function Gn(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6]);}var n=_e(e.prototype),a=e.apply(n,t);return wo(a)?a:n}}function Yn(e,t,n){function a(){for(var i=arguments.length,s=Array(i),r=i,l=fa(a);r--;)s[r]=arguments[r];var c=3>i&&s[0]!==l&&s[i-1]!==l?[]:z(s,l);if(i-=c.length,i<n)return oa(e,t,Xn,a.placeholder,void 0,s,c,void 0,void 0,n-i);var p=this&&this!==tn&&this instanceof a?o:e;return d(p,this,s)}var o=Gn(e);return a}function Zn(e){return po(function(t){t=dt(t,1);var n=t.length,o=n,i=a.prototype.thru;for(e&&t.reverse();o--;){var s=t[o];if("function"!=typeof s)throw new ci("Expected a function");if(i&&!d&&"wrapper"==ua(s))var d=new a([],!0)}for(o=d?o:n;++o<n;){s=t[o];var r=ua(s),l="wrapper"==r?gs(s):void 0;d=l&&Oa(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?d[ua(l[0])].apply(d,l[3]):1==s.length&&Oa(s)?d[r]():d.thru(s)}return function(){var e=arguments,a=e[0];if(d&&1==e.length&&ed(a)&&200<=a.length)return d.plant(a).value();for(var o=0,i=n?t[o].apply(this,e):a;++o<n;)i=t[o].call(this,i);return i}})}function Xn(e,t,n,a,o,i,s,d,r,l){function c(){for(var b=arguments.length,v=b,y=Array(b);v--;)y[v]=arguments[v];if(h)var x=fa(c),T=L(y,x);if(a&&(y=Bn(y,a,o,h)),i&&(y=Un(y,i,s,h)),b-=T,h&&b<l){var w=z(y,x);return oa(e,t,Xn,c.placeholder,n,y,w,d,r,l-b)}var k=u?n:this,C=m?k[e]:e;return b=y.length,d?y=$a(y,d):g&&1<b&&y.reverse(),p&&r<b&&(y.length=r),this&&this!==tn&&this instanceof c&&(C=f||Gn(C)),C.apply(k,y)}var p=128&t,u=1&t,m=2&t,h=24&t,g=512&t,f=m?void 0:Gn(e);return c}function Qn(e,t){return function(n,a){return xt(n,e,t(a),{})}}function Jn(e){return function(t,n){var a;if(void 0===t&&void 0===n)return 0;if(void 0!==t&&(a=t),void 0!==n){if(void 0===a)return n;"string"==typeof t||"string"==typeof n?(t=mn(t),n=mn(n)):(t=un(t),n=un(n)),a=e(t,n)}return a}}function Kn(e){return po(function(t){return t=1==t.length&&ed(t[0])?f(t[0],O(ma())):f(dt(t,1,Sa),O(ma())),po(function(n){var a=this;return e(t,function(e){return d(e,a,n)})})})}function ea(e,t){t=void 0===t?" ":mn(t);var n=t.length;if(2>n)return n?on(t,e):t;var a=on(t,ji(e/Y(t)));return Bt.test(t)?kn(Z(a),0,e).join(""):a.slice(0,e)}function ta(e,t,n,a){function o(){for(var t=-1,r=arguments.length,l=-1,c=a.length,p=Array(c+r),u=this&&this!==tn&&this instanceof o?s:e;++l<c;)p[l]=a[l];for(;r--;)p[l++]=arguments[++t];return d(u,i?n:this,p)}var i=1&t,s=Gn(e);return o}function na(e){return function(t,n,a){return a&&"number"!=typeof a&&Pa(t,n,a)&&(n=a=void 0),t=No(t),t=t===t?t:0,void 0===n?(n=t,t=0):n=No(n)||0,a=void 0===a?t<n?1:-1:No(a)||0,an(t,n,a,e)}}function aa(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=No(t),n=No(n)),e(t,n)}}function oa(e,t,n,a,o,i,s,d,r,l){var c=8&t,p=c?s:void 0,u=c?void 0:s,m=c?i:void 0,h=c?void 0:i;t|=c?32:64,t&=~(c?64:32),4&t||(t&=-4);var g=[e,t,o,m,p,h,u,d,r,l],f=n.apply(void 0,g);return Oa(e)&&vs(f,g),f.placeholder=a,f}function ia(e){var t=ri[e];return function(e,n){if(e=No(e),n=Uo(n),n){var a=(Do(e)+"e").split("e"),o=t(a[0]+"e"+(+a[1]+n));return a=(Do(o)+"e").split("e"),+(a[0]+"e"+(+a[1]-n))}return t(e)}}function sa(e,t,n,a,o,i,s,d){var r=2&t;if(!r&&"function"!=typeof e)throw new ci("Expected a function");var l=a?a.length:0;if(l||(t&=-97,a=o=void 0),s=void 0===s?s:$i(Uo(s),0),d=void 0===d?d:Uo(d),l-=o?o.length:0,64&t){var c=a,p=o;a=o=void 0}var u=r?void 0:gs(e),m=[e,t,n,a,o,c,p,i,s,d];if(u&&Ua(m,u),e=m[0],t=m[1],n=m[2],a=m[3],o=m[4],d=m[9]=null==m[9]?r?0:e.length:$i(m[9]-l,0),!d&&24&t&&(t&=-25),!t||1==t)var h=Fn(e,t,n);else h=8==t||16==t?Yn(e,t,d):32!=t&&33!=t||o.length?Xn.apply(void 0,m):ta(e,t,n,a);var g=u?ms:vs;return g(h,m)}function da(e,t,n,a,o,i){var s=-1,d=2&o,r=e.length,l=t.length;if(r!=l&&!(d&&l>r))return!1;var c=i.get(e);if(c)return c==t;var p=!0;for(i.set(e,t);++s<r;){var u=e[s],m=t[s];if(a)var h=d?a(m,u,s,t,e,i):a(u,m,s,e,t,i);if(void 0!==h){if(h)continue;p=!1;break}if(1&o){if(!x(t,function(e){return u===e||n(u,e,a,o,i)})){p=!1;break}}else if(!(u===m||n(u,m,a,o,i))){p=!1;break}}return i["delete"](e),p}function ra(e,t,n,a,o,i,s){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!!(e.byteLength==t.byteLength&&a(new ki(e),new ki(t)));case"[object Boolean]":case"[object Date]":return+e==+t;case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object Number]":return e==+e?e==+t:t!=+t;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var d=V;case"[object Set]":var r=2&i;if(d||(d=G),e.size!=t.size&&!r)return!1;var l=s.get(e);return l?l==t:(i|=1,s.set(e,t),da(d(e),d(t),a,o,i,s));case"[object Symbol]":if(ds)return ds.call(e)==ds.call(t);}return!1}function la(e,t,n,a,o,i){var s=2&o,d=qo(e),r=d.length,l=qo(t),c=l.length;if(r!=c&&!s)return!1;for(var p=r,u;p--;)if(u=d[p],s?!(u in t):!ft(t,u))return!1;var m=i.get(e);if(m)return m==t;var h=!0;i.set(e,t);for(var g=s;++p<r;){u=d[p];var f=e[u],b=t[u];if(a)var v=s?a(b,f,u,t,e,i):a(f,b,u,e,t,i);if(void 0===v?!(f===b||n(f,b,a,o,i)):!v){h=!1;break}g||(g="constructor"==u)}if(h&&!g){var y=e.constructor,x=t.constructor;y!=x&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof x&&x instanceof x)&&(h=!1)}return i["delete"](e),h}function ca(e){return mt(e,qo,va)}function pa(e){return mt(e,Fo,bs)}function ua(e){for(var t=e.name+"",n=es[t],a=gi.call(es,t)?n.length:0;a--;){var o=n[a],i=o.func;if(null==i||i==e)return o.name}return t}function ma(){var e=t.iteratee||ti;return e=e===ti?Ct:e,arguments.length?e(arguments[0],arguments[1]):e}function ha(e){for(var t=Vo(e),n=t.length;n--;)t[n][2]=Ra(t[n][1]);return t}function ga(e,t){var n=e[t];return Eo(n)?n:void 0}function fa(e){var n=gi.call(t,"placeholder")?t:e;return n.placeholder}function ba(e){return Bi(Object(e))}function va(e){return Si(Object(e))}function ya(e){return vi.call(e)}function xa(e,t,n){for(var a=-1,o=n.length;++a<o;){var i=n[a],s=i.size;switch(i.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=Di(t,e+s);break;case"takeRight":e=$i(e,t-s);}}return{start:e,end:t}}function Ta(e,t,n){t=Ma(t,e)?[t]:wn(t);for(var a=-1,o=t.length,i,s;++a<o&&(s=Da(t[a]),!!(i=null!=e&&n(e,s)));)e=e[s];if(i)return i;var o=e?e.length:0;return!!o&&_o(o)&&Ia(s,o)&&(ed(e)||Ao(e)||go(e))}function _a(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&gi.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function wa(e){return"function"!=typeof e.constructor||ja(e)?{}:_e(ba(e))}function ka(e,t,n,a){var o=e.constructor;return"[object ArrayBuffer]"===t?En(e):"[object Boolean]"===t||"[object Date]"===t?new o(+e):"[object DataView]"===t?Sn(e,a):"[object Float32Array]"===t||"[object Float64Array]"===t||"[object Int8Array]"===t||"[object Int16Array]"===t||"[object Int32Array]"===t||"[object Uint8Array]"===t||"[object Uint8ClampedArray]"===t||"[object Uint16Array]"===t||"[object Uint32Array]"===t?On(e,a):"[object Map]"===t?In(e,a,n):"[object Number]"===t||"[object String]"===t?new o(e):"[object RegExp]"===t?Pn(e):"[object Set]"===t?Mn(e,a,n):"[object Symbol]"===t?An(e):void 0}function Ca(e){var t=e?e.length:void 0;return _o(t)&&(ed(e)||Ao(e)||go(e))?M(t,String):null}function Ea(e){return bo(e)&&(ed(e)||go(e))}function Sa(e){return ed(e)&&(2!=e.length||xo(e[0]))}function Ia(e,t){return t=null==t?9007199254740991:t,!!t&&("number"==typeof e||Je.test(e))&&-1<e&&0==e%1&&e<t}function Pa(e,t,n){if(!wo(n))return!1;var a=typeof t;return("number"==a?!!(fo(n)&&Ia(t,n.length)):!!("string"==a&&t in n))&&ho(n[t],e)}function Ma(e,t){if(ed(e))return!1;var n=typeof e;return!!("number"==n||"symbol"==n||"boolean"==n||null==e||Oo(e))||Ue.test(e)||!Be.test(e)||null!=t&&e in Object(t)}function Aa(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function Oa(e){var n=ua(e),a=t[n];if("function"!=typeof a||!(n in o.prototype))return!1;if(e===a)return!0;var i=gs(a);return!!i&&e===i[0]}function ja(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||ui;return e===n}function Ra(e){return e===e&&!wo(e)}function Ba(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}function Ua(e,t){var n=e[1],a=t[1],o=n|a,i=131>o,s=128==a&&8==n||128==a&&256==n&&e[7].length<=t[8]||384==a&&t[7].length<=t[8]&&8==n;if(!(i||s))return e;1&a&&(e[2]=t[2],o|=1&n?0:4);var d=t[3];if(d){var r=e[3];e[3]=r?Bn(r,d,t[4]):d,e[4]=r?z(e[3],"__lodash_placeholder__"):t[4]}return d=t[5],d&&(r=e[5],e[5]=r?Un(r,d,t[6]):d,e[6]=r?z(e[5],"__lodash_placeholder__"):t[6]),d=t[7],d&&(e[7]=d),128&a&&(e[8]=null==e[8]?t[8]:Di(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=o,e}function La(e,t,n,a,o,i){return wo(e)&&wo(t)&&Ht(e,t,void 0,La,i.set(t,e)),e}function Na(e,t){return 1==t.length?e:ut(e,dn(t,0,-1))}function $a(e,t){for(var n=e.length,a=Di(t.length,n),o=Ln(e),i;a--;)i=t[a],e[a]=Ia(i,n)?o[i]:void 0;return e}function Da(e){if("string"==typeof e||Oo(e))return e;var t=e+"";return"0"==t&&1/e==-J?"-0":t}function Ha(e){if(null!=e){try{return hi.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Wa(e){if(e instanceof o)return e.clone();var t=new a(e.__wrapped__,e.__chain__);return t.__actions__=Ln(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function qa(e,t,a){var o=e?e.length:0;return o?(t=a||void 0===t?1:Uo(t),dn(e,0>t?0:t,o)):[]}function Fa(e,t,a){var o=e?e.length:0;return o?(t=a||void 0===t?1:Uo(t),t=o-t,dn(e,0,0>t?0:t)):[]}function Va(e){return e&&e.length?e[0]:void 0}function za(e){var t=e?e.length:0;return t?e[t-1]:void 0}function Ga(e,t){return e&&e.length&&t&&t.length?Jt(e,t):e}function Ya(e){return e?Fi.call(e):e}function Za(e){if(!(e&&e.length))return[];var t=0;return e=m(e,function(e){if(bo(e))return t=$i(e.length,t),!0}),M(t,function(t){return f(e,Zt(t))})}function Xa(e,t){if(!(e&&e.length))return[];var n=Za(e);return null==t?n:f(n,function(e){return d(t,void 0,e)})}function Qa(e){var n=t(e);return n.__chain__=!0,n}function Ja(e,t){return t(e)}function Ka(e,t){return"function"==typeof t&&ed(e)?c(e,t):ls(e,ma(t))}function eo(e,t){return"function"==typeof t&&ed(e)?p(e,t):cs(e,ma(t))}function to(e,t){var n=ed(e)?f:Pt;return n(e,ma(t,3))}function no(e,t,a){var o=-1,i=Bo(e),s=i.length;for(t=(a?Pa(e,t,a):void 0===t)?1:ye(Uo(t),0,s);++o<t;){var d=en(o,s-1),r=i[d];i[d]=i[o],i[o]=r}return i.length=t,i}function ao(e){if(null==e)return 0;if(fo(e)){var t=e.length;return t&&Ao(e)?Y(e):t}if(ko(e)){var n=ya(e);if("[object Map]"==n||"[object Set]"==n)return e.size}return qo(e).length}function oo(e,t,a){return t=a?void 0:t,t=e&&null==t?e.length:t,sa(e,128,void 0,void 0,void 0,void 0,t)}function io(e,t){var a;if("function"!=typeof t)throw new ci("Expected a function");return e=Uo(e),function(){return 0<--e&&(a=t.apply(this,arguments)),1>=e&&(t=void 0),a}}function so(e,t,n){t=n?void 0:t;var a=sa(e,8,void 0,void 0,void 0,void 0,void 0,t);return a.placeholder=so.placeholder,a}function ro(e,t,n){t=n?void 0:t;var a=sa(e,16,void 0,void 0,void 0,void 0,void 0,t);return a.placeholder=ro.placeholder,a}function lo(e,t,n){function a(t){var n=b,a=v;return b=v=void 0,m=t,x=e.apply(a,n),x}function o(e){return m=e,T=Ai(d,t),h?a(e):x}function i(e){var n=e-u,a=e-m,o=t-n;return g?Di(o,y-a):o}function s(e){var n=e-u,a=e-m;return!u||n>=t||0>n||g&&a>=y}function d(){var e=Fs();return s(e)?r(e):void(T=Ai(d,i(e)))}function r(e){return(Ci(T),T=void 0,f&&b)?a(e):(b=v=void 0,x)}function l(){void 0!==T&&Ci(T),u=m=0,b=v=T=void 0}function c(){return void 0===T?x:r(Fs())}function p(){var e=Fs(),n=s(e);if(b=arguments,v=this,u=e,n){if(void 0===T)return o(u);if(g)return Ci(T),T=Ai(d,t),a(u)}return void 0===T&&(T=Ai(d,t)),x}var u=0,m=0,h=!1,g=!1,f=!0,b,v,y,x,T;if("function"!=typeof e)throw new ci("Expected a function");return t=No(t)||0,wo(n)&&(h=!!n.leading,g="maxWait"in n,y=g?$i(No(n.maxWait)||0,t):y,f="trailing"in n?!!n.trailing:f),p.cancel=l,p.flush=c,p}function co(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new ci("Expected a function");var n=function(){var a=arguments,o=t?t.apply(this,a):a[0],i=n.cache;if(i.has(o))return i.get(o);var s=e.apply(this,a);return n.cache=i.set(o,s),s};return n.cache=new(co.Cache||oe),n}function po(e,t){if("function"!=typeof e)throw new ci("Expected a function");return t=$i(void 0===t?e.length-1:Uo(t),0),function(){for(var n=arguments,a=-1,o=$i(n.length-t,0),i=Array(o);++a<o;)i[a]=n[t+a];switch(t){case 0:return e.call(this,i);case 1:return e.call(this,n[0],i);case 2:return e.call(this,n[0],n[1],i);}var s=Array(t+1);for(a=-1;++a<t;)s[a]=n[a];return s[t]=i,d(e,this,s)}}function uo(e,t,n){var a=!0,o=!0;if("function"!=typeof e)throw new ci("Expected a function");return wo(n)&&(a="leading"in n?!!n.leading:a,o="trailing"in n?!!n.trailing:o),lo(e,t,{leading:a,maxWait:t,trailing:o})}function mo(){if(!arguments.length)return[];var e=arguments[0];return ed(e)?e:[e]}function ho(e,t){return e===t||e!==e&&t!==t}function go(e){return bo(e)&&gi.call(e,"callee")&&(!Mi.call(e,"callee")||"[object Arguments]"==vi.call(e))}function fo(e){return null!=e&&_o(fs(e))&&!xo(e)}function bo(e){return ko(e)&&fo(e)}function vo(e){if(fo(e)&&(ed(e)||Ao(e)||xo(e.splice)||go(e)||td(e)))return!e.length;if(ko(e)){var t=ya(e);if("[object Map]"==t||"[object Set]"==t)return!e.size}for(var n in e)if(gi.call(e,n))return!1;return!(Ki&&qo(e).length)}function yo(e){return!!ko(e)&&("[object Error]"==vi.call(e)||"string"==typeof e.message&&"string"==typeof e.name)}function xo(e){var t=wo(e)?vi.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}function To(e){return"number"==typeof e&&e==Uo(e)}function _o(e){return"number"==typeof e&&-1<e&&0==e%1&&9007199254740991>=e}function wo(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function ko(e){return!!e&&"object"==typeof e}function Co(e){return ko(e)&&"[object Map]"==ya(e)}function Eo(e){if(!wo(e))return!1;var t=xo(e)||q(e)?xi:Xe;return t.test(Ha(e))}function So(e){return"number"==typeof e||ko(e)&&"[object Number]"==vi.call(e)}function Io(e){if(!ko(e)||"[object Object]"!=vi.call(e)||q(e))return!1;var t=ba(e);if(null===t)return!0;var n=gi.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&hi.call(n)==bi}function Po(e){return wo(e)&&"[object RegExp]"==vi.call(e)}function Mo(e){return ko(e)&&"[object Set]"==ya(e)}function Ao(e){return"string"==typeof e||!ed(e)&&ko(e)&&"[object String]"==vi.call(e)}function Oo(e){return"symbol"==typeof e||ko(e)&&"[object Symbol]"==vi.call(e)}function jo(e){return ko(e)&&_o(e.length)&&!!$t[vi.call(e)]}function Ro(e){return ko(e)&&"[object WeakMap]"==ya(e)}function Bo(e){if(!e)return[];if(fo(e))return Ao(e)?Z(e):Ln(e);if(Ii&&e[Ii])return F(e[Ii]());var t=ya(e),n="[object Map]"==t?V:"[object Set]"==t?G:Go;return n(e)}function Uo(e){if(!e)return 0===e?e:0;if(e=No(e),e===J||e===-J){var t=0>e?-1:1;return 1.7976931348623157e+308*t}var n=e%1;return e===e?n?e-n:e:0}function Lo(e){return e?ye(Uo(e),0,4294967295):0}function No(e){if("number"==typeof e)return e;if(Oo(e))return K;if(wo(e)){var t=xo(e.valueOf)?e.valueOf():e;e=wo(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(De,"");var n=Ze.test(e);return n||Qe.test(e)?Gt(e.slice(2),n?2:8):Ye.test(e)?K:+e}function $o(e){return Nn(e,Fo(e))}function Do(e){return null==e?"":mn(e)}function Ho(e,t,n){var a=null==e?void 0:ut(e,t);return void 0===a?n:a}function Wo(e,t){return null!=e&&Ta(e,t,bt)}function qo(e){var t=ja(e);if(!(t||fo(e)))return Et(e);var n=Ca(e),a=n||[],o=a.length;for(var i in e)!ft(e,i)||!!n&&("length"==i||Ia(i,o))||t&&"constructor"==i||a.push(i);return a}function Fo(e){for(var t=-1,n=ja(e),a=St(e),o=a.length,i=Ca(e),s=i||[],d=s.length,r;++t<o;)r=a[t],!!i&&("length"==r||Ia(r,d))||"constructor"==r&&(n||!gi.call(e,r))||s.push(r);return s}function Vo(e){return A(e,qo(e))}function zo(e){return A(e,Fo(e))}function Go(e){return e?j(e,qo(e)):[]}function Yo(e){return wd(Do(e).toLowerCase())}function Zo(e){return e=Do(e),e&&e.replace(Ke,N).replace(Ot,"")}function Xo(e,n,a){var o=t.templateSettings;a&&Pa(e,n,a)&&(n=void 0),e=Do(e),n=id({},n,o,me);var i=id({},n.imports,o.imports,me),s=qo(i),d=j(i,s),r=0,l=n.interpolate||et,c="__p += '",p=li((n.escape||et).source+"|"+l.source+"|"+(l===Re?Ve:et).source+"|"+(n.evaluate||et).source+"|$","g"),u="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++Nt+"]")+"\n",m,h;e.replace(p,function(t,n,a,o,i,s){return a||(a=o),c+=e.slice(r,s).replace(tt,H),n&&(m=!0,c+="' +\n__e("+n+") +\n'"),i&&(h=!0,c+="';\n"+i+";\n__p += '"),a&&(c+="' +\n((__t = ("+a+")) == null ? '' : __t) +\n'"),r=s+t.length,t}),c+="';\n";var g=n.variable;g||(c="with (obj) {\n"+c+"\n}\n"),c=(h?c.replace(Ce,""):c).replace(Ee,"$1").replace(Se,"$1;"),c="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(m?", __e = _.escape":"")+(h?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+c+"return __p\n}";var f=kd(function(){return Function(s,u+"return "+c).apply(void 0,d)});if(f.source=c,yo(f))throw f;return f}function Qo(e,t){var n=30,a="...";if(wo(t)){var o="separator"in t?t.separator:o;n="length"in t?Uo(t.length):n,a="omission"in t?mn(t.omission):a}e=Do(e);var i=e.length;if(Bt.test(e)){var s=Z(e);i=s.length}if(n>=i)return e;var d=n-Y(a);if(1>d)return a;var r=s?kn(s,0,d).join(""):e.slice(0,d);if(void 0===o)return r+a;if(s&&(d+=r.length-d),Po(o)){if(e.slice(d).search(o)){var l=r,c;for(o.global||(o=li(o.source,Do(ze.exec(o))+"g")),o.lastIndex=0;c=o.exec(l);)var p=c.index;r=r.slice(0,void 0===p?d:p)}}else if(e.indexOf(mn(o),d)!=d){var u=r.lastIndexOf(o);-1<u&&(r=r.slice(0,u))}return r+a}function Jo(e,t,n){return e=Do(e),t=n?void 0:t,void 0===t&&(t=Ut.test(e)?Rt:qe),e.match(t)||[]}function Ko(e){return function(){return e}}function ei(e){return e}function ti(e){return Ct("function"==typeof e?e:xe(e,!0))}function ni(e,t,n){var a=qo(t),o=pt(t,a);null!=n||wo(t)&&(o.length||!a.length)||(n=t,t=e,e=this,o=pt(t,qo(t)));var i=!(wo(n)&&"chain"in n)||!!n.chain,s=xo(e);return c(o,function(n){var a=t[n];e[n]=a,s&&(e.prototype[n]=function(){var t=this.__chain__;if(i||t){var n=e(this.__wrapped__),o=n.__actions__=Ln(this.__actions__);return o.push({func:a,args:arguments,thisArg:e}),n.__chain__=t,n}return a.apply(e,b([this.value()],arguments))})}),e}function ai(){}function oi(e){return Ma(e)?Zt(Da(e)):Qt(e)}function ii(e){var t=++fi;return Do(e)+t}e=e?nn.defaults({},e,nn.pick(tn,Lt)):tn;var si=e.Date,di=e.Error,ri=e.Math,li=e.RegExp,ci=e.TypeError,pi=e.Array.prototype,ui=e.Object.prototype,mi=e.String.prototype,hi=e.Function.prototype.toString,gi=ui.hasOwnProperty,fi=0,bi=hi.call(Object),vi=ui.toString,yi=tn._,xi=li("^"+hi.call(gi).replace(Ne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ti=Xt?e.Buffer:void 0,_i=e.Reflect,wi=e.Symbol,ki=e.Uint8Array,Ci=e.clearTimeout,Ei=_i?_i.enumerate:void 0,Si=Object.getOwnPropertySymbols,Ii="symbol"==typeof(Ii=wi&&wi.iterator)?Ii:void 0,Pi=Object.create,Mi=ui.propertyIsEnumerable,Ai=e.setTimeout,Oi=pi.splice,ji=ri.ceil,Ri=ri.floor,Bi=Object.getPrototypeOf,Ui=e.isFinite,Li=pi.join,Ni=Object.keys,$i=ri.max,Di=ri.min,Hi=e.parseInt,Wi=ri.random,qi=mi.replace,Fi=pi.reverse,Vi=mi.split,zi=ga(e,"DataView"),Gi=ga(e,"Map"),Yi=ga(e,"Promise"),Zi=ga(e,"Set"),Xi=ga(e,"WeakMap"),Qi=ga(Object,"create"),Ji=Xi&&new Xi,Ki=!Mi.call({valueOf:1},"valueOf"),es={},ts=Ha(zi),ns=Ha(Gi),as=Ha(Yi),os=Ha(Zi),is=Ha(Xi),ss=wi?wi.prototype:void 0,ds=ss?ss.valueOf:void 0,rs=ss?ss.toString:void 0;t.templateSettings={escape:Oe,evaluate:je,interpolate:Re,variable:"",imports:{_:t}},t.prototype=n.prototype,t.prototype.constructor=t,a.prototype=_e(n.prototype),a.prototype.constructor=a,o.prototype=_e(n.prototype),o.prototype.constructor=o,U.prototype=Qi?Qi(null):ui,oe.prototype.clear=function(){this.__data__={hash:new U,map:Gi?new Gi:[],string:new U}},oe.prototype["delete"]=function(e){var t=this.__data__;return Aa(e)?ee("string"==typeof e?t.string:t.hash,e):Gi?t.map["delete"](e):re(t.map,e)},oe.prototype.get=function(e){var t=this.__data__;return Aa(e)?te("string"==typeof e?t.string:t.hash,e):Gi?t.map.get(e):le(t.map,e)},oe.prototype.has=function(e){var t=this.__data__;return Aa(e)?ne("string"==typeof e?t.string:t.hash,e):Gi?t.map.has(e):ce(t.map,e)},oe.prototype.set=function(e,t){var n=this.__data__;return Aa(e)?ae("string"==typeof e?n.string:n.hash,e,t):Gi?n.map.set(e,t):ue(n.map,e,t),this},ie.prototype.push=function(e){var t=this.__data__;if(Aa(e)){var n=t.__data__,a="string"==typeof e?n.string:n.hash;a[e]="__lodash_hash_undefined__"}else t.set(e,"__lodash_hash_undefined__")},de.prototype.clear=function(){this.__data__={array:[],map:null}},de.prototype["delete"]=function(e){var t=this.__data__,n=t.array;return n?re(n,e):t.map["delete"](e)},de.prototype.get=function(e){var t=this.__data__,n=t.array;return n?le(n,e):t.map.get(e)},de.prototype.has=function(e){var t=this.__data__,n=t.array;return n?ce(n,e):t.map.has(e)},de.prototype.set=function(e,t){var n=this.__data__,a=n.array;a&&(199>a.length?ue(a,e,t):(n.array=null,n.map=new oe(a)));var o=n.map;return o&&o.set(e,t),this};var ls=Wn(rt),cs=Wn(ct,!0),ps=qn(),us=qn(!0);Ei&&!Mi.call({valueOf:1},"valueOf")&&(St=function(e){return F(Ei(e))});var ms=Ji?function(e,t){return Ji.set(e,t),e}:ei,hs=Zi&&1/G(new Zi([,-0]))[1]==J?function(e){return new Zi(e)}:ai,gs=Ji?function(e){return Ji.get(e)}:ai,fs=Zt("length");Si||(va=function(){return[]});var bs=Si?function(e){for(var t=[];e;)b(t,va(e)),e=ba(e);return t}:va;(zi&&"[object DataView]"!=ya(new zi(new ArrayBuffer(1)))||Gi&&"[object Map]"!=ya(new Gi)||Yi&&"[object Promise]"!=ya(Yi.resolve())||Zi&&"[object Set]"!=ya(new Zi)||Xi&&"[object WeakMap]"!=ya(new Xi))&&(ya=function(e){var t=vi.call(e),n="[object Object]"==t?e.constructor:void 0,a=n?Ha(n):void 0;if(a)switch(a){case ts:return"[object DataView]";case ns:return"[object Map]";case as:return"[object Promise]";case os:return"[object Set]";case is:return"[object WeakMap]";}return t});var vs=function(){var e=0,t=0;return function(n,a){var o=Fs(),i=16-(o-t);if(t=o,!(0<i))e=0;else if(150<=++e)return n;return ms(n,a)}}(),ys=co(function(e){var t=[];return Do(e).replace(Le,function(e,n,a,o){t.push(a?o.replace(Fe,"$1"):n||e)}),t}),xs=po(function(e,t){return bo(e)?ke(e,dt(t,1,bo,!0)):[]}),Ts=po(function(e,t){var n=za(t);return bo(n)&&(n=void 0),bo(e)?ke(e,dt(t,1,bo,!0),ma(n)):[]}),_s=po(function(e,t){var n=za(t);return bo(n)&&(n=void 0),bo(e)?ke(e,dt(t,1,bo,!0),void 0,n):[]}),ws=po(function(e){var t=f(e,Tn);return t.length&&t[0]===e[0]?yt(t):[]}),ks=po(function(e){var t=za(e),n=f(e,Tn);return t===za(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?yt(n,ma(t)):[]}),Cs=po(function(e){var t=za(e),n=f(e,Tn);return t===za(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?yt(n,void 0,t):[]}),Es=po(Ga),Ss=po(function(e,t){t=dt(t,1);var n=e?e.length:0,a=ve(e,t);return Kt(e,f(t,function(e){return Ia(e,n)?+e:e}).sort(jn)),a}),Is=po(function(e){return hn(dt(e,1,bo,!0))}),Ps=po(function(e){var t=za(e);return bo(t)&&(t=void 0),hn(dt(e,1,bo,!0),ma(t))}),Ms=po(function(e){var t=za(e);return bo(t)&&(t=void 0),hn(dt(e,1,bo,!0),void 0,t)}),As=po(function(e,t){return bo(e)?ke(e,t):[]}),Os=po(function(e){return yn(m(e,bo))}),js=po(function(e){var t=za(e);return bo(t)&&(t=void 0),yn(m(e,bo),ma(t))}),Rs=po(function(e){var t=za(e);return bo(t)&&(t=void 0),yn(m(e,bo),void 0,t)}),Bs=po(Za),Us=po(function(e){var t=e.length,n=1<t?e[t-1]:void 0;return n="function"==typeof n?(e.pop(),n):void 0,Xa(e,n)}),Ls=po(function(e){e=dt(e,1);var t=e.length,n=t?e[0]:0,i=this.__wrapped__,s=function(t){return ve(t,e)};return 1<t||this.__actions__.length||!(i instanceof o)||!Ia(n)?this.thru(s):(i=i.slice(n,+n+(t?1:0)),i.__actions__.push({func:Ja,args:[s],thisArg:void 0}),new a(i,this.__chain__).thru(function(e){return t&&!e.length&&e.push(void 0),e}))}),Ns=Dn(function(e,t,n){gi.call(e,n)?++e[n]:e[n]=1}),$s=Dn(function(e,t,n){gi.call(e,n)?e[n].push(t):e[n]=[t]}),Ds=po(function(e,t,n){var a=-1,o=Ma(t),i=fo(e)?Array(e.length):[];return ls(e,function(e){var s="function"==typeof t?t:o&&null!=e?e[t]:void 0;i[++a]=s?d(s,e,n):Tt(e,t,n)}),i}),Hs=Dn(function(e,t,n){e[n]=t}),Ws=Dn(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),qs=po(function(e,t){if(null==e)return[];var n=t.length;return 1<n&&Pa(e,t[0],t[1])?t=[]:2<n&&Pa(t[0],t[1],t[2])&&(t=[t[0]]),t=1==t.length&&ed(t[0])?t[0]:dt(t,1,Sa),Ft(e,t,[])}),Fs=si.now,Vs=po(function(e,t,n){var a=1;if(n.length){var o=z(n,fa(Vs));a|=32}return sa(e,a,t,n,o)}),zs=po(function(e,t,n){var a=3;if(n.length){var o=z(n,fa(zs));a|=32}return sa(t,a,e,n,o)}),Gs=po(function(e,t){return we(e,1,t)}),Ys=po(function(e,t,n){return we(e,No(t)||0,n)});co.Cache=oe;var Zs=po(function(e,t){t=1==t.length&&ed(t[0])?f(t[0],O(ma())):f(dt(t,1,Sa),O(ma()));var n=t.length;return po(function(a){for(var o=-1,i=Di(a.length,n);++o<i;)a[o]=t[o].call(this,a[o]);return d(e,this,a)})}),Xs=po(function(e,t){var n=z(t,fa(Xs));return sa(e,32,void 0,t,n)}),Qs=po(function(e,t){var n=z(t,fa(Qs));return sa(e,64,void 0,t,n)}),Js=po(function(e,t){return sa(e,256,void 0,void 0,void 0,dt(t,1))}),Ks=aa(ht),gt=aa(function(e,t){return e>=t}),ed=Array.isArray,td=Ti?function(e){return e instanceof Ti}:Ko(!1),nd=aa(It),lt=aa(function(e,t){return e<=t}),ad=Hn(function(e,t){if(Ki||ja(t)||fo(t))return void Nn(t,qo(t),e);for(var n in t)gi.call(t,n)&&ge(e,n,t[n])}),od=Hn(function(e,t){if(Ki||ja(t)||fo(t))return void Nn(t,Fo(t),e);for(var n in t)ge(e,n,t[n])}),id=Hn(function(e,t,n,a){Nn(t,Fo(t),e,a)}),sd=Hn(function(e,t,n,a){Nn(t,qo(t),e,a)}),dd=po(function(e,t){return ve(e,dt(t,1))}),at=po(function(e){return e.push(void 0,me),d(id,void 0,e)}),rd=po(function(e){return e.push(void 0,La),d(md,void 0,e)}),ld=Qn(function(e,t,n){e[t]=n},Ko(ei)),cd=Qn(function(e,t,n){gi.call(e,t)?e[t].push(n):e[t]=[n]},ma),pd=po(Tt),ud=Hn(function(e,t,n){Ht(e,t,n)}),md=Hn(function(e,t,n,a){Ht(e,t,n,a)}),hd=po(function(e,t){return null==e?{}:(t=f(dt(t,1),Da),Vt(e,ke(pa(e),t)))}),gd=po(function(e,t){return null==e?{}:Vt(e,f(dt(t,1),Da))}),fd=zn(function(e,t,n){return t=t.toLowerCase(),e+(n?Yo(t):t)}),bd=zn(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),vd=zn(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),yd=Vn("toLowerCase"),xd=zn(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Td=zn(function(e,t,n){return e+(n?" ":"")+wd(t)}),_d=zn(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),wd=Vn("toUpperCase"),kd=po(function(e,t){try{return d(e,void 0,t)}catch(t){return yo(t)?t:new di(t)}}),Cd=po(function(e,t){return c(dt(t,1),function(t){t=Da(t),e[t]=Vs(e[t],e)}),e}),Ed=Zn(),Sd=Zn(!0),Id=po(function(e,t){return function(n){return Tt(n,e,t)}}),Pd=po(function(e,t){return function(n){return Tt(e,n,t)}}),Md=Kn(f),Ad=Kn(u),Od=Kn(x),jd=na(),Rd=na(!0),Bd=Jn(function(e,t){return e+t}),Ud=ia("ceil"),Ld=Jn(function(e,t){return e/t}),Nd=ia("floor"),$d=Jn(function(e,t){return e*t}),Dd=ia("round"),Hd=Jn(function(e,t){return e-t});return t.after=function(e,t){if("function"!=typeof t)throw new ci("Expected a function");return e=Uo(e),function(){if(1>--e)return t.apply(this,arguments)}},t.ary=oo,t.assign=ad,t.assignIn=od,t.assignInWith=id,t.assignWith=sd,t.at=dd,t.before=io,t.bind=Vs,t.bindAll=Cd,t.bindKey=zs,t.castArray=mo,t.chain=Qa,t.chunk=function(e,t,n){t=(n?Pa(e,t,n):void 0===t)?1:$i(Uo(t),0);var a=e?e.length:0;if(!a||1>t)return[];for(var o=0,i=0,s=Array(ji(a/t));o<a;)s[i++]=dn(e,o,o+=t);return s},t.compact=function(e){for(var t=-1,n=e?e.length:0,a=0,o=[],i;++t<n;)i=e[t],i&&(o[a++]=i);return o},t.concat=function(){var e=arguments.length,t=mo(arguments[0]);if(2>e)return e?Ln(t):[];for(var n=Array(e-1);e--;)n[e-1]=arguments[e];return l(t,dt(n,1))},t.cond=function(e){var t=e?e.length:0,n=ma();return e=t?f(e,function(e){if("function"!=typeof e[1])throw new ci("Expected a function");return[n(e[0]),e[1]]}):[],po(function(n){for(var a=-1,o;++a<t;)if(o=e[a],d(o[0],this,n))return d(o[1],this,n)})},t.conforms=function(e){return Te(xe(e,!0))},t.constant=Ko,t.countBy=Ns,t.create=function(e,t){var n=_e(e);return t?be(n,t):n},t.curry=so,t.curryRight=ro,t.debounce=lo,t.defaults=at,t.defaultsDeep=rd,t.defer=Gs,t.delay=Ys,t.difference=xs,t.differenceBy=Ts,t.differenceWith=_s,t.drop=qa,t.dropRight=Fa,t.dropRightWhile=function(e,t){return e&&e.length?bn(e,ma(t,3),!0,!0):[]},t.dropWhile=function(e,t){return e&&e.length?bn(e,ma(t,3),!0):[]},t.fill=function(e,t,n,a){var o=e?e.length:0;return o?(n&&"number"!=typeof n&&Pa(e,t,n)&&(n=0,a=o),it(e,t,n,a)):[]},t.filter=function(e,t){var n=ed(e)?m:st;return n(e,ma(t,3))},t.flatMap=function(e,t){return dt(to(e,t),1)},t.flatMapDeep=function(e,t){return dt(to(e,t),J)},t.flatMapDepth=function(e,t,n){return n=void 0===n?1:Uo(n),dt(to(e,t),n)},t.flatten=function(e){var t=e?e.length:0;return t?dt(e,1):[]},t.flattenDeep=function(e){var t=e?e.length:0;return t?dt(e,J):[]},t.flattenDepth=function(e,t){var n=e?e.length:0;return n?(t=void 0===t?1:Uo(t),dt(e,t)):[]},t.flip=function(e){return sa(e,512)},t.flow=Ed,t.flowRight=Sd,t.fromPairs=function(e){for(var t=-1,n=e?e.length:0,a={},o;++t<n;)o=e[t],a[o[0]]=o[1];return a},t.functions=function(e){return null==e?[]:pt(e,qo(e))},t.functionsIn=function(e){return null==e?[]:pt(e,Fo(e))},t.groupBy=$s,t.initial=function(e){return Fa(e,1)},t.intersection=ws,t.intersectionBy=ks,t.intersectionWith=Cs,t.invert=ld,t.invertBy=cd,t.invokeMap=Ds,t.iteratee=ti,t.keyBy=Hs,t.keys=qo,t.keysIn=Fo,t.map=to,t.mapKeys=function(e,t){var n={};return t=ma(t,3),rt(e,function(e,a,o){n[t(e,a,o)]=e}),n},t.mapValues=function(e,t){var n={};return t=ma(t,3),rt(e,function(e,a,o){n[a]=t(e,a,o)}),n},t.matches=function(e){return Mt(xe(e,!0))},t.matchesProperty=function(e,t){return jt(e,xe(t,!0))},t.memoize=co,t.merge=ud,t.mergeWith=md,t.method=Id,t.methodOf=Pd,t.mixin=ni,t.negate=function(e){if("function"!=typeof e)throw new ci("Expected a function");return function(){return!e.apply(this,arguments)}},t.nthArg=function(e){return e=Uo(e),po(function(t){return qt(t,e)})},t.omit=hd,t.omitBy=function(e,t){return t=ma(t),Yt(e,function(e,n){return!t(e,n)})},t.once=function(e){return io(2,e)},t.orderBy=function(e,t,n,a){return null==e?[]:(ed(t)||(t=null==t?[]:[t]),n=a?void 0:n,ed(n)||(n=null==n?[]:[n]),Ft(e,t,n))},t.over=Md,t.overArgs=Zs,t.overEvery=Ad,t.overSome=Od,t.partial=Xs,t.partialRight=Qs,t.partition=Ws,t.pick=gd,t.pickBy=function(e,t){return null==e?{}:Yt(e,ma(t))},t.property=oi,t.propertyOf=function(e){return function(t){return null==e?void 0:ut(e,t)}},t.pull=Es,t.pullAll=Ga,t.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Jt(e,t,ma(n)):e},t.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Jt(e,t,void 0,n):e},t.pullAt=Ss,t.range=jd,t.rangeRight=Rd,t.rearg=Js,t.reject=function(e,t){var n=ed(e)?m:st;return t=ma(t,3),n(e,function(e,n,a){return!t(e,n,a)})},t.remove=function(e,t){var n=[];if(!(e&&e.length))return n;var a=-1,o=[],i=e.length;for(t=ma(t,3);++a<i;){var s=e[a];t(s,a,e)&&(n.push(s),o.push(a))}return Kt(e,o),n},t.rest=po,t.reverse=Ya,t.sampleSize=no,t.set=function(e,t,n){return null==e?e:sn(e,t,n)},t.setWith=function(e,t,n,a){return a="function"==typeof a?a:void 0,null==e?e:sn(e,t,n,a)},t.shuffle=function(e){return no(e,4294967295)},t.slice=function(e,t,n){var a=e?e.length:0;return a?(n&&"number"!=typeof n&&Pa(e,t,n)?(t=0,n=a):(t=null==t?0:Uo(t),n=void 0===n?a:Uo(n)),dn(e,t,n)):[]},t.sortBy=qs,t.sortedUniq=function(e){return e&&e.length?pn(e):[]},t.sortedUniqBy=function(e,t){return e&&e.length?pn(e,ma(t)):[]},t.split=function(e,t,n){return(n&&"number"!=typeof n&&Pa(e,t,n)&&(t=n=void 0),n=void 0===n?4294967295:n>>>0,!n)?[]:(e=Do(e),e&&("string"==typeof t||null!=t&&!Po(t))&&(t=mn(t),""==t&&Bt.test(e))?kn(Z(e),0,n):Vi.call(e,t,n))},t.spread=function(e,t){if("function"!=typeof e)throw new ci("Expected a function");return t=void 0===t?0:$i(Uo(t),0),po(function(n){var a=n[t],o=kn(n,0,t);return a&&b(o,a),d(e,this,o)})},t.tail=function(e){return qa(e,1)},t.take=function(e,t,a){return e&&e.length?(t=a||void 0===t?1:Uo(t),dn(e,0,0>t?0:t)):[]},t.takeRight=function(e,t,a){var o=e?e.length:0;return o?(t=a||void 0===t?1:Uo(t),t=o-t,dn(e,0>t?0:t,o)):[]},t.takeRightWhile=function(e,t){return e&&e.length?bn(e,ma(t,3),!1,!0):[]},t.takeWhile=function(e,t){return e&&e.length?bn(e,ma(t,3)):[]},t.tap=function(e,t){return t(e),e},t.throttle=uo,t.thru=Ja,t.toArray=Bo,t.toPairs=Vo,t.toPairsIn=zo,t.toPath=function(e){return ed(e)?f(e,Da):Oo(e)?[e]:Ln(ys(e))},t.toPlainObject=$o,t.transform=function(e,t,n){var a=ed(e)||jo(e);if(t=ma(t,4),null==n)if(a||wo(e)){var o=e.constructor;n=a?ed(e)?new o:[]:xo(o)?_e(ba(e)):{}}else n={};return(a?c:rt)(e,function(e,a,o){return t(n,e,a,o)}),n},t.unary=function(e){return oo(e,1)},t.union=Is,t.unionBy=Ps,t.unionWith=Ms,t.uniq=function(e){return e&&e.length?hn(e):[]},t.uniqBy=function(e,t){return e&&e.length?hn(e,ma(t)):[]},t.uniqWith=function(e,t){return e&&e.length?hn(e,void 0,t):[]},t.unset=function(e,t){return null==e||gn(e,t)},t.unzip=Za,t.unzipWith=Xa,t.update=function(e,t,n){return null==e?e:fn(e,t,_n(n))},t.updateWith=function(e,t,n,a){return a="function"==typeof a?a:void 0,null==e?e:fn(e,t,_n(n),a)},t.values=Go,t.valuesIn=function(e){return null==e?[]:j(e,Fo(e))},t.without=As,t.words=Jo,t.wrap=function(e,t){return t=null==t?ei:t,Xs(t,e)},t.xor=Os,t.xorBy=js,t.xorWith=Rs,t.zip=Bs,t.zipObject=function(e,t){return xn(e||[],t||[],ge)},t.zipObjectDeep=function(e,t){return xn(e||[],t||[],sn)},t.zipWith=Us,t.entries=Vo,t.entriesIn=zo,t.extend=od,t.extendWith=id,ni(t,t),t.add=Bd,t.attempt=kd,t.camelCase=fd,t.capitalize=Yo,t.ceil=Ud,t.clamp=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=No(n),n=n===n?n:0),void 0!==t&&(t=No(t),t=t===t?t:0),ye(No(e),t,n)},t.clone=function(e){return xe(e,!1,!0)},t.cloneDeep=function(e){return xe(e,!0,!0)},t.cloneDeepWith=function(e,t){return xe(e,!0,!0,t)},t.cloneWith=function(e,t){return xe(e,!1,!0,t)},t.deburr=Zo,t.divide=Ld,t.endsWith=function(e,t,n){e=Do(e),t=mn(t);var a=e.length;return n=void 0===n?a:ye(Uo(n),0,a),n-=t.length,0<=n&&e.indexOf(t,n)==n},t.eq=ho,t.escape=function(e){return e=Do(e),e&&Ae.test(e)?e.replace(Pe,D):e},t.escapeRegExp=function(e){return e=Do(e),e&&$e.test(e)?e.replace(Ne,"\\$&"):e},t.every=function(e,t,n){var a=ed(e)?u:nt;return n&&Pa(e,t,n)&&(t=void 0),a(e,ma(t,3))},t.find=function(e,t){if(t=ma(t,3),ed(e)){var n=w(e,t);return-1<n?e[n]:void 0}return T(e,t,ls)},t.findIndex=function(e,t){return e&&e.length?w(e,ma(t,3)):-1},t.findKey=function(e,t){return T(e,ma(t,3),rt,!0)},t.findLast=function(e,t){if(t=ma(t,3),ed(e)){var n=w(e,t,!0);return-1<n?e[n]:void 0}return T(e,t,cs)},t.findLastIndex=function(e,t){return e&&e.length?w(e,ma(t,3),!0):-1},t.findLastKey=function(e,t){return T(e,ma(t,3),ct,!0)},t.floor=Nd,t.forEach=Ka,t.forEachRight=eo,t.forIn=function(e,t){return null==e?e:ps(e,ma(t),Fo)},t.forInRight=function(e,t){return null==e?e:us(e,ma(t),Fo)},t.forOwn=function(e,t){return e&&rt(e,ma(t))},t.forOwnRight=function(e,t){return e&&ct(e,ma(t))},t.get=Ho,t.gt=Ks,t.gte=gt,t.has=function(e,t){return null!=e&&Ta(e,t,ft)},t.hasIn=Wo,t.head=Va,t.identity=ei,t.includes=function(e,t,n,a){e=fo(e)?e:Go(e),n=n&&!a?Uo(n):0;var o=e.length;return 0>n&&(n=$i(o+n,0)),Ao(e)?n<=o&&-1<e.indexOf(t,n):!!o&&-1<k(e,t,n)},t.indexOf=function(e,t,n){var a=e?e.length:0;return a?(n=Uo(n),0>n&&(n=$i(a+n,0)),k(e,t,n)):-1},t.inRange=function(e,t,n){return t=No(t)||0,void 0===n?(n=t,t=0):n=No(n)||0,e=No(e),vt(e,t,n)},t.invoke=pd,t.isArguments=go,t.isArray=ed,t.isArrayBuffer=function(e){return ko(e)&&"[object ArrayBuffer]"==vi.call(e)},t.isArrayLike=fo,t.isArrayLikeObject=bo,t.isBoolean=function(e){return!0===e||!1===e||ko(e)&&"[object Boolean]"==vi.call(e)},t.isBuffer=td,t.isDate=function(e){return ko(e)&&"[object Date]"==vi.call(e)},t.isElement=function(e){return!!e&&1===e.nodeType&&ko(e)&&!Io(e)},t.isEmpty=vo,t.isEqual=function(e,t){return _t(e,t)},t.isEqualWith=function(e,t,n){n="function"==typeof n?n:void 0;var a=n?n(e,t):void 0;return void 0===a?_t(e,t,n):!!a},t.isError=yo,t.isFinite=function(e){return"number"==typeof e&&Ui(e)},t.isFunction=xo,t.isInteger=To,t.isLength=_o,t.isMap=Co,t.isMatch=function(e,t){return e===t||kt(e,t,ha(t))},t.isMatchWith=function(e,t,n){return n="function"==typeof n?n:void 0,kt(e,t,ha(t),n)},t.isNaN=function(e){return So(e)&&e!=+e},t.isNative=Eo,t.isNil=function(e){return null==e},t.isNull=function(e){return null===e},t.isNumber=So,t.isObject=wo,t.isObjectLike=ko,t.isPlainObject=Io,t.isRegExp=Po,t.isSafeInteger=function(e){return To(e)&&-9007199254740991<=e&&9007199254740991>=e},t.isSet=Mo,t.isString=Ao,t.isSymbol=Oo,t.isTypedArray=jo,t.isUndefined=function(e){return void 0===e},t.isWeakMap=Ro,t.isWeakSet=function(e){return ko(e)&&"[object WeakSet]"==vi.call(e)},t.join=function(e,t){return e?Li.call(e,t):""},t.kebabCase=bd,t.last=za,t.lastIndexOf=function(e,t,n){var a=e?e.length:0;if(!a)return-1;var o=a;if(void 0!==n&&(o=Uo(n),o=(0>o?$i(a+o,0):Di(o,a-1))+1),t!==t)return W(e,o,!0);for(;o--;)if(e[o]===t)return o;return-1},t.lowerCase=vd,t.lowerFirst=yd,t.lt=nd,t.lte=lt,t.max=function(e){return e&&e.length?ot(e,ei,ht):void 0},t.maxBy=function(e,t){return e&&e.length?ot(e,ma(t),ht):void 0},t.mean=function(e){return E(e,ei)},t.meanBy=function(e,t){return E(e,ma(t))},t.min=function(e){return e&&e.length?ot(e,ei,It):void 0},t.minBy=function(e,t){return e&&e.length?ot(e,ma(t),It):void 0},t.multiply=$d,t.nth=function(e,t){return e&&e.length?qt(e,Uo(t)):void 0},t.noConflict=function(){return tn._===this&&(tn._=yi),this},t.noop=ai,t.now=Fs,t.pad=function(e,t,n){e=Do(e),t=Uo(t);var a=t?Y(e):0;if(!t||a>=t)return e;var o=(t-a)/2;return ea(Ri(o),n)+e+ea(ji(o),n)},t.padEnd=function(e,t,n){e=Do(e),t=Uo(t);var a=t?Y(e):0;return t&&a<t?e+ea(t-a,n):e},t.padStart=function(e,t,n){e=Do(e),t=Uo(t);var a=t?Y(e):0;return t&&a<t?ea(t-a,n)+e:e},t.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),e=Do(e).replace(De,""),Hi(e,t||(Ge.test(e)?16:10))},t.random=function(e,t,n){if(n&&"boolean"!=typeof n&&Pa(e,t,n)&&(t=n=void 0),void 0===n&&("boolean"==typeof t?(n=t,t=void 0):"boolean"==typeof e&&(n=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=No(e)||0,void 0===t?(t=e,e=0):t=No(t)||0),e>t){var a=e;e=t,t=a}if(n||e%1||t%1){var o=Wi();return Di(e+o*(t-e+zt("1e-"+((o+"").length-1))),t)}return en(e,t)},t.reduce=function(e,t,n){var a=ed(e)?v:S,o=3>arguments.length;return a(e,ma(t,4),n,o,ls)},t.reduceRight=function(e,t,n){var a=ed(e)?y:S,o=3>arguments.length;return a(e,ma(t,4),n,o,cs)},t.repeat=function(e,t,a){return t=(a?Pa(e,t,a):void 0===t)?1:Uo(t),on(Do(e),t)},t.replace=function(){var e=arguments,t=Do(e[0]);return 3>e.length?t:qi.call(t,e[1],e[2])},t.result=function(e,t,n){t=Ma(t,e)?[t]:wn(t);var a=-1,o=t.length;for(o||(e=void 0,o=1);++a<o;){var i=null==e?void 0:e[Da(t[a])];void 0===i&&(a=o,i=n),e=xo(i)?i.call(e):i}return e},t.round=Dd,t.runInContext=Q,t.sample=function(e){var t=fo(e)?e:Go(e),n=t.length;return 0<n?t[en(0,n-1)]:void 0},t.size=ao,t.snakeCase=xd,t.some=function(e,t,n){var a=ed(e)?x:rn;return n&&Pa(e,t,n)&&(t=void 0),a(e,ma(t,3))},t.sortedIndex=function(e,t){return ln(e,t)},t.sortedIndexBy=function(e,t,n){return cn(e,t,ma(n))},t.sortedIndexOf=function(e,t){var n=e?e.length:0;if(n){var a=ln(e,t);if(a<n&&ho(e[a],t))return a}return-1},t.sortedLastIndex=function(e,t){return ln(e,t,!0)},t.sortedLastIndexBy=function(e,t,n){return cn(e,t,ma(n),!0)},t.sortedLastIndexOf=function(e,t){var n=e?e.length:0;if(n){var a=ln(e,t,!0)-1;if(ho(e[a],t))return a}return-1},t.startCase=Td,t.startsWith=function(e,t,n){return e=Do(e),n=ye(Uo(n),0,e.length),e.lastIndexOf(mn(t),n)==n},t.subtract=Hd,t.sum=function(e){return e&&e.length?P(e,ei):0},t.sumBy=function(e,t){return e&&e.length?P(e,ma(t)):0},t.template=Xo,t.times=function(e,t){if(e=Uo(e),1>e||9007199254740991<e)return[];var a=4294967295,o=Di(e,4294967295);t=ma(t),e-=4294967295;for(var i=M(o,t);++a<e;)t(a);return i},t.toInteger=Uo,t.toLength=Lo,t.toLower=function(e){return Do(e).toLowerCase()},t.toNumber=No,t.toSafeInteger=function(e){return ye(Uo(e),-9007199254740991,9007199254740991)},t.toString=Do,t.toUpper=function(e){return Do(e).toUpperCase()},t.trim=function(e,t,n){if(e=Do(e),e&&(n||void 0===t))return e.replace(De,"");if(!e||!(t=mn(t)))return e;var a=Z(e),o=Z(t),i=R(a,o),s=B(a,o)+1;return kn(a,i,s).join("")},t.trimEnd=function(e,t,n){if(e=Do(e),e&&(n||void 0===t))return e.replace(We,"");if(!e||!(t=mn(t)))return e;var a=Z(e),o=B(a,Z(t))+1;return kn(a,0,o).join("")},t.trimStart=function(e,t,n){if(e=Do(e),e&&(n||void 0===t))return e.replace(He,"");if(!e||!(t=mn(t)))return e;var a=Z(e),o=R(a,Z(t));return kn(a,o).join("")},t.truncate=Qo,t.unescape=function(e){return e=Do(e),e&&Me.test(e)?e.replace(Ie,X):e},t.uniqueId=ii,t.upperCase=_d,t.upperFirst=wd,t.each=Ka,t.eachRight=eo,t.first=Va,ni(t,function(){var e={};return rt(t,function(n,a){gi.call(t.prototype,a)||(e[a]=n)}),e}(),{chain:!1}),t.VERSION="4.11.2",c(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){t[e].placeholder=t}),c(["drop","take"],function(e,t){o.prototype[e]=function(a){var i=this.__filtered__;if(i&&!t)return new o(this);a=void 0===a?1:$i(Uo(a),0);var s=this.clone();return i?s.__takeCount__=Di(a,s.__takeCount__):s.__views__.push({size:Di(a,4294967295),type:e+(0>s.__dir__?"Right":"")}),s},o.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),c(["filter","map","takeWhile"],function(e,t){var n=t+1;o.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ma(e,3),type:n}),t.__filtered__=t.__filtered__||1==n||3==n,t}}),c(["head","last"],function(e,t){var n="take"+(t?"Right":"");o.prototype[e]=function(){return this[n](1).value()[0]}}),c(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");o.prototype[e]=function(){return this.__filtered__?new o(this):this[n](1)}}),o.prototype.compact=function(){return this.filter(ei)},o.prototype.find=function(e){return this.filter(e).head()},o.prototype.findLast=function(e){return this.reverse().find(e)},o.prototype.invokeMap=po(function(e,t){return"function"==typeof e?new o(this):this.map(function(n){return Tt(n,e,t)})}),o.prototype.reject=function(e){return e=ma(e,3),this.filter(function(t){return!e(t)})},o.prototype.slice=function(e,t){e=Uo(e);var n=this;return n.__filtered__&&(0<e||0>t)?new o(n):(0>e?n=n.takeRight(-e):e&&(n=n.drop(e)),void 0!==t&&(t=Uo(t),n=0>t?n.dropRight(-t):n.take(t-e)),n)},o.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},o.prototype.toArray=function(){return this.take(4294967295)},rt(o.prototype,function(e,n){var i=/^(?:filter|find|map|reject)|While$/.test(n),s=/^(?:head|last)$/.test(n),d=t[s?"take"+("last"==n?"Right":""):n],r=s||/^find/.test(n);d&&(t.prototype[n]=function(){var n=this.__wrapped__,l=s?[1]:arguments,c=n instanceof o,p=l[0],u=c||ed(n),m=function(e){var n=d.apply(t,b([e],l));return s&&h?n[0]:n};u&&i&&"function"==typeof p&&1!=p.length&&(c=u=!1);var h=this.__chain__,g=!!this.__actions__.length,f=r&&!h,v=c&&!g;if(!r&&u){n=v?n:new o(this);var y=e.apply(n,l);return y.__actions__.push({func:Ja,args:[m],thisArg:void 0}),new a(y,h)}return f&&v?e.apply(this,l):(y=this.thru(m),f?s?y.value()[0]:y.value():y)})}),c(["pop","push","shift","sort","splice","unshift"],function(e){var n=pi[e],a=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",o=/^(?:pop|shift)$/.test(e);t.prototype[e]=function(){var e=arguments;if(o&&!this.__chain__){var t=this.value();return n.apply(ed(t)?t:[],e)}return this[a](function(t){return n.apply(ed(t)?t:[],e)})}}),rt(o.prototype,function(e,n){var a=t[n];if(a){var o=a.name+"",i=es[o]||(es[o]=[]);i.push({name:n,func:a})}}),es[Xn(void 0,2).name]=[{name:"wrapper",func:void 0}],o.prototype.clone=function(){var e=new o(this.__wrapped__);return e.__actions__=Ln(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ln(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ln(this.__views__),e},o.prototype.reverse=function(){if(this.__filtered__){var e=new o(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e},o.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=ed(e),a=n?e.length:0,o=xa(0,a,this.__views__),i=o.start,s=o.end,d=s-i,r=0>t?s:i-1,l=this.__iteratees__,c=l.length,p=0,u=Di(d,this.__takeCount__);if(!n||200>a||a==d&&u==d)return vn(e,this.__actions__);var m=[];outer:for(;d--&&p<u;){r+=t;for(var h=-1,g=e[r];++h<c;){var f=l[h],b=f.iteratee,v=f.type,y=b(g);if(2==v)g=y;else if(!y)if(1==v)continue outer;else break outer}m[p++]=g}return m},t.prototype.at=Ls,t.prototype.chain=function(){return Qa(this)},t.prototype.commit=function(){return new a(this.value(),this.__chain__)},t.prototype.next=function(){void 0===this.__values__&&(this.__values__=Bo(this.value()));var e=this.__index__>=this.__values__.length,t=e?void 0:this.__values__[this.__index__++];return{done:e,value:t}},t.prototype.plant=function(e){for(var t=this,a,o;t instanceof n;){o=Wa(t),o.__index__=0,o.__values__=void 0,a?i.__wrapped__=o:a=o;var i=o;t=t.__wrapped__}return i.__wrapped__=e,a},t.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof o){var t=e;return this.__actions__.length&&(t=new o(this)),t=t.reverse(),t.__actions__.push({func:Ja,args:[Ya],thisArg:void 0}),new a(t,this.__chain__)}return this.thru(Ya)},t.prototype.toJSON=t.prototype.valueOf=t.prototype.value=function(){return vn(this.__wrapped__,this.__actions__)},Ii&&(t.prototype[Ii]=function(){return this}),t}var J=1/0,K=0/0,ee=4294967295,te="[object Arguments]",ne="[object Array]",ae="[object Boolean]",oe="[object Date]",ie="[object Error]",se="[object Function]",de="[object Map]",re="[object Number]",le="[object Object]",ce="[object RegExp]",pe="[object Set]",ue="[object String]",me="[object WeakMap]",he="[object ArrayBuffer]",ge="[object DataView]",fe="[object Float32Array]",be="[object Float64Array]",ve="[object Int8Array]",ye="[object Int16Array]",xe="[object Int32Array]",Te="[object Uint8Array]",_e="[object Uint8ClampedArray]",we="[object Uint16Array]",ke="[object Uint32Array]",Ce=/\b__p \+= '';/g,Ee=/\b(__p \+=) '' \+/g,Se=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ie=/&(?:amp|lt|gt|quot|#39|#96);/g,Pe=/[&<>"'`]/g,Me=RegExp(Ie.source),Ae=RegExp(Pe.source),Oe=/<%-([\s\S]+?)%>/g,je=/<%([\s\S]+?)%>/g,Re=/<%=([\s\S]+?)%>/g,Be=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ue=/^\w*$/,Le=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,Ne=/[\\^$.*+?()[\]{}|]/g,$e=RegExp(Ne.source),De=/^\s+|\s+$/g,He=/^\s+/,We=/\s+$/,qe=/[a-zA-Z0-9]+/g,Fe=/\\(\\)?/g,Ve=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ze=/\w*$/,Ge=/^0x/i,Ye=/^[-+]0x[0-9a-f]+$/i,Ze=/^0b[01]+$/i,Xe=/^\[object .+?Constructor\]$/,Qe=/^0o[0-7]+$/i,Je=/^(?:0|[1-9]\d*)$/,Ke=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,et=/($^)/,tt=/['\n\r\u2028\u2029\\]/g,nt="\\ud800-\\udfff",at="\\u0300-\\u036f\\ufe20-\\ufe23",ot="\\u20d0-\\u20f0",it="\\u2700-\\u27bf",st="a-z\\xdf-\\xf6\\xf8-\\xff",dt="A-Z\\xc0-\\xd6\\xd8-\\xde",rt="\\ufe0e\\ufe0f",lt="\\xac\\xb1\\xd7\\xf7"+"\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf"+"\\u2000-\\u206f"+" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ct="['\u2019]",pt="["+lt+"]",ut="["+at+ot+"]",mt="\\d+",ht="["+st+"]",gt="[^"+nt+lt+mt+it+st+dt+"]",ft="\\ud83c[\\udffb-\\udfff]",bt="[^"+nt+"]",vt="(?:\\ud83c[\\udde6-\\uddff]){2}",yt="[\\ud800-\\udbff][\\udc00-\\udfff]",xt="["+dt+"]",Tt="\\u200d",_t="(?:"+ht+"|"+gt+")",wt="(?:"+ct+"(?:d|ll|m|re|s|t|ve))?",kt="(?:"+ct+"(?:D|LL|M|RE|S|T|VE))?",Ct="(?:"+ut+"|"+ft+")"+"?",Et="["+rt+"]?",St="(?:"+Tt+"(?:"+[bt,vt,yt].join("|")+")"+Et+Ct+")*",It=Et+Ct+St,Pt="(?:"+["["+it+"]",vt,yt].join("|")+")"+It,Mt="(?:"+[bt+ut+"?",ut,vt,yt,"["+nt+"]"].join("|")+")",At=RegExp(ct,"g"),Ot=RegExp(ut,"g"),jt=RegExp(ft+"(?="+ft+")|"+Mt+It,"g"),Rt=RegExp([xt+"?"+ht+"+"+wt+"(?="+[pt,xt,"$"].join("|")+")","(?:"+xt+"|"+gt+")"+"+"+kt+"(?="+[pt,xt+_t,"$"].join("|")+")",xt+"?"+_t+"+"+wt,xt+"+"+kt,mt,Pt].join("|"),"g"),Bt=RegExp("["+Tt+nt+at+ot+rt+"]"),Ut=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Lt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","Reflect","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Nt=-1,$t={};$t[fe]=$t[be]=$t[ve]=$t[ye]=$t[xe]=$t[Te]=$t[_e]=$t[we]=$t[ke]=!0,$t[te]=$t[ne]=$t[he]=$t[ae]=$t[ge]=$t[oe]=$t[ie]=$t[se]=$t[de]=$t[re]=$t[le]=$t[ce]=$t[pe]=$t[ue]=$t[me]=!1;var Dt={};Dt[te]=Dt[ne]=Dt[he]=Dt[ge]=Dt[ae]=Dt[oe]=Dt[fe]=Dt[be]=Dt[ve]=Dt[ye]=Dt[xe]=Dt[de]=Dt[re]=Dt[le]=Dt[ce]=Dt[pe]=Dt[ue]=Dt["[object Symbol]"]=Dt[Te]=Dt[_e]=Dt[we]=Dt[ke]=!0,Dt[ie]=Dt[se]=Dt[me]=!1;var Ht={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss"},Wt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},qt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":"\"","&#39;":"'","&#96;":"`"},Ft={function:!0,object:!0},Vt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},zt=parseFloat,Gt=parseInt,Yt=Ft[typeof t]&&t&&!t.nodeType?t:void 0,Zt=Ft[typeof e]&&e&&!e.nodeType?e:void 0,Xt=Zt&&Zt.exports===Yt?Yt:void 0,Qt=U(Yt&&Zt&&"object"==typeof o&&o),Jt=U(Ft[typeof self]&&self),Kt=U(Ft[typeof window]&&window),en=U(Ft[typeof this]&&this),tn=Qt||Kt!==(en&&en.window)&&Kt||Jt||en||Function("return this")(),nn=Q();(Kt||Jt||{})._=nn,(a=function(){return nn}.call(t,n,t,e),!(a!==void 0&&(e.exports=a)))}).call(this)}).call(t,n(9)(e),function(){return this}())},function(e){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(){window.cytubeEnhanced=new window.CytubeEnhanced(window.cytubeEnhancedSettings?window.cytubeEnhancedSettings.language||"ru":"ru",window.cytubeEnhancedSettings?window.cytubeEnhancedSettings.modulesSettings||{}:{},window.cytubeEnhancedSettings?window.cytubeEnhancedSettings.modulesExtends||{}:{})},function(){window.cytubeEnhanced.addModule("additionalChatCommands",function(e,t){'use strict';var n=this;t=$.extend({},{permittedCommands:["*"]},t),t.permittedCommands=_.isArray(t.permittedCommands)?t.permittedCommands:[],t.permittedCommands=_.map(t.permittedCommands,function(e){return _.toLower(e)}),this.$chatline=$("#chatline"),this.isCommandPermitted=function(e){return!!n.commandsList[e]&&(!n.commandsList[e].canBeOmitted||-1!==t.permittedCommands.indexOf("*")||-1!==t.permittedCommands.indexOf(e))},this.askAnswers=["100%",e.t("qCommands[.]of course"),e.t("qCommands[.]yes"),e.t("qCommands[.]maybe"),e.t("qCommands[.]impossible"),e.t("qCommands[.]no way"),e.t("qCommands[.]don't think so"),e.t("qCommands[.]no"),"50/50",e.t("qCommands[.]cirno is busy"),e.t("qCommands[.]I regret to inform you")];var a={default:"",caucas:"",quotes:""};$.getJSON("https://dl.dropboxusercontent.com/s/8it8p0jsxzbz460/caucas.txt",function(t){a.caucas=t}),$.getJSON("https://dl.dropboxusercontent.com/s/xaflixguz2jz3eb/status.txt",function(t){a.default=t}),$.getJSON(`${DB}1fjgydrp4wkhhp2/quotes.txt`,function(t){a.quotes=t}),this.randomQuotes=[],this.dices=["https://i.imgur.com/GvBChl2.png","https://i.imgur.com/KqvO605.png","https://i.imgur.com/ynHLA6n.png","https://i.imgur.com/CQetKN5.png","https://i.imgur.com/MFXv2aS.png","https://i.imgur.com/ohez1Nf.png"];var o=new Audio(DB+"sqwxirtfao71hct/dice_sound.mp3");o.volume=.6,this.movieActors=[],this.ytVideoComments=[],this.maxYtComments=500,this.requestComments=(e,t)=>{const a="undefined"==typeof t?"":`&pageToken=${t}`;$.ajax({dataType:"jsonp",type:"GET",url:`https://www.googleapis.com/youtube/v3/commentThreads
						?key=AIzaSyACCt5AYwvKSBbcmmA8_mABpf3Q9LNODZ0
						&textFormat=plainText
						&part=snippet
						&maxResults=100
						&videoId=${e}
						${a}
					`,success:t=>{const a=t.nextPageToken;if(!(n.ytVideoComments.length>n.maxYtComments)){for(let e=0;e<t.items.length;e++){const a=t.items[e];n.ytVideoComments.push(a)}"undefined"!=typeof a&&n.requestComments(e,a)}},error:e=>{console.log("Error occured while fetching comments from YouTube video"),console.log(e),n.ytVideoComments=[],n.ytVideoComments[0]="\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0438."}})},socket.on("changeMedia",e=>{"yt"==e.type?(n.ytVideoComments=[],n.requestComments(e.id,void 0)):(n.ytVideoComments=[],n.ytVideoComments[0]="\u0412\u0438\u0434\u0435\u043E \u043D\u0435 \u0438\u0437 \u044E\u0442\u0443\u0431\u0430.")}),window.cytubeEnhanced.getModule("additionalChatCommands").done(e=>{"yt"==PLAYER.mediaType?(e.ytVideoComments=[],e.requestComments(PLAYER.yt.getVideoData().video_id,void 0)):(e.ytVideoComments=[],e.ytVideoComments[0]="\u0412\u0438\u0434\u0435\u043E \u043D\u0435 \u0438\u0437 \u044E\u0442\u0443\u0431\u0430.")}),this.wikiRes=void 0,this.pic=void 0,this.randomPic=void 0,String.prototype.hashCode=function(){var e=0,t,n;if(0===this.length)return e;for(t=0;t<this.length;t++)n=this.charCodeAt(t),e=(e<<5)-e+n,e|=0;return e},"undefined"==typeof this.isSketchfabLoaded&&($.getScript("https://static.sketchfab.com/api/sketchfab-viewer-1.10.4.js"),this.isSketchfabLoaded=!0),this.sketchfab=void 0,this.commandsList={"!pick":{description:e.t("chatCommands[.]random option from the list of options (!pick option1, option2, option3)"),value:function(t){var n=_.trim(t.replace("!pick",""));if(""===n)return e.t("chatCommands[.]Use !pick variant1, variant2");var a=n.split(",");return _.trim(a[Math.floor(Math.random()*a.length)])},canBeOmitted:!0},"!time":{description:e.t("chatCommands[.]show the current time"),value:function(){var t=new Date().getHours();10>t&&(t="0"+t);var n=new Date().getMinutes();return 10>n&&(n="0"+n),e.t("chatCommands[.]current time")+": "+t+":"+n},canBeOmitted:!0},"!ask":{description:e.t("chatCommands[.]asking a question with yes/no/... type answer (e.g. <i>!ask Will i be rich?</i>)"),value:function(){return n.askAnswers[Math.floor(Math.random()*n.askAnswers.length)]},canBeOmitted:!0},"!who":{description:e.t("chatCommands[.]\u0412\u044B\u0431\u0440\u0430\u0442\u044C \u0441\u043B\u0443\u0447\u0430\u0439\u043D\u043E\u0433\u043E \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F"),value:function(e){let t=document.querySelectorAll(".userlist_item div strong");return e=t[Math.floor(Math.random()*Math.floor(t.length))].innerText,e},canBeOmitted:!0},"!roll":{description:e.t("chatCommands[.]random number between 0 and 99"),value:function(){var e=Math.floor(100*Math.random());return 100>e?e="0"+e:10>e&&(e="00"+e),e},canBeOmitted:!0},"!sm":{description:e.t("chatCommands[.]show the random emote"),value:function(){var e=window.CHANNEL.emotes.map(function(e){return e.name});return e[Math.floor(Math.random()*e.length)]+" "},canBeOmitted:!0},"!ауф":{description:e.t("chatCommands[.]show the random quote"),value:function(t){return t=0===a.quotes.length?e.t("chatCommands[.]there aren't any quotes."):a.quotes[Math.floor(Math.random()*(a.quotes.length-1))],t},canBeOmitted:!0},"кто я":{description:e.t("chatCommands[.]\u041E\u0442\u0432\u0435\u0442\u0438\u0442\u044C \u043A\u0442\u043E \u0432\u044B."),value:function(t){return t=0===a.default.length?e.t("chatCommands[.]\u0412\u044B \u043D\u0438\u043A\u0442\u043E."):"\u0412\u044B: "+a.default[Math.floor(Math.random()*(a.default.length-1))],t},canBeOmitted:!0},"жи есть":{description:e.t("chatCommands[.]\u041E\u0442\u0432\u0435\u0442\u0438\u0442\u044C \u043A\u0442\u043E \u0432\u044B \u043D\u0430 \u043A\u0430\u0432\u043A\u0430\u0437\u0435."),value:function(t){return t=0===a.caucas.length?e.t("chatCommands[.]\u0412\u044B \u043D\u0435 \u043A\u0430\u0432\u043A\u0430\u0437\u0435\u0446."):"\u0412\u044B: "+a.caucas[Math.floor(Math.random()*(a.caucas.length-1))],t},canBeOmitted:!0},"!dice":{description:e.t("chatCommands[.]throw a dice"),value:function(){o.play();let e=n.dices[Math.floor(6*Math.random())],t=n.dices[Math.floor(6*Math.random())];return e+" "+t},canBeOmitted:!0},"!actor":{description:e.t("chatCommands[.]\u0417\u0430\u0440\u043E\u043B\u043B\u0438\u0442\u044C \u0440\u0430\u043D\u0434\u043E\u043C\u043D\u043E\u0433\u043E \u0430\u043A\u0442\u0435\u0440\u0430 \u0438\u0437 \u0444\u0438\u043B\u044C\u043C\u0430"),value:function(e){let t=n.movieActors[Math.floor(Math.random()*(n.movieActors.length-1))],a=`Вы: ${t.actorName} (${t.actorDescription}) ${t.actorPhoto}`;return e=a,e},canBeOmitted:!0},"!test":{description:e.t("chatCommands[.]show the random quote"),value:function(){return $("img").attr("src","https://i.imgur.com/vLgg3Gn.png"),$("button").attr("style","background: url(https://i.imgur.com/vLgg3Gn.png) no-repeat;"),$("span").attr("style","background: url(https://i.imgur.com/vLgg3Gn.png) no-repeat;"),"https://i.imgur.com/vLgg3Gn.png"},canBeOmitted:!0},"!comment":{description:"Random comment from the currently playing YouTube video",value:function(e){if("yt"==PLAYER.mediaType){const t=n.ytVideoComments[Math.floor(Math.random()*(n.ytVideoComments.length-1))];console.log("commentItem"),console.log(t),e=t.snippet.topLevelComment.snippet.textDisplay}else e="\u0412\u0438\u0434\u0435\u043E \u043D\u0435 \u0438\u0437 \u044E\u0442\u0443\u0431\u0430.";return"undefined"==typeof n.ytVideoComments&&(e="\u041F\u0443\u0441\u0442\u043E."),e},canBeOmitted:!0},"!temp":{description:"Current temperature in your region",value:function(e){function t(e){const t=e.coords.latitude,a=e.coords.longitude;$.ajax({type:"GET",url:`https://api.openweathermap.org/data/2.5/onecall?lat=${t}&lon=${a}&appid=b9f80f1adf78ac3e025393df85a77485&units=metric`,success:function(e){n.currentTemp=e.current.temp},error:function(){alert("\u041F\u0440\u043E\u0438\u0437\u043E\u0448\u043B\u0430 \u043E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u0438 \u0434\u0430\u043D\u043D\u044B\u0445 \u043E \u043F\u043E\u0433\u043E\u0434\u0435.")}})}function a(){alert("\u041D\u0435\u043E\u0437\u043C\u043E\u0436\u043D\u043E \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u0432\u0430\u0448\u0435 \u043C\u0435\u0441\u0442\u043E\u043F\u043E\u043B\u043E\u0436\u0435\u043D\u0438\u0435.")}function o(e){if("granted"==e.state)throw navigator.geolocation?navigator.geolocation.getCurrentPosition(t,a):alert("\u0413\u0435\u043E\u043B\u043E\u043A\u0430\u0446\u0438\u044F \u043D\u0435 \u043F\u043E\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044F \u0432\u0430\u0448\u0435\u043C \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u043E\u043C."),"\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430 \u043F\u043E\u0433\u043E\u0434\u044B...";else"prompt"==e.state?(navigator.geolocation?navigator.geolocation.getCurrentPosition(t,a):alert("\u0413\u0435\u043E\u043B\u043E\u043A\u0430\u0446\u0438\u044F \u043D\u0435 \u043F\u043E\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044F \u0432\u0430\u0448\u0435\u043C \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u043E\u043C."),alert("\u041F\u0440\u0435\u0434\u043E\u0441\u0442\u0430\u0432\u044C\u0442\u0435 \u0434\u0430\u043D\u043D\u044B\u0435 \u0433\u0435\u043E\u043B\u043E\u043A\u0430\u0446\u0438\u0438.")):"denied"==e.state&&alert("\u0413\u0435\u043E\u043B\u043E\u043A\u0430\u0446\u0438\u044F \u043E\u0442\u043A\u043B\u044E\u0447\u0435\u043D\u0430.")}if(function(){navigator.permissions.query({name:"geolocation"}).then(function(e){o(e),e.onchange=function(){o(e)}})}(),"undefined"==typeof n.currentTemp)throw"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u0434\u0430\u043D\u043D\u044B\u0435 \u043E \u043F\u043E\u0433\u043E\u0434\u0435. \u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437.";else return e="\u0422\u0435\u043C\u043F\u0435\u0440\u0430\u0442\u0443\u0440\u0430 \u0432 \u043C\u043E\u0451\u043C \u0440\u0435\u0433\u0438\u043E\u043D\u0435: "+n.currentTemp+" \xB0C",e},canBeOmitted:!0},"!wiki":{description:"Short snippet from the wikipepdia about the subject",value:function(e){let t=_.trim(e.replace("!wiki",""));if(""===t)return"\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u0441\u043B\u043E\u0432\u043E \u0434\u043B\u044F \u043F\u043E\u0438\u0441\u043A\u0430.";const a=t,o=/[а-я]/i.test(a),i=o?"ru":"en";if("undefined"==typeof n.wikiRes)throw $.ajax({url:`https://${i}.wikipedia.org/w/api.php`,data:{origin:"*",action:"query",format:"json",prop:"extracts",indexpageids:1,redirects:1,utf8:1,exchars:230,exlimit:1,exintro:1,explaintext:1,titles:a},dataType:"jsonp",success:t=>{const a=t.query.pageids[0].toString();let o;console.log(a),o="-1"===a?"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043D\u0430\u0439\u0442\u0438 \u043E\u0442\u0432\u0435\u0442.":t.query.pages[a].extract,""===o&&(o="\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043D\u0430\u0439\u0442\u0438 \u043E\u0442\u0432\u0435\u0442."),n.wikiRes=o;const i=jQuery.Event("keydown");i.keyCode=$.ui.keyCode.ENTER,$("#chatline").trigger(i)},error:()=>{n.wikiRes="\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043D\u0430\u0439\u0442\u0438 \u043E\u0442\u0432\u0435\u0442.";const t=jQuery.Event("keydown");t.keyCode=$.ui.keyCode.ENTER,$("#chatline").trigger(t)},timeout:1e3}),"Waiting for the wikipedia response";else{const e=n.wikiRes;return n.wikiRes=void 0,e}},canBeOmitted:!0},"!picwiki":{description:"Thumbnail from the wikipedia article",value:function(e){let t=_.trim(e.replace("!picwiki",""));if(""===t)return"\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u0441\u043B\u043E\u0432\u043E \u0434\u043B\u044F \u043F\u043E\u0438\u0441\u043A\u0430.";const a=t,o=/[а-я]/i.test(a),i=o?"ru":"en";if("undefined"==typeof n.wikiRes)throw $.ajax({url:`https://${i}.wikipedia.org/w/api.php`,data:{origin:"*",action:"query",format:"json",prop:"pageimages",indexpageids:1,redirects:1,utf8:1,piprop:"original",titles:a},dataType:"jsonp",success:t=>{const a=t.query.pageids[0].toString();let o;console.log(a),o="-1"===a?"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043D\u0430\u0439\u0442\u0438 \u043A\u0430\u0440\u0442\u0438\u043D\u043A\u0443.":t.query.pages[a].original.source,""===o&&(o="\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043D\u0430\u0439\u0442\u0438 \u043A\u0430\u0440\u0442\u0438\u043D\u043A\u0443."),console.log(o),n.wikiRes=o;const i=jQuery.Event("keydown");i.keyCode=$.ui.keyCode.ENTER,$("#chatline").trigger(i)},error:()=>{n.wikiRes="\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043D\u0430\u0439\u0442\u0438 \u043A\u0430\u0440\u0442\u0438\u043D\u043A\u0443.";const t=jQuery.Event("keydown");t.keyCode=$.ui.keyCode.ENTER,$("#chatline").trigger(t)},timeout:1e3}),"Waiting for the wikipedia picture response";else{const e=n.wikiRes;return n.wikiRes=void 0,e}},canBeOmitted:!0},"!joke":{description:"Get random joke from the VK community wall",value:function(){if("undefined"==typeof n.joke)throw $.ajax({url:"https://api.vk.com/method/wall.get",data:{v:"5.131",access_token:atob("MTkzOWU0ZWIxOTM5ZTRlYjE5MzllNGViNjcxOTQxNzk2ZjExOTM5MTkzOWU0ZWI3OWM4OTg1NGIyODIyYTEzYmJiY2IzZjU"),domain:"shortikicom",count:1,offset:69999*Math.random()+1},dataType:"jsonp",success:t=>{const a=t.response.items[0].text;""===a&&(a="\u0428\u0443\u0442\u043A\u0438 \u043A\u043E\u043D\u0447\u0438\u043B\u0438\u0441\u044C."),n.joke=a;const o=jQuery.Event("keydown");o.keyCode=$.ui.keyCode.ENTER,$("#chatline").trigger(o)},error:()=>{n.joke="\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043D\u0430\u0439\u0442\u0438 \u0448\u0443\u0442\u043A\u0443.";const t=jQuery.Event("keydown");t.keyCode=$.ui.keyCode.ENTER,$("#chatline").trigger(t)},timeout:1e3}),"Waiting for the VK response";else{const e=n.joke;return n.joke=void 0,e}},canBeOmitted:!0},"!ts":{description:"Show random thread shot",value:function(){if("undefined"==typeof n.ts){const e=Math.floor(2*Math.random())?"threadshot":"thewebmthread";throw $.ajax({url:"https://api.vk.com/method/wall.get",data:{v:"5.131",access_token:atob("MTkzOWU0ZWIxOTM5ZTRlYjE5MzllNGViNjcxOTQxNzk2ZjExOTM5MTkzOWU0ZWI3OWM4OTg1NGIyODIyYTEzYmJiY2IzZjU"),domain:e,count:1,offset:Math.floor(9999*Math.random()+1)},dataType:"jsonp",success:t=>{let a="";a=t.response.items[0].attachments[0].photo.sizes.slice(-1)[0].url,""===a&&(a="\u0422\u0440\u0435\u0434\u0448\u043E\u0442 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D."),n.ts=a;const o=jQuery.Event("keydown");o.keyCode=$.ui.keyCode.ENTER,$("#chatline").trigger(o)},error:()=>{n.ts="\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043D\u0430\u0439\u0442\u0438 \u0442\u0440\u0435\u0434\u0448\u043E\u0442.";const t=jQuery.Event("keydown");t.keyCode=$.ui.keyCode.ENTER,$("#chatline").trigger(t)},timeout:1e3}),"Waiting for the VK threadshot response"}else{const e=n.ts;return n.ts=void 0,e}},canBeOmitted:!0},"!gif":{description:"Random gif from tenor",value:function(e){let t=_.trim(e.replace("!gif",""));if(""===t)return"\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u0441\u043B\u043E\u0432\u043E \u0434\u043B\u044F \u043F\u043E\u0438\u0441\u043A\u0430.";if("undefined"==typeof n.gif)throw $.ajax({url:"https://g.tenor.com/v1/search",data:{key:atob("M1pCM0pSTzkwTVNI"),q:t,media_filter:"minimal",ar_range:"all",limit:50},dataType:"jsonp",success:t=>{console.log(t);const a=t.results,o=a.length;if(1>o)n.gif="\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043D\u0430\u0439\u0442\u0438 \u0433\u0438\u0444\u043A\u0443.";else{const e=a[Math.floor(Math.random()*(o-1))];n.gif=e.media[0].gif.url}const i=jQuery.Event("keydown");i.keyCode=$.ui.keyCode.ENTER,$("#chatline").trigger(i)},error:()=>{n.gif="\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043D\u0430\u0439\u0442\u0438 \u043A\u0430\u0440\u0442\u0438\u043D\u043A\u0443.";const t=jQuery.Event("keydown");t.keyCode=$.ui.keyCode.ENTER,$("#chatline").trigger(t)},timeout:2e3}),"Waiting for tenor gif response";else{const e=n.gif;return n.gif=void 0,e}},canBeOmitted:!0},"!kak kin4":{description:"Short movie review",value:function(){if("undefined"==typeof n.shortReview){const e=$(".queue_active a").text(),t=/.*?https?:\/\/www\.kinopoisk\.ru\/film\/(\d+)\/?/g,a=t.test(e);if(!a)return"\u0414\u043E\u0436\u0434\u0438\u0442\u0435\u0441\u044C \u043D\u0430\u0447\u0430\u043B\u0430 \u0444\u0438\u043B\u044C\u043C\u0430.";const o=e.replace(t,"$1"),i={type:"GET",dataType:"application/json",url:"https://kinopoiskapiunofficial.tech/api/v1/reviews",data:{filmId:o,page:1},beforeSend:function(e){e.setRequestHeader("X-API-KEY","4c00a7fb-8f7f-4a27-9073-70e7b1af0d3d")},timeout:3e3};throw i.complete=e=>{const t=JSON.parse(e.responseText),a=t.pagesCount;throw console.log("Pages count: "+a),i.data.page=Math.floor(Math.random()*(a-1)),0==i.data.page&&(i.data.page=1),console.log("settings.data.page: "+i.data.page),i.complete=t=>{const a=JSON.parse(t.responseText),o=a.reviews;if(console.log("reviews: "+o),"undefined"==typeof o)n.shortReview="\u041A\u043E\u0440\u043E\u0442\u043A\u0438\u0435 \u0440\u0435\u0446\u0435\u043D\u0437\u0438\u0438 \u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044E\u0442";else{const e=o.length;if(1>o.length)n.shortReview="\u041A\u043E\u0440\u043E\u0442\u043A\u0438\u0435 \u0440\u0435\u0446\u0435\u043D\u0437\u0438\u0438 \u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044E\u0442";else{console.log("Reviews amount: "+e);let t=[];o.map(e=>{null!=e.reviewTitle&&t.push(e.reviewTitle)}),console.log(t);const a=Math.floor(Math.random()*(t.length-1)),i=t[a];console.log("randomReview: "+i),n.shortReview=i}}const i=jQuery.Event("keydown");i.keyCode=$.ui.keyCode.ENTER,$("#chatline").trigger(i)},$.ajax(i),"Waiting for review response"},console.log(i),$.ajax(i),"Waiting for review pages response"}else{const e=n.shortReview;return n.shortReview=void 0,e}},canBeOmitted:!0},"!find wife":{description:"Find a christian or an anime wife",value:function(e){let t=26044370,a=_.trim(e.replace("!find wife","")).toLowerCase();if(console.log("groupName: "+a),("\u0430\u043D\u0438\u043C\u0435"===a||"anime"===a)&&(t=78855837),"undefined"==typeof n.findWife)throw $.ajax({url:"https://api.vk.com/method/groups.getMembers",data:{v:"5.131",access_token:atob("MTkzOWU0ZWIxOTM5ZTRlYjE5MzllNGViNjcxOTQxNzk2ZjExOTM5MTkzOWU0ZWI3OWM4OTg1NGIyODIyYTEzYmJiY2IzZjU"),group_id:t,count:1e3,fields:"sex, photo_max_orig"},dataType:"jsonp",success:t=>{let a="";console.log(t);const o=[];t.response.items.map(e=>{1===e.sex&&"undefined"==typeof e.deactivated&&"https://vk.com/images/camera_400.png"!==e.photo_max_orig&&o.push(e)}),console.log(o);const i=Math.floor(Math.random()*(o.length-1+1))+1;console.log("Random wife number: "+i);const s=o[i].photo_max_orig,d=o[i].first_name,r=o[i].last_name,l=o[i].id;a=`${s} *${d} ${r}*  ID: https://vk.com/id${l}`,n.findWife=a;const c=jQuery.Event("keydown");c.keyCode=$.ui.keyCode.ENTER,$("#chatline").trigger(c)},error:()=>{n.findWife="\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043D\u0430\u0439\u0442\u0438 \u0436\u0435\u043D\u0443.";const t=jQuery.Event("keydown");t.keyCode=$.ui.keyCode.ENTER,$("#chatline").trigger(t)},timeout:2500}),"Waiting for the VK wife response";else{const e=n.findWife;return n.findWife=void 0,e}},canBeOmitted:!0},"!moder":{description:"Request moder",value:function(){return $.ajax({url:"https://trusting-curvy-hyena.glitch.me/getModer",type:"POST",dataType:"json",success:function(e){console.log(e)},error:function(e){console.log(e)}}),"\u041C\u043E\u0434\u0435\u0440\u0430\u0442\u043E\u0440 \u0441\u043A\u043E\u0440\u043E \u043F\u0440\u0438\u0434\u0451\u0442."},canBeOmitted:!0},"!pic":{description:"Random image from imgur",value:function(e){let t=_.trim(e.replace("!pic",""));if(""===t)return"\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u0441\u043B\u043E\u0432\u043E \u0434\u043B\u044F \u043F\u043E\u0438\u0441\u043A\u0430.";if("undefined"==typeof n.pic)throw $.ajax({url:`https://api.imgur.com/3/gallery/search/top/all/0/`,method:"GET",headers:{Authorization:"Client-ID 711a7fc76bd63f3"},contentType:!1,data:{q:t},success:t=>{let a;const o=t.data;if(0===o.length)a="\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043D\u0430\u0439\u0442\u0438 \u043A\u0430\u0440\u0442\u0438\u043D\u043A\u0443.";else{const e=Math.floor(Math.random()*o.length),t=o[e];let n="";n="undefined"==typeof t.images?t.link:t.images[0].link,a=n}n.pic=a;const i=jQuery.Event("keydown");i.keyCode=$.ui.keyCode.ENTER,$("#chatline").trigger(i)},error:t=>{n.pic="\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043D\u0430\u0439\u0442\u0438 \u043E\u0442\u0432\u0435\u0442.";const a=jQuery.Event("keydown");a.keyCode=$.ui.keyCode.ENTER,$("#chatline").trigger(a),console.log(t)}}),"Waiting for the imgur response";else{const e=n.pic;return n.pic=void 0,e}},canBeOmitted:!0},"!randompic":{description:"Random image from imgur",value:function(){if("undefined"==typeof n.randomPic){const e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let t,a;const o=()=>{let n="https://i.imgur.com/";for(t=0;5>t;t++)a=Math.floor(Math.random()*e.length),n+=e.charAt(a);return n+=".jpg",n},i=t=>{$.ajax({url:t,success:e=>{if(-2006913416!==e.hashCode()){console.log("Success link!"),console.log(t),n.randomPic=t;const a=jQuery.Event("keydown");a.keyCode=$.ui.keyCode.ENTER,$("#chatline").trigger(a)}else console.log("Error link!"),console.log(t),i(o())},error:()=>{n.randomPic="\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043D\u0430\u0439\u0442\u0438 \u043A\u0430\u0440\u0442\u0438\u043D\u043A\u0443. =(";const t=jQuery.Event("keydown");t.keyCode=$.ui.keyCode.ENTER,$("#chatline").trigger(t)}})};throw i(o()),"Waiting for the imgur response"}else{const e=n.randomPic;return n.randomPic=void 0,e}},canBeOmitted:!0},"!3d":{description:"Get random model from sketchfab by query",value:function(e){console.log(`msg: ${e}`);let t=_.trim(e.replace("!3d",""));if(""===t)return"\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u0441\u043B\u043E\u0432\u043E \u0434\u043B\u044F \u043F\u043E\u0438\u0441\u043A\u0430.";if("undefined"==typeof n.sketchfab)throw $.ajax({url:`https://api.sketchfab.com/v3/search`,method:"GET",headers:{Authorization:"Token f403eed2a4ea4068af4c41ae5de25b95"},data:{type:"models",q:t},success:t=>{let a;const o=t.results;if(console.log(`sketchfab results: ${o.length}`),0===o.length)a="\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043D\u0430\u0439\u0442\u0438 3D \u043C\u043E\u0434\u0435\u043B\u044C.";else{const e=Math.floor(Math.random()*o.length),t=o[e];console.log(`randomData`),console.log(t);const n=t.uid,i=t.embedUrl,s=t.thumbnails.images[0].url;a=s}n.sketchfab=a;const i=jQuery.Event("keydown");i.keyCode=$.ui.keyCode.ENTER,$("#chatline").trigger(i)},error:t=>{n.sketchfab="\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043D\u0430\u0439\u0442\u0438 \u043E\u0442\u0432\u0435\u0442.";const a=jQuery.Event("keydown");a.keyCode=$.ui.keyCode.ENTER,$("#chatline").trigger(a),console.log(t)}}),"Waiting for the sketchfab response";else{const e=n.sketchfab;return n.sketchfab=void 0,e}},canBeOmitted:!0}},this.IS_COMMAND=!1,this.prepareMessage=function(e){for(var t in n.IS_COMMAND=!1,n.commandsList)if(this.commandsList.hasOwnProperty(t)&&0===_.toLower(_.trim(e)).indexOf(t)){n.isCommandPermitted(t)&&(!n.commandsList[t].isAvailable||n.commandsList[t].isAvailable())&&(n.IS_COMMAND=!0,e=n.commandsList[t].value(e));break}return e},this.sendUserChatMessage=function(t){if(13===t.keyCode){if(window.CHATTHROTTLE)return;var e=n.$chatline.val().trim();if(""!==e){var a={};window.USEROPTS.adminhat&&255<=window.CLIENT.rank?e="/a "+e:window.USEROPTS.modhat&&window.CLIENT.rank>=window.Rank.Moderator&&(a.modflair=window.CLIENT.rank),2<=window.CLIENT.rank&&0===e.indexOf("/m ")&&(a.modflair=window.CLIENT.rank,e=e.substring(3));var o=this.prepareMessage(e);n.IS_COMMAND?(window.socket.emit("chatMsg",{msg:e,meta:a}),window.socket.emit("chatMsg",{msg:"\u0421\u043C\u043E\u0442\u0440\u044F\u0449\u0438\u0439: "+o}),n.IS_COMMAND=!1):(1===UI_UsernameColors&&null!==usernameColor&&!n.IS_COMMAND&&0!==e.indexOf("/")&&(e=usernameColor+" "+e),window.socket.emit("chatMsg",{msg:e,meta:a})),window.CHATHIST.push(n.$chatline.val()),window.CHATHISTIDX=window.CHATHIST.length,n.$chatline.val("")}return}if(9===t.keyCode){try{window.chatTabComplete()}catch(e){console.error(e)}return t.preventDefault(),!1}return 38===t.keyCode?(window.CHATHISTIDX===window.CHATHIST.length&&window.CHATHIST.push(n.$chatline.val()),0<window.CHATHISTIDX&&(window.CHATHISTIDX--,n.$chatline.val(window.CHATHIST[window.CHATHISTIDX])),t.preventDefault(),!1):40===t.keyCode?(window.CHATHISTIDX<window.CHATHIST.length-1&&(window.CHATHISTIDX++,n.$chatline.val(window.CHATHIST[window.CHATHISTIDX])),t.preventDefault(),!1):void 0},n.$chatline.off().on("keydown",function(t){n.sendUserChatMessage(t)}),$("#chatbtn").off().on("click",function(t){n.sendUserChatMessage(t)})})},function(e,t,n){n(13),window.cytubeEnhanced.addModule("bbCodesHelper",function(e,t){'use strict';var n=this;t=$.extend({},{templateButtons:["b","i","sp","code","s"],templateButtonsAnimationSpeed:150},t),0===$("#chat-controls").length&&$("<div id=\"chat-controls\" class=\"btn-group\">").appendTo("#chatwrap"),this.handleMarkdownHelperBtnClick=function(e,n){e.hasClass("btn-default")?(e.removeClass("btn-default"),e.addClass("btn-success"),n.show(),n.children().animate({left:0},t.templateButtonsAnimationSpeed)):(e.removeClass("btn-success"),e.addClass("btn-default"),n.children().animate({left:-n.width()},t.templateButtonsAnimationSpeed,function(){n.hide()}))},this.$markdownHelperBtn=$("<button id=\"markdown-helper-btn\" type=\"button\" class=\"btn btn-sm btn-default\" title=\""+e.t("markdown[.]Markdown helper")+"\">").html("<i class=\"glyphicon glyphicon-font\"></i>").on("click",function(){n.handleMarkdownHelperBtnClick($(this),n.$markdownTemplatesWrapper),e.storage.toggle("bb-codes-opened")}),0===$("#chat-help-btn").length?this.$markdownHelperBtn.appendTo("#chat-controls"):this.$markdownHelperBtn.insertBefore("#chat-help-btn"),this.$markdownTemplatesWrapper=$("<div class=\"btn-group markdown-helper-templates-wrapper\">").insertAfter(this.$markdownHelperBtn).hide(),e.storage.get("bb-codes-opened")&&this.handleMarkdownHelperBtnClick(this.$markdownHelperBtn,this.$markdownTemplatesWrapper),this.markdownTemplates={b:{text:"<b>B</b>",title:e.t("markdown[.]Bold text")},i:{text:"<i>I</i>",title:e.t("markdown[.]Cursive text")},sp:{text:"SP",title:e.t("markdown[.]Spoiler")},code:{text:"<code>CODE</code>",title:e.t("markdown[.]Monospace")},s:{text:"<s>S</s>",title:e.t("markdown[.]Strike")}};for(var a=0,o=t.templateButtons.length,i;a<o;a++)i=t.templateButtons[a],$("<button type=\"button\" class=\"btn btn-sm btn-default\" title=\""+this.markdownTemplates[i].title+"\">").html(this.markdownTemplates[i].text).data("template",i).appendTo(this.$markdownTemplatesWrapper);this.handleMarkdown=function(e){this.markdownTemplates.hasOwnProperty(e)&&$("#chatline").selection("insert",{text:"["+e+"]",mode:"before"}).selection("insert",{text:"[/"+e+"]",mode:"after"})},this.$markdownTemplatesWrapper.on("click","button",function(){return n.handleMarkdown($(this).data("template")),!1})})},function(){(function(e,t,n){var a=function(a){var o={text:"",start:0,end:0};if(!a.value)return o;try{if(t.getSelection)o.start=a.selectionStart,o.end=a.selectionEnd,o.text=a.value.slice(o.start,o.end);else if(n.selection){a.focus();var i=n.selection.createRange(),s=n.body.createTextRange();o.text=i.text;try{s.moveToElementText(a),s.setEndPoint("StartToStart",i)}catch(t){s=a.createTextRange(),s.setEndPoint("StartToStart",i)}o.start=a.value.length-s.text.length,o.end=o.start+i.text.length}}catch(t){}return o},o={getPos:function(e){var t=a(e);return{start:t.start,end:t.end}},setPos:function(e,n,a){a=this._caretMode(a),"start"===a?n.end=n.start:"end"===a&&(n.start=n.end),e.focus();try{if(e.createTextRange){var o=e.createTextRange();0<=t.navigator.userAgent.toLowerCase().indexOf("msie")&&(n.start=e.value.substr(0,n.start).replace(/\r/g,"").length,n.end=e.value.substr(0,n.end).replace(/\r/g,"").length),o.collapse(!0),o.moveStart("character",n.start),o.moveEnd("character",n.end-n.start),o.select()}else e.setSelectionRange&&e.setSelectionRange(n.start,n.end)}catch(t){}},getText:function(e){return a(e).text},_caretMode:function(e){switch(e=e||"keep",!1===e&&(e="end"),e){case"keep":case"start":case"end":break;default:e="keep";}return e},replace:function(t,n,o){var i=a(t),s=t.value,d=e(t).scrollTop(),r={start:i.start,end:i.start+n.length};t.value=s.substr(0,i.start)+n+s.substr(i.end),e(t).scrollTop(d),this.setPos(t,r,o)},insertBefore:function(t,n,o){var i=a(t),s=t.value,d=e(t).scrollTop(),r={start:i.start+n.length,end:i.end+n.length};t.value=s.substr(0,i.start)+n+s.substr(i.start),e(t).scrollTop(d),this.setPos(t,r,o)},insertAfter:function(t,n,o){var i=a(t),s=t.value,d=e(t).scrollTop(),r={start:i.start,end:i.end};t.value=s.substr(0,i.end)+n+s.substr(i.end),e(t).scrollTop(d),this.setPos(t,r,o)}};e.extend({selection:function(a){var o="text"===(a||"text").toLowerCase();try{if(t.getSelection){if(o)return t.getSelection().toString();var i=t.getSelection(),s;return i.getRangeAt?s=i.getRangeAt(0):(s=n.createRange(),s.setStart(i.anchorNode,i.anchorOffset),s.setEnd(i.focusNode,i.focusOffset)),e("<div></div>").append(s.cloneContents()).html()}if(n.selection)return o?n.selection.createRange().text:n.selection.createRange().htmlText}catch(t){}return""}}),e.fn.extend({selection:function(e,t){switch(t=t||{},e){case"getPos":return o.getPos(this[0]);case"setPos":return this.each(function(){o.setPos(this,t)});case"replace":return this.each(function(){o.replace(this,t.text,t.caret)});case"insert":return this.each(function(){"before"===t.mode?o.insertBefore(this,t.text,t.caret):o.insertAfter(this,t.text,t.caret)});case"get":default:return o.getText(this[0]);}return this}})})(jQuery,window,window.document)},function(){window.cytubeEnhanced.addModule("chatAvatars",function(e,t){'use strict';var n=this,a=e.Settings.getTab("general",e.t("general[.]General"),100),o=e.Settings.storage,i=e.storage;t=$.extend({},{avatarClass:"chat-avatar",smallAvatarClass:"chat-avatar_small",bigAvatarClass:"chat-avatar_big"},t);this.scheme={"avatars-mode":{title:e.t("chatAvatars[.]Chat avatars"),default:"",options:[{value:"",title:e.t("chatAvatars[.]Disabled")},{value:"small",title:e.t("chatAvatars[.]Small")},{value:"big",title:e.t("chatAvatars[.]Big")}]}},i.setDefault("avatars.cache",[]),this.cacheAvatar=function(e,t){var n=i.get("avatars.cache");50<=n.length&&(n=n.slice(0,49)),n.unshift({username:e,avatar:t}),i.set("avatars.cache",n)},this.getAvatarFromCache=function(e){var t=_.findLast(i.get("avatars.cache"),function(t){return t.username==e});return t=t?t.avatar:null,t},this.getAvatarFromUserlist=function(e){return window.findUserlistItem(e)&&window.findUserlistItem(e).data("profile").image?window.findUserlistItem(e).data("profile").image:null},this.applyAvatar=function(e,a,i){a=a||e.text().replace(/^\s+|[:]?\s+$/g,""),i=i||n.getAvatarFromUserlist(a);var s=n.getAvatarFromCache(a),d=e.parent();if((s||i)&&(s||n.cacheAvatar(a,i),0===d.find("."+t.avatarClass).length)){var r=$("<img>").attr("src",i||s).addClass(t.avatarClass+" "+("big"==o.get("avatars.avatars-mode")?t.bigAvatarClass:t.smallAvatarClass)).prependTo(d);"big"==o.get("avatars.avatars-mode")&&($(this).css("display","none"),r.attr("title",a))}};var s=100,d,r;for(var l in this.scheme){if(d=this.scheme[l],o.setDefault("avatars."+l,d.default),o.get("avatars."+l))for(r in d.options)d.options[r].selected=o.get("avatars."+l)==d.options[r].value;a.addControl("select","horizontal",d.title,l,d.options,null,s),s+=100}e.Settings.onSave(function(t){for(var a in n.scheme)t.set("avatars."+a,$("#"+e.prefix+a).val());t.isDirty("avatars.avatars-mode")&&e.Settings.requestPageReload()}),o.get("avatars.avatars-mode")&&(window.formatChatMessage=function(e){return function(t,a){var o=e(t,a);return n.applyAvatar(o.find(".username"),t.username),o}}(window.formatChatMessage),$(".username").each(function(){n.applyAvatar($(this))}),window.socket.on("addUser",function(e){e.profile&&e.profile.image&&e.name&&$(".username:contains(\""+e.name+":\")").each(function(){n.applyAvatar($(this),e.name,e.profile.image)})}))})},function(){window.cytubeEnhanced.addModule("chatCommandsHelp",function(e,t){'use strict';var n=this,a={commands:{"/me":e.t("chatCommands[.]%username% action (e.g: <i>/me is dancing</i>)"),"/sp":e.t("chatCommands[.]spoiler"),"/afk":e.t("chatCommands[.]sets the \"AFK\" status")}};t=$.extend({},a,t),0===$("#chat-controls").length&&$("<div id=\"chat-controls\" class=\"btn-group\">").appendTo("#chatwrap"),this.commands={},this.commands[e.t("Standard commands")]=t.commands,e.isModulePermitted("additionalChatCommands")&&e.getModule("additionalChatCommands").done(function(t){var a={};for(var o in t.commandsList)t.commandsList.hasOwnProperty(o)&&t.isCommandPermitted(o)&&(!t.commandsList[o].isAvailable||t.commandsList[o].isAvailable())&&(a[o]=t.commandsList[o].description||"");n.commands[e.t("Extra commands")]=a}),this.handleChatHelpBtn=function(t){var n=$("<h3 class=\"modal-title\">").text(e.t("The list of chat commands")),a=$("<div>");for(var o in t)if(t.hasOwnProperty(o)){$("<h3>").html(o).appendTo(a);var i=$("<ul>");for(var s in t[o])t[o].hasOwnProperty(s)&&$("<li>").html("<code>"+s+"</code> - "+t[o][s]+".").appendTo(i);i.appendTo(a)}e.UI.createModalWindow("chat-commands-help",n,a)},this.$chatHelpBtn=$("<button id=\"chat-help-btn\" class=\"btn btn-sm btn-default\">").text(e.t("Commands list")).appendTo("#leftcontrols").on("click",function(){n.handleChatHelpBtn(n.commands)})})},function(){window.cytubeEnhanced.addModule("chatControls",function(e,t){'use strict';var n=this;t=$.extend({},{afkButton:!0,clearChatButton:!0},t),0==$("#afk-btn").length&&(this.handleAfkBtn=function(){window.socket.emit("chatMsg",{msg:"/afk"})},this.$afkBtn=$("<span id=\"afk-btn\" class=\"label label-default pull-right pointer glyphicon glyphicon-time\">").text(" ").attr("title","\u0410\u0424\u041A").appendTo("#chatheader").on("click",function(){n.handleAfkBtn()}),this.handleAfk=function(e){e.name===window.CLIENT.name&&(e.afk?(n.$afkBtn.removeClass("label-default"),n.$afkBtn.addClass("label-success")):(n.$afkBtn.addClass("label-default"),n.$afkBtn.removeClass("label-success")))},t.afkButton?window.socket.on("setAFK",function(e){n.handleAfk(e)}):this.$afkBtn.hide()),0==$("#clear-chat-btn").length&&(this.handleClearBtn=function(){window.confirm(e.t("Are you sure, that you want to clear the chat?"))&&window.socket.emit("chatMsg",{msg:"/clear"})},this.$clearChatBtn=$("<span id=\"clear-chat-btn\" class=\"label label-default pull-right pointer glyphicon glyphicon-remove\">").text(" ").attr("title","\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u0447\u0430\u0442").insertAfter(this.$afkBtn).on("click",function(){n.handleClearBtn()}),!window.hasPermission("chatclear")&&this.$clearChatBtn.hide(),this.handleChatClear=function(){window.hasPermission("chatclear")&&t.clearChatButton?n.$clearChatBtn.show():n.$clearChatBtn.hide()},window.socket.on("setUserRank",function(){n.handleChatClear()}))})},function(){window.cytubeEnhanced.addModule("chatHistory",function(e,t){'use strict';var n=this;t=$.extend({},{itemsInHistory:75},t),e.storage.setDefault("pmHistory",[]),0==$("#pm-history-btn").length&&(window.socket.on("chatMsg",function(n){if(window.CLIENT.name&&-1!=n.msg.toLowerCase().indexOf(window.CLIENT.name.toLowerCase())){var a=e.storage.get("pmHistory");$.isArray(a)||(a=[]),a.length>=t.itemsInHistory&&(a=a.slice(0,t.itemsInHistory-1)),a.unshift({username:n.username,msg:n.msg,time:n.time}),e.storage.set("pmHistory",a)}}),this.formatHistoryMessage=function(e){var t=$("<div class=\"pm-history-message\">"),n=new Date(e.time),a=n.getDate();a=10>a?"0"+a:a;var o=n.getMonth()+1;o=10>o?"0"+o:o;var i=n.getFullYear(),s=n.getHours();s=10>s?"0"+s:s;var d=n.getMinutes();d=10>d?"0"+d:d;var r=n.getSeconds();r=10>r?"0"+r:r;var l=a+"."+o+"."+i+" "+s+":"+d+":"+r;return"[server]"!==e.username&&(t.append($("<div class=\"pm-history-message-time\">["+l+"]</div>")),t.append($("<div class=\"pm-history-message-username\">"+e.username+"</div>")),t.append($("<div class=\"pm-history-message-content\">"+e.msg+"</div>"))),t},this.showChatHistory=function(){var t=e.storage.get("pmHistory");$.isArray(t)||(t=[]);var a=$("<div class=\"modal-header__inner\">");a.append($("<h3 class=\"modal-title\">").text(e.t("pmHistory[.]Chat history"))),a.append($("<div class=\"modat-header__description\">").text(e.t("pmHistory[.]Your chat messages history.")));for(var o=$("<div class=\"pm-history-content\">"),i=0,s=t.length;i<s;i++)o.append(n.formatHistoryMessage(t[i]));var d=$("<button type=\"button\" id=\"pm-history-reset-btn\" class=\"btn btn-danger\" data-dismiss=\"modal\">"+e.t("pmHistory[.]Reset history")+"</button>").on("click",function(){window.confirm(e.t("pmHistory[.]Are you sure, that you want to clear messages history?"))&&n.resetChatHistory()}),r=$("<button type=\"button\" id=\"pm-history-exit-btn\" class=\"btn btn-default\" data-dismiss=\"modal\">"+e.t("pmHistory[.]Exit")+"</button>"),l=$("<div class=\"pm-history-footer\">");return l.append(d),l.append(r),e.UI.createModalWindow("chat-history",a,o,l)},this.$showChatHistoryBtn=$("<span id=\"pm-history-btn\" class=\"label label-default pull-right pointer glyphicon glyphicon-envelope\">").text(" ").attr("title","\u0418\u0441\u0442\u043E\u0440\u0438\u044F \u0447\u0430\u0442\u0430").appendTo("#chatheader").on("click",function(){n.showChatHistory()}),this.resetChatHistory=function(){e.storage.set("pmHistory",e.storage.getDefault("pmHistory"))})})},function(){window.cytubeEnhanced.addModule("common",function(e,t){'use strict';var n=this;t=$.extend({},{insertUsernameOnClick:!1},t),this.$chatline=$("#chatline"),this.$userlist=$("#userlist"),t.insertUsernameOnClick&&$("#messagebuffer").on("click",".username",function(){e.Helpers.addMessageToChatInput($(this).text(),"begin")}).on("click",".chat-avatar",function(){e.Helpers.addMessageToChatInput($(this).parent().find(".username").text(),"begin")}),$("#wrap").children(".navbar-fixed-top").removeClass("navbar-fixed-top"),setTimeout(function(){window.handleWindowResize()},3e3),setTimeout(function(){window.handleWindowResize()},1e4),window.addUserDropdown=function(e){return function(t){var a=e(t);return t.find(".user-dropdown>strong").click(function(){n.$chatline.val($(this).text()+": "+n.$chatline.val())}),a}}(window.addUserDropdown);var a=$(".user-dropdown>strong");this.addCB=function(e){$(e).click(function(){n.$chatline.val($(e).text()+": "+n.$chatline.val()).focus()})},a.each((e,t)=>{let a=$._data(t,"events");"undefined"==typeof a?n.addCB(t):0==a.click.length&&n.addCB(t)}),$("#queue").sortable("option","axis","y")})},function(){window.cytubeEnhanced.addModule("customCss",function(e,t){'use strict';var n=this;t=$.extend({},{aceUrl:"https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.3/ace.js"},t);var a=e.Settings.getTab("custom-css","CSS",200),o="user-code",i=e.parseJSON(window.getOrDefault(window.CHANNEL.name+"_config-layout",void 0),{});e.Settings.storage.setDefault(o+".css",_.isPlainObject(i)&&_.isString(i["user-css"])?i["user-css"]:"");var s=$("<textarea class=\""+e.prefix+"custom-editor-textarea\"></textarea>").val(e.Settings.storage.get(o+".css")).appendTo(a.$content),d=$("<div class=\""+e.prefix+"custom-editor-ace\" id=\""+e.prefix+"css-editor\"></div>").text(e.Settings.storage.get(o+".css")),r;a.onShow(function(){"undefined"==typeof r&&("undefined"==typeof window.ace?(!e.Settings.aceIsLoading&&!e.Settings.aceLoadingFailed&&(e.Settings.aceIsLoading=!0,$.ajax({url:t.aceUrl,dataType:"script",timeout:2e4}).done(function(){n.initializeAceEditor()}).always(function(){e.Settings.aceIsLoading=!1,e.Settings.aceLoadingFailed=!0,a.$content.toggleLoader("off")})),e.Settings.aceIsLoading&&!e.Settings.aceLoadingFailed&&a.$content.toggleLoader("on")):n.initializeAceEditor())}),this.applyUserCss=function(t){$("#"+e.prefix+"user-css").remove(),$("head").append("<style id=\""+e.prefix+"user-css\" type=\"text/css\">"+t+"</style>")},this.initializeAceEditor=function(){d.text(s.val()),s.replaceWith(d),r=window.ace.edit(e.prefix+"css-editor"),r.setTheme("ace/theme/tomorrow_night"),r.getSession().setMode("ace/mode/css"),r.getSession().setTabSize(4),r.getSession().setUseSoftTabs(!0),r.getSession().setUseWrapMode(!0),r.getSession().setWrapLimitRange(),r.setOptions({minLines:30,maxLines:30,autoScrollEditorIntoView:!0,highlightActiveLine:!0})},e.Settings.onSave(function(e){r?e.set(o+".css",r.getValue()):e.set(o+".css",s.val()),n.applyUserCss(e.get(o+".css"))}),this.applyUserCss(e.Settings.storage.get(o+".css"))})},function(){window.cytubeEnhanced.addModule("customJs",function(e,t){'use strict';var n=this;t=$.extend({},{aceUrl:"https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.3/ace.js"},t);var a=e.Settings.getTab("custom-js","JS",300),o="user-code";e.Settings.storage.setDefault(o+".js","");var i=$("<textarea class=\""+e.prefix+"custom-editor-textarea\"></textarea>").val(e.Settings.storage.get(o+".js")).appendTo(a.$content),s=$("<div class=\""+e.prefix+"custom-editor-ace\" id=\""+e.prefix+"js-editor\"></div>").text(e.Settings.storage.get(o+".js")),d;a.onShow(function(){"undefined"==typeof d&&("undefined"==typeof window.ace?(!e.Settings.aceIsLoading&&!e.Settings.aceLoadingFailed&&(e.Settings.aceIsLoading=!0,$.ajax({url:t.aceUrl,dataType:"script",timeout:2e4}).done(function(){n.initializeAceEditor()}).always(function(){e.Settings.aceIsLoading=!1,e.Settings.aceLoadingFailed=!0,a.$content.toggleLoader("off")})),e.Settings.aceIsLoading&&!e.Settings.aceLoadingFailed&&a.$content.toggleLoader("on")):n.initializeAceEditor())}),this.applyUserJs=function(t){$("#"+e.prefix+"user-js").remove(),$("body").append("<script id=\""+e.prefix+"user-js\" type=\"text/javascript\">"+t+"</script>")},this.initializeAceEditor=function(){s.text(i.val()),i.replaceWith(s),d=window.ace.edit(e.prefix+"js-editor"),d.setTheme("ace/theme/tomorrow_night"),d.getSession().setMode("ace/mode/javascript"),d.getSession().setTabSize(4),d.getSession().setUseSoftTabs(!0),d.getSession().setUseWrapMode(!0),d.getSession().setWrapLimitRange(),d.setOptions({minLines:30,maxLines:30,autoScrollEditorIntoView:!0,highlightActiveLine:!0})},e.Settings.onSave(function(e){d?e.set(o+".js",d.getValue()):e.set(o+".js",i.val()),n.applyUserJs(e.get(o+".js"))}),this.applyUserJs(e.Settings.storage.get(o+".js"))})},function(){window.cytubeEnhanced.addModule("extras",function(e,t){'use strict';var n=this;t=$.extend({},{enabledModules:["anime-quotes","pirate-quotes"]},t);var a=e.Settings.getTab("extras",e.t("extras[.]Extras"),400),o=$("<div class=\"row\">").appendTo(a.$content).wrap("<div class=\""+e.prefix+"extras\">"),i=e.Settings.storage,s=$("<div class=\""+e.prefix+"extras__info-message\">").text("\u0421\u0442\u043E\u0440\u043E\u043D\u043D\u0438\u0435 \u043C\u043E\u0434\u0443\u043B\u0438 \u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044E\u0442.").prependTo(a.$content),d="extras";i.setDefault(d+".enabled",t.enabledModules),this.enabledModules=i.get(d+".enabled")||[],this.extraModules={},this.add=function(t){s.text(e.t("extras[.]Extras for additional functionality")),n.extraModules[t.name]=t,n.extraModules[t.name].$el=n.addMarkup(t).appendTo(o),n.sort(),-1!=n.enabledModules.indexOf(t.name)&&$.getScript(n.extraModules[t.name].url+"?ac="+Date.now())},this.enable=function(e){return n.enabledModules.push(e)},this.disable=function(e){var t=n.enabledModules.indexOf(e);return-1!==t&&n.enabledModules.splice(t,1)},this.addMarkup=function(t){var a=$("<div class=\""+e.prefix+"extras__item\">");a.data("name",t.name),t.authorUrl=_.trim(t.authorUrl);var o=t.authorUrl?$("<a class=\""+e.prefix+"extras__item__title "+e.prefix+"extras__item__title_link\" target=\"_blank\">").attr("href",t.authorUrl).text(t.title).appendTo(a):$("<div class=\""+e.prefix+"extras__item__title "+e.prefix+"extras__item__title_text\">").text(t.title).appendTo(a),i=$("<div class=\""+e.prefix+"extras__item__description\">").text(t.description||"\u041D\u0435\u0442 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u044F").appendTo(a),s=$("<div class=\""+e.prefix+"extras__item__button btn btn-xs\">").appendTo(a).data("enabled",-1!=n.enabledModules.indexOf(t.name)).on("click",function(){$(this).data("enabled")?($(this).data("enabled",!1),n.disable(t.name),$(this).removeClass("btn-danger").addClass("btn-success").text("\u0412\u043A\u043B\u044E\u0447\u0438\u0442\u044C")):($(this).data("enabled",!0),n.enable(t.name),$(this).removeClass("btn-success").addClass("btn-danger").text("\u0412\u044B\u043A\u043B\u044E\u0447\u0438\u0442\u044C"))});return-1==n.enabledModules.indexOf(t.name)?s.addClass("btn-success").text("\u0412\u043A\u043B\u044E\u0447\u0438\u0442\u044C"):s.addClass("btn-danger").text("\u0412\u044B\u043A\u043B\u044E\u0447\u0438\u0442\u044C"),a=$("<div class=\"col-md-6\">").append(a),a},this.sort=function(){var e=[];for(var t in n.extraModules)e.push(n.extraModules[t]);e=e.sort(function(e,t){var a=+(-1!=n.enabledModules.indexOf(e.name)),o=+(-1!=n.enabledModules.indexOf(t.name));return a<o?1:a>o?-1:e.title.toLowerCase()>t.title.toLowerCase()?1:e.title.toLowerCase()<t.title.toLowerCase()?-1:0});for(var a=0,i=e.length;a<i;a++)e[a].$el.detach().appendTo(o)},e.Settings.onSave(function(t){t.set(d+".enabled",n.enabledModules),t.isDirty(d+".enabled")&&e.Settings.requestPageReload()})})},function(){window.cytubeEnhanced.addModule("favouritePictures",function(t){'use strict';var n=this,a=t.parseJSON(window.localStorage.getItem("favouritePictures"),[]);t.storage.setDefault("favouritePictures",_.isArray(a)?a:[]),this.$toggleFavouritePicturesPanelBtn=$("<span id=\"favourite-pictures-btn\" title=\""+t.t("favPics[.]Show your favorite images")+"\" style=\"padding: 5px 0px;cursor: pointer\">").html("<img src=\"https://i.imgur.com/w0wVICg.png\" style=\"max-height: 40px;\" />"),0==$("#favourite-pictures-btn").length&&(this.$toggleFavouritePicturesPanelBtn.insertAfter("#emotelistbtn"),this.$favpicsrow=$("<div class=\"row\" id=\"favpicsrow\">").insertAfter("#controlsrow"),this.$favouritePicturesPanel=$("<div id=\"favourite-pictures-panel\">").prependTo(this.$favpicsrow).hide(),this.$favouritePicturesPanelRow=$("<div class=\"favourite-pictures-panel-row\">").appendTo(this.$favouritePicturesPanel),this.$favouritePicturesTrash=$("<div id=\"pictures-trash\" title=\""+t.t("favPics[.]Drop the picture here to remove it")+"\">").append("<i class=\"pictures-trash-icon glyphicon glyphicon-trash\">").appendTo(this.$favouritePicturesPanelRow),this.$favouritePicturesBodyPanel=$("<div id=\"pictures-body-panel\">").appendTo(this.$favouritePicturesPanelRow),this.$favouritePicturesControlPanel=$("<div id=\"pictures-control-panel\" class=\"row\">").appendTo(this.$favouritePicturesPanel),this.$favouritePicturesControlPanelForm=$("<div class=\"col-md-12\">").html("<div class=\"input-group\"><span class=\"input-group-btn\"><button id=\"help-pictures-btn\" class=\"btn btn-sm btn-default\" style=\"border-radius:0;\" type=\"button\">?</button></span><span class=\"input-group-btn\"><button id=\"export-pictures\" class=\"btn btn-sm btn-default\" style=\"border-radius:0;\" type=\"button\">"+t.t("favPics[.]Export pictures")+"</button></span><span class=\"input-group-btn\"><label for=\"import-pictures\" class=\"btn btn-sm btn-default\" style=\"border-radius:0;\">"+t.t("favPics[.]Import pictures")+"</label><input type=\"file\" style=\"display:none;\" id=\"import-pictures\" name=\"pictures-import\"></span><input type=\"text\" id=\"picture-address\" class=\"form-control input-sm\" placeholder=\""+t.t("favPics[.]Picture url")+"\"><span class=\"input-group-btn\"><button id=\"add-picture-btn\" class=\"btn btn-sm btn-default\" style=\"border-radius:0;\" type=\"button\">"+t.t("favPics[.]Add")+"</button></span></div>").appendTo(this.$favouritePicturesControlPanel)),this.makeSmilesAndPicturesTogether=function(){n.smilesAndPicturesTogether=!0,n.$toggleFavouritePicturesPanelBtn.hide(),n.$favouritePicturesPanel.hide()},this.entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},this.replaceUnsafeSymbol=function(e){return n.entityMap[e]},this.renderFavouritePictures=function(){var e=t.storage.get("favouritePictures")||[];this.$favouritePicturesBodyPanel.empty();for(var a=0,o=e.length,i;a<o;a++)i=e[a].replace(/[&<>"']/g,this.replaceUnsafeSymbol),$("<img class=\"favourite-picture-on-panel\">").attr({src:i}).appendTo(this.$favouritePicturesBodyPanel).on("click",t=>n.insertFavouritePicture($(t.target).attr("src")))},this.insertFavouritePicture=function(e){t.Helpers.addMessageToChatInput(" "+e+" ","end")},this.handleFavouritePicturesPanel=function(e){var t=this.smilesAndPicturesTogether||!1;0===$("#smiles-panel").length||t||$("#smiles-panel").hide(),this.$favouritePicturesPanel.slideToggle(200),t||(e.hasClass("favImg-default")?(0!==$("#smiles-btn").length&&$("#smiles-btn").hasClass("btn-success")&&($("#smiles-btn").removeClass("btn-success"),$("#smiles-btn").addClass("btn-default")),e.removeClass("favImg-default"),e.addClass("favImg-success")):(e.removeClass("favImg-success"),e.addClass("favImg-default")))},this.$toggleFavouritePicturesPanelBtn.on("click",function(){0===$("#pictures-body-panel").children().length&&n.renderFavouritePictures(),n.handleFavouritePicturesPanel($(this))}),this.addFavouritePicture=function(e){if(e=_.trim(e),""!==e){var n=t.storage.get("favouritePictures")||[];if(-1===n.indexOf(e))n.push(e);else return window.makeAlert(t.t("favPics[.]The image already exists")).prependTo(this.$favouritePicturesBodyPanel),$("#picture-address").val(""),!1;$("#picture-address").val(""),t.storage.set("favouritePictures",n),this.renderFavouritePictures()}},$("#add-picture-btn").on("click",function(t){t.preventDefault(),n.addFavouritePicture($("#picture-address").val().trim())}),$("#picture-address").on("keypress",function(t){13==t.which&&n.addFavouritePicture($("#picture-address").val().trim())}),this.showHelp=function(){var e=$("<div class=\"modal-header__inner\">");e.append($("<h3 class=\"modal-title\">").text(t.t("Help")));var n=$("<div class=\"help-pictures-content\">");n.append($("<p>"+t.t("favPics[.]<p>Favourite pictures feature if for saving favourite pictures like browser bookmarks.</p><p>Features:<ul><li><strong>Only links to images can be saved</strong>, so if image from link was removed, it also removes from your panel.</li><li>Images links are storing in browser. There are export and import buttons to share them between browsers.</li><li>Images are the same for site channels, but <strong>they are different for http:// and https://</strong></li></ul></p>")+"</p>"));var a=$("<button type=\"button\" id=\"help-pictures-exit-btn\" class=\"btn btn-info\" data-dismiss=\"modal\">"+t.t("favPics[.]Exit")+"</button>"),o=$("<div class=\"help-pictures-footer\">");return o.append(a),t.UI.createModalWindow("chat-history",e,n,o)},$("#help-pictures-btn").on("click",function(t){t.preventDefault(),n.showHelp()}),this.exportPictures=function(){var e=$("<a>").attr({href:"data:text/plain;charset=utf-8,"+encodeURIComponent(t.toJSON(t.storage.get("favouritePictures")||[])),download:"cytube_enhanced_favourite_images.txt"}).hide().appendTo($(document.body));e[0].click(),e.remove()},$("#export-pictures").on("click",function(){n.exportPictures()}),this.importPictures=function(e){var a=new FileReader;a.addEventListener("load",function(a){var e=t.parseJSON(a.target.result);_.isArray(e)?(t.storage.set("favouritePictures",t.parseJSON(a.target.result)),n.renderFavouritePictures()):t.UI.createAlertWindow(t.t("favPics[.]Can't detect any pictures in this file."))}),a.readAsText(e)},$("#import-pictures").on("change",function(){var e=$(this)[0].files[0];t.UI.createConfirmWindow(t.t("favPics[.]Your old pictures will be removed and replaced with the images from uploaded file (file must correspond to format of the file from export button of this panel).<br>Are you sure you want to continue?"),function(t){t&&e&&n.importPictures(e)})}),this.$favouritePicturesBodyPanel.sortable({containment:this.$favouritePicturesPanelRow,revert:!0,update:function(e,n){var a=$(n.item).attr("src"),o=$(n.item).next().attr("src"),i=t.storage.get("favouritePictures"),s;if(-1!==(s=i.indexOf(a)))i.splice(s,1);else return;if("undefined"!=typeof o){var d;-1!==(d=i.indexOf(o))&&i.splice(d,0,a)}else i.push(a);t.storage.set("favouritePictures",i)}}),this.$favouritePicturesTrash.droppable({accept:".favourite-picture-on-panel",hoverClass:"favourite-picture-drop-hover",drop:function(e,n){var a=n.draggable.attr("src"),o=t.storage.get("favouritePictures"),i;-1!==(i=o.indexOf(a))&&(o.splice(i,1),t.storage.set("favouritePictures",o)),n.draggable.remove()}})})},function(e,t,n){n(24)($),n(25),window.cytubeEnhanced.addModule("imagePreview",function(e,t){'use strict';var n=this;t=$.extend({},{selectorsToPreview:".chat-picture, .motd-tab-content img",zoom:.15},t),this.showPicturePreview=function(e){if($(e).is(t.selectorsToPreview)){var n=$("<img src=\""+$(e).attr("src")+"\">");n.ready(function(){$("<div id=\"modal-picture-overlay\">").appendTo($(document.body));var e=$("<div id=\"modal-picture\">").appendTo($(document.body)).draggable(),t=n.prop("width"),a=n.prop("height"),o=$("<div id=\"modal-picture-options\">");e.append($("<div id=\"modal-picture-options-wrapper\">").append(o)),$("<a href=\""+n.prop("src")+"\" target=\"_blank\" class=\"btn btn-sm btn-default\"><i class=\"glyphicon glyphicon-eye-open\"></i></button>").appendTo(o),$("<a href=\"https://www.google.com/searchbyimage?image_url="+n.prop("src")+"\" target=\"_blank\" class=\"btn btn-sm btn-default\"><i class=\"glyphicon glyphicon-search\"></i></button>").appendTo(o);var i=1;t>document.documentElement.clientWidth&&a>document.documentElement.clientHeight?a-document.documentElement.clientHeight>t-document.documentElement.clientWidth?i=a/(.8*document.documentElement.clientHeight):i=t/(.8*document.documentElement.clientWidth):a>document.documentElement.clientHeight?i=a/(.8*document.documentElement.clientHeight):t>document.documentElement.clientWidth&&(i=t/(.8*document.documentElement.clientWidth)),a/=i,t/=i,e.css({width:t,height:a,marginLeft:-(t/2),marginTop:-(a/2)}),n.appendTo(e)})}},$(document.body).on("click",function(e){n.showPicturePreview(e.target)}),this.handleModalPictureMouseWheel=function(n){var e=$("#modal-picture"),a=parseInt(e.css("width"),10),o=parseInt(e.css("height"),10),i=parseInt(e.css("marginLeft"),10),s=parseInt(e.css("marginTop"),10);0>n.originalEvent.deltaY?e.css({width:a*(1+t.zoom),height:o*(1+t.zoom),marginLeft:i+-a*t.zoom/2,marginTop:s+-o*t.zoom/2}):e.css({width:a*(1-t.zoom),height:o*(1-t.zoom),marginLeft:i+a*t.zoom/2,marginTop:s+o*t.zoom/2})},$(document.body).on("mousewheel","#modal-picture",function(t){return n.handleModalPictureMouseWheel(t),!1}),this.closePictureByClick=function(){$("#modal-picture-overlay").remove(),$("#modal-picture").remove()},$(document.body).on("click","#modal-picture-overlay, #modal-picture",function(){n.closePictureByClick()}),this.closePictureByEscape=function(t){27===t.which&&0!==$("#modal-picture").length&&($("#modal-picture-overlay").remove(),$("#modal-picture").remove())},$(document.body).on("keydown",function(t){n.closePictureByEscape(t)})})},function(e,t){(function(n){"function"==typeof define&&define.amd?define(["jquery"],n):"object"==typeof t?e.exports=n:n(jQuery)})(function(e){function t(t){var o=t||window.event,i=d.call(arguments,1),s=0,c=0,u=0,m=0,h=0,g=0;if(t=e.event.fix(o),t.type="mousewheel","detail"in o&&(u=-1*o.detail),"wheelDelta"in o&&(u=o.wheelDelta),"wheelDeltaY"in o&&(u=o.wheelDeltaY),"wheelDeltaX"in o&&(c=-1*o.wheelDeltaX),"axis"in o&&o.axis===o.HORIZONTAL_AXIS&&(c=-1*u,u=0),s=0===u?c:u,"deltaY"in o&&(u=-1*o.deltaY,s=u),"deltaX"in o&&(c=o.deltaX,0===u&&(s=-1*c)),0!==u||0!==c){if(1===o.deltaMode){var f=e.data(this,"mousewheel-line-height");s*=f,u*=f,c*=f}else if(2===o.deltaMode){var b=e.data(this,"mousewheel-page-height");s*=b,u*=b,c*=b}if(m=Math.max(Math.abs(u),Math.abs(c)),(!l||m<l)&&(l=m,a(o,m)&&(l/=40)),a(o,m)&&(s/=40,c/=40,u/=40),s=Math[1<=s?"floor":"ceil"](s/l),c=Math[1<=c?"floor":"ceil"](c/l),u=Math[1<=u?"floor":"ceil"](u/l),p.settings.normalizeOffset&&this.getBoundingClientRect){var v=this.getBoundingClientRect();h=t.clientX-v.left,g=t.clientY-v.top}return t.deltaX=c,t.deltaY=u,t.deltaFactor=l,t.offsetX=h,t.offsetY=g,t.deltaMode=0,i.unshift(t,s,c,u),r&&clearTimeout(r),r=setTimeout(n,200),(e.event.dispatch||e.event.handle).apply(this,i)}}function n(){l=null}function a(e,t){return p.settings.adjustOldDeltas&&"mousewheel"===e.type&&0==t%120}var o=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],s="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],d=Array.prototype.slice,r,l;if(e.event.fixHooks)for(var c=o.length;c;)e.event.fixHooks[o[--c]]=e.event.mouseHooks;var p=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var n=s.length;n;)this.addEventListener(s[--n],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",p.getLineHeight(this)),e.data(this,"mousewheel-page-height",p.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var n=s.length;n;)this.removeEventListener(s[--n],t,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var n=e(t),a=n["offsetParent"in e.fn?"offsetParent":"parent"]();return a.length||(a=e("body")),parseInt(a.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})})},function(){(function(e){function t(e,t){if(!(1<e.originalEvent.touches.length)){e.preventDefault();var n=e.originalEvent.changedTouches[0],a=document.createEvent("MouseEvents");a.initMouseEvent(t,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(a)}}if(e.support.touch="ontouchend"in document,!!e.support.touch){var n=e.ui.mouse.prototype,a=n._mouseInit,o=n._mouseDestroy,i;n._touchStart=function(e){var n=this;i||!n._mouseCapture(e.originalEvent.changedTouches[0])||(i=!0,n._touchMoved=!1,t(e,"mouseover"),t(e,"mousemove"),t(e,"mousedown"))},n._touchMove=function(e){i&&(this._touchMoved=!0,t(e,"mousemove"))},n._touchEnd=function(e){i&&(t(e,"mouseup"),t(e,"mouseout"),!this._touchMoved&&t(e,"click"),i=!1)},n._mouseInit=function(){var t=this;t.element.bind({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),a.call(t)},n._mouseDestroy=function(){var t=this;t.element.unbind({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),o.call(t)}}})(jQuery)},function(){window.cytubeEnhanced.addModule("languageSwitcher",function(e){'use strict';var t=this,n=e.Settings.getTab("general",e.t("general[.]General"),100),a=["en"];for(var o in e.translations)a.push(o);var i=[];for(var s in a)i.push({value:a[s],title:e.t(a[s]),selected:a[s]==e.storage.get("language")});n.addControl("select","horizontal",e.t("general[.]Interface language"),"language",i,null,2e4),e.Settings.onSave(function(){e.storage.set("language",$("#"+e.prefix+"language").val()),e.storage.isDirty("language")&&e.Settings.requestPageReload()})})},function(){window.cytubeEnhanced.addModule("navMenuTabs",function(e){'use strict';var t=this;this.addTabInput=function(t,n,a){n=n||"",a=a||"";var o=$("<div class=\"row tab-option-wrapper\">").appendTo(t),i=$("<div class=\"col-sm-4 col-md-3\">").appendTo(o),s=$("<div class=\"form-group\">").appendTo(i);$("<input name=\"title\" type=\"text\" class=\"form-control\" placeholder=\""+e.t("tabs[.]Title")+"\">").val(n).appendTo(s);var d=$("<div class=\"col-sm-8 col-md-9\">").appendTo(o),r=$("<div class=\"form-group\">").appendTo(d);$("<input name=\"content\" type=\"text\" class=\"form-control\" placeholder=\""+e.t("tabs[.]Content")+"\">").val(a).appendTo(r)},this.tabsConfigToHtml=function(e,t){var n=$("<div>");if(void 0!==e&&""!==e&&$("<div id=\"motd-channel-description\">").html(e).appendTo(n),0!==t.length)for(var a=0,o=1,i=$("<div id=\"motd-tabs-wrapper\">").appendTo(n),s=$("<div id=\"motd-tabs\">").appendTo(i),d=$("<div id=\"motd-tabs-content\">").appendTo(i),r=0,l=t.length;r<l;r++)if(0===t[r][a].indexOf("!dropdown!")){var c=$("<div class=\"btn-group\">");$("<button type=\"button\" class=\"btn btn-default dropdown-toggle\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">").html(t[r][a].replace("!dropdown!","")+" <span class=\"caret\"></span>").appendTo(c);for(var p=$("<ul class=\"dropdown-menu\">").appendTo(c),u=t[r][o],m=0,h=t[r][o].length,g;m<h;m++)g=$("<a>").attr({href:u[m][1],target:"_blank"}).text(u[m][0]),$("<li>").html(g).appendTo(p);c.appendTo(s)}else 0===t[r][a].indexOf("!link!")?$("<a href=\""+t[r][o]+"\" target=\"_blank\" class=\"btn btn-default btn-link\">").html(t[r][a].replace("!link!","")).appendTo(s):($("<button class=\"btn btn-default motd-tab-btn\" data-tab-index=\""+r+"\">").html(t[r][a]).appendTo(s),$("<div class=\"motd-tab-content\" data-tab-index=\""+r+"\">").hide().html(t[r][o]).appendTo(d));return n.html()},this.tabsHtmlToCondig=function(e){this.$tabsArea.empty();var n=$("<div>").html(e),a=n.find("#motd-tabs").children(),o=n.find("#motd-tabs-content");$("#channel-description-input").val(n.find("#motd-channel-description").html()),a.each(function(){if($(this).hasClass("btn-group")){var e="",n=$(this).children("ul").children();n.each(function(){var t=$(this).children("a");e+="[n]"+t.text()+"[/n][a]"+t.attr("href")+"[/a], "}),e=e.slice(0,-2),t.addTabInput(t.$tabsArea,"!dropdown!"+$(this).children("button").html().replace(" <span class=\"caret\"></span>",""),e)}else $(this).hasClass("btn-link")?t.addTabInput(t.$tabsArea,"!link!"+$(this).html(),$(this).attr("href")):t.addTabInput(t.$tabsArea,$(this).html(),o.find("[data-tab-index=\""+$(this).data("tabIndex")+"\"]").html())})},this.motdCutMap={"<iframe $1>$2</iframe>":/\[iframe(.*?)\](.*?)[/iframe]]/g},this.fixMotdCut=function(){$("#motd-tabs-content").find(".motd-tab-content").each(function(){for(var e in t.motdCutMap)t.motdCutMap.hasOwnProperty(e)&&$(this).html($(this).html().replace(t.motdCutMap[e],e))})},this.$tabsSettings=$("<div id=\"tabs-settings\">").html("<hr><h3>"+e.t("tabs[.]Tabs settings")+"</h3><ul><li>"+e.t("tabs[.]By default tab behaves like simple tab.")+"</li><li>"+e.t("tabs[.]Use !dropdown! prefix to create dropdown list. Example: !dropdown!My dropdown. Value must look like \"[n]Link title 1[/n][a]URL 1[/a], [n]Link title 2[/n][a]URL 2[/a], [n]Link title 3[/n][a]URL 3[/a]\"")+"</li><li>"+e.t("tabs[.]Use !link! prefix to create link. Example: !link!My link. Value must contain URL.")+"</li></ul>").insertBefore("#cs-motdtext").hide(),this.$tabSettingsBtn=$("<button type=\"button\" class=\"btn btn-primary motd-bottom-btn\" id=\"show-tabs-settings\">").text(e.t("tabs[.]Show tabs settings (cytube enhanced)")).appendTo("#cs-motdeditor").on("click",function(){$(this).hasClass("btn-primary")?(t.$tabsSettings.show(),$(this).removeClass("btn-primary"),$(this).addClass("btn-success")):(t.$tabsSettings.hide(),$(this).removeClass("btn-success"),$(this).addClass("btn-primary"))}),$("#cs-motdtext").before("<hr>"),this.$channelDescriptionInputWrapper=$("<div class=\"form-group\">").appendTo(this.$tabsSettings),this.$channelDescriptionLabel=$("<label for=\"channel-description-input\">"+e.t("tabs[.]Channel description")+"</label>").appendTo(this.$channelDescriptionInputWrapper),this.$channelDescriptionInput=$("<input id=\"channel-description-input\" placeholder=\""+e.t("tabs[.]Channel description")+"\" class=\"form-control\">").appendTo(this.$channelDescriptionInputWrapper),this.$tabsArea=$("<div id=\"tabs-settings-area\">").appendTo(this.$tabsSettings),$("<p>\u0412\u043A\u043B\u0430\u0434\u043A\u0438</p>").insertBefore(this.$tabsArea),this.$addTabToTabsSettingsBtn=$("<button type=\"button\" class=\"btn btn-sm btn-primary\" id=\"tabs-settings-add\">").text(e.t("tabs[.]Add tab")).appendTo(this.$tabsSettings).on("click",function(){t.addTabInput(t.$tabsArea)}),this.$removeLastTabFromTabsSettingsBtn=$("<button type=\"button\" class=\"btn btn-sm btn-primary\" id=\"tabs-settings-remove\">").text(e.t("tabs[.]Remove the last tab")).appendTo(this.$tabsSettings).on("click",function(){t.$tabsArea.children(".tab-option-wrapper").last().remove()}),this.$tabsToHtml=$("<button type=\"button\" class=\"btn btn-sm btn-primary\" id=\"tabs-settings-to-html\">").text(e.t("tabs[.]Convert to the editor's code")).appendTo(this.$tabsSettings).on("click",function(){if(window.confirm(e.t("tabs[.]The code in the editor will be replaced with the new code, continue?"))){$(this).removeClass("btn-success");var n=[];t.$tabsArea.find(".tab-option-wrapper").each(function(){var t=$(this).find("input[name=\"title\"]").val().trim(),a=$(this).find("input[name=\"content\"]").val().trim();if(0===t.indexOf("!dropdown!")){if(!/^(?:\[n\](.+?)\[\/n\]\[a\](.+?)\[\/a\][ ]*,[ ]*)*\[n\](.+?)\[\/n\]\[a\](.+?)\[\/a\]$/.test(a))return void window.alert(e.t("tabs[.]Wrong content for the dropdown")+t.replace("!dropdown!","")+".");a=a.split(",").map(function(e){return e=e.trim().match(/^\[n\](.+?)\[\/n\]\[a\](.+?)\[\/a\]$/),[e[1].trim(),e[2].trim()]})}else if(0===t.indexOf("!link!"));n.push([t,a])}),$("#cs-motdtext").val(t.tabsConfigToHtml(t.$channelDescriptionInput.val(),n))}}),this.$htmlToTabs=$("<button type=\"button\" class=\"btn btn-sm btn-primary\" id=\"tabs-settings-from-html\">").text(e.t("tabs[.]Convert from the editor's code")).appendTo(this.$tabsSettings).on("click",function(){window.confirm(e.t("tabs[.]Tabs settings will be replaced with the code from the editor, continue?"))&&($(this).removeClass("btn-success"),t.tabsHtmlToCondig($("#cs-motdtext").val()))}),this.showMotdTab=function(e){var t=$("#motd-tabs-content").find("[data-tab-index=\""+e.data("tabIndex")+"\"]");e.hasClass("btn-default")?($(".motd-tab-content").hide(),t.show(),$(".motd-tab-btn").removeClass("btn-success").addClass("btn-default"),e.removeClass("btn-default"),e.addClass("btn-success")):(t.hide(),e.removeClass("btn-success"),e.addClass("btn-default"))},$(document.body).on("click","#motd-tabs .motd-tab-btn",function(){t.showMotdTab($(this))}),this.motdHandleDropdown=function(){$(".motd-tab-btn").removeClass("btn-success").addClass("btn-default"),$(".motd-tab-content").hide()},$(document.body).on("click","#motd-tabs .dropdown-toggle",function(){t.motdHandleDropdown()}),this.tabsHtmlToCondig($("#cs-motdtext").val()),this.fixMotdCut(),window.socket.on("setMotd",function(){t.fixMotdCut()}),$(document).on("change keypress","#tabs-settings-area input, #tabs-settings-area textarea",function(){t.$tabsToHtml.addClass("btn-success")}),$(document).on("change keypress","#cs-motdtext",function(){t.$htmlToTabs.addClass("btn-success")})})},function(){window.cytubeEnhanced.addModule("showVideoInfo",function(e){"use strict";var t=this;this.$titleRow=$("<div id=\"titlerow\" class=\"row\">").insertBefore("#main"),this.$titleRowOuter=$("<div id=\"titlerow-outer\" class=\"col-md-12\" />").html($("#currenttitle").text(""===$(".queue_active a").text()?"":$("#currenttitle").text().replace(/^Currently Playing:/,e.t("videoInfo[.]Now:"))).detach()).appendTo(this.$titleRow),this.$mediaInfo=$("<p id=\"mediainfo\">").appendTo("#videowrap-header"),this.showPlaylistInfo=function(){0===$(".queue_active").length?($("#currenttitle").text(""),this.$mediaInfo.text(e.t("videoInfo[.]Nothing is playing now"))):($("#currenttitle").text($("#currenttitle").text().replace(/^Currently Playing:/,e.t("videoInfo[.]Now:"))),this.$mediaInfo.text($(".queue_active").attr("title").replace("Added by",e.t("videoInfo[.]Added by"))))},this.showPlaylistInfo(),window.socket.on("changeMedia",function(){t.showPlaylistInfo()})})},function(){window.cytubeEnhanced.addModule("smilesAndFavouritePicturesTogether",function(e){'use strict';var t=this,n=e.Settings.getTab("general",e.t("general[.]General"),100),a=e.Settings.storage;if(e.isModulePermitted("smiles")&&e.isModulePermitted("favouritePictures")){this.scheme={"smiles-and-favourite-pictures-together":{title:e.t("general[.]Smiles and pictures together"),default:"no",options:[{value:"yes",title:e.t("settings[.]Yes")},{value:"no",title:e.t("settings[.]No")}]}};var o=1e4,i,s;for(var d in this.scheme){if(i=this.scheme[d],a.setDefault("general."+d,i.default),a.get("general."+d))for(s in i.options)i.options[s].selected=a.get("general."+d)==i.options[s].value;n.addControl("select","horizontal",i.title,d,i.options,null,o),o+=100}e.Settings.onSave(function(n){for(var a in t.scheme)n.set("general."+a,$("#"+e.prefix+a).val());n.isDirty("general.smiles-and-favourite-pictures-together")&&e.Settings.requestPageReload()}),"yes"==a.get("general.smiles-and-favourite-pictures-together")&&(e.getModule("smiles").done(function(e){e.makeSmilesAndPicturesTogether()}),e.getModule("favouritePictures").done(function(e){e.makeSmilesAndPicturesTogether()}),$("<button id=\"smiles-and-picture-btn\" class=\"btn btn-sm btn-default\" title=\""+e.t("general[.]Show emotes and favorite images")+"\">").html("<i class=\"glyphicon glyphicon-th-large\"></i>").prependTo($("#chat-controls")).on("click",function(){$("#smiles-btn").click(),$("#favourite-pictures-btn").click(),$(this).hasClass("btn-default")?($(this).removeClass("btn-default"),$(this).addClass("btn-success")):($(this).removeClass("btn-success"),$(this).addClass("btn-default"))}))}})},function(){window.cytubeEnhanced.addModule("smiles",function(e){'use strict';var t=this;$("#emotelistbtn").hide(),0===$("#chat-panel").length&&$("<div id=\"chat-panel\" class=\"row\">").insertAfter("#main"),0===$("#chat-controls").length&&$("<div id=\"chat-controls\" class=\"btn-group\">").appendTo("#chatwrap"),this.$smilesBtn=$("<button id=\"smiles-btn\" class=\"btn btn-sm btn-default\" title=\""+e.t("emotes[.]Show emotes")+"\">").html("<i class=\"glyphicon glyphicon-picture\"></i>").prependTo("#chat-controls"),this.$smilesPanel=$("<div id=\"smiles-panel\">").prependTo("#chat-panel").hide(),this.renderSmiles=function(){for(var e=window.CHANNEL.emotes,t=0,n=e.length;t<n;t++)$("<img class=\"smile-on-panel\">").attr({src:e[t].image}).data("name",e[t].name).appendTo(this.$smilesPanel)},this.insertSmile=function(t){e.Helpers.addMessageToChatInput(" "+t+" ","end")},$(document.body).on("click",".smile-on-panel",function(){t.insertSmile($(this).data("name"))}),$(window).on("resize",function(){992>e.Helpers.getViewportSize().width&&t.$smilesPanel.empty()}),this.showSmilesPanel=function(){if(992>e.Helpers.getViewportSize().width)t.$smilesPanel.empty(),$("#emotelistbtn").click();else{""===t.$smilesPanel.html()&&t.renderSmiles();var n=this.smilesAndPicturesTogether||!1;0===$("#favourite-pictures-panel").length||n||$("#favourite-pictures-panel").hide(),t.$smilesPanel.toggle(),n||(t.$smilesBtn.hasClass("btn-default")?(0!==$("#favourite-pictures-btn").length&&$("#favourite-pictures-btn").hasClass("btn-success")&&$("#favourite-pictures-btn").removeClass("btn-success").addClass("btn-default"),t.$smilesBtn.removeClass("btn-default"),t.$smilesBtn.addClass("btn-success")):(t.$smilesBtn.removeClass("btn-success"),t.$smilesBtn.addClass("btn-default")))}},this.$smilesBtn.on("click",function(){t.showSmilesPanel()}),this.makeSmilesAndPicturesTogether=function(){t.smilesAndPicturesTogether=!0,t.$smilesBtn.hide(),t.$smilesPanel.hide()}})},function(){window.cytubeEnhanced.addModule("themes",function(e,t){'use strict';var n=this;t=$.extend({},{defaultTheme:"halloween",themeId:"theme-css"},t),$("#us-theme").closest(".form-group").hide().val("/css/themes/slate.css"),window.createCookie&&window.createCookie("cytube-theme","/css/themes/slate.css",1e3);var a=e.Settings.getTab("themes",e.t("themes[.]Themes"),500),o=$("<div class=\""+e.prefix+"themes\">").appendTo(a.$content),i=e.Settings.storage,s=$("<div class=\""+e.prefix+"themes__info-message\">").text("\u0422\u0435\u043C\u044B \u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044E\u0442.").prependTo(a.$content),d="themes";i.setDefault(d+".selected",t.defaultTheme),this.themes={},this.applyNewDefaultTheme=function(){var a=i.get(d+".previousDefaultTheme");if(i.get(d+".selected")==a)i.set(d+".previousDefaultTheme",t.defaultTheme),n.setTheme(t.defaultTheme),i.save(),console.log("reloading"),window.location.reload();else if((!a||a&&a!=t.defaultTheme)&&(i.set(d+".previousDefaultTheme",t.defaultTheme),i.save(),t.defaultTheme!=i.get(d+".selected"))){var o=n.themes[t.defaultTheme].title;e.UI.createConfirmWindow(e.t("themes[.]Default theme was changed to \"%themeTitle%\" by administrator. Do you want to try it? (Don't forget, that you can switch your theme in extended settings anytime.)").replace("%themeTitle%",o),function(a){a&&(n.setTheme(t.defaultTheme),i.save(),e.UI.createConfirmWindow(e.t("settings[.]Some settings need to refresh the page to get to work. Do it now?"),function(e){e&&window.location.reload()}))})}},this.add=function(e){s.remove(),n.themes[e.name]=e,n.themes[e.name].$el=n.addMarkup(e).appendTo(o),n.sort(),e.name===i.get(d+".selected")?(e.name===t.defaultTheme&&(i.set(d+".previousDefaultTheme",t.defaultTheme),i.save()),n.setTheme(e.name),n.applyTheme(e.name)):e.name===t.defaultTheme&&n.applyNewDefaultTheme()},a.onShow(function(){$("."+e.prefix+"themes__item").removeClass("active").filter(function(){return $(this).data("name")===i.get(d+".selected")}).addClass("active")}),this.setTheme=function(t){i.set(d+".selected",t),$("."+e.prefix+"themes__item").removeClass("active").filter(function(){return $(this).data("name")===t}).addClass("active")},this.applyTheme=function(e){var a=n.themes[e];$("#"+t.themeId).remove(),a.cssUrl?$("<link rel=\"stylesheet\" id=\""+t.themeId+"\">").attr("href",a.cssUrl).appendTo($("head")):n.setTheme(i.getDefault(d+".selected")),a.jsUrl&&$.getScript(a.jsUrl)},this.addMarkup=function(t){var a=$("<div class=\""+e.prefix+"themes__item\">").data("name",t.name).on("click",function(){var t=$(this).data("name");t!==i.get(d+".selected")&&e.UI.createConfirmWindow(e.t("themes[.]Apply this theme?"),function(e){e&&n.setTheme(t)})}),o=$("<div class=\""+e.prefix+"themes__item__title\">").text(t.title).appendTo(a);return"undefined"!=typeof t.pictureUrl&&""!==(t.pictureUrl=t.pictureUrl.trim())&&$("<div class=\""+e.prefix+"themes__item__picture\">").appendTo(a).css("background-image","url(\""+t.pictureUrl+"\")"),a},this.sort=function(){var e=[];for(var t in n.themes)e.push(n.themes[t]);e=e.sort(function(e,t){return e.title.toLowerCase()>t.title.toLowerCase()?1:e.title.toLowerCase()<t.title.toLowerCase()?-1:0});for(var a=0,i=e.length;a<i;a++)e[a].$el.detach().appendTo(o)},e.Settings.onSave(function(t){t.isDirty(d+".selected")&&e.Settings.requestPageReload()})})},function(){window.cytubeEnhanced.addModule("uiRussianTranslate",function(e){'use strict';var t=this;if("ru"===e.storage.get("language")){0!==$("#newpollbtn").length&&$("#newpollbtn").text(e.t("standardUI[.]Create a poll")),0!==$("#welcome").length&&$("#welcome").text(e.t("standardUI[.]Welcome, ")+window.CLIENT.name),0!==$("#logout").length&&$("#logout").text(e.t("standardUI[.]Log out")),0!==$("#username").length&&$("#username").attr({placeholder:e.t("standardUI[.]Login")}),0!==$("#password").length&&$("#password").attr({placeholder:e.t("standardUI[.]Password")}),0!==$("#loginform").find(".checkbox").find(".navbar-text-nofloat").length&&$("#loginform").find(".checkbox").find(".navbar-text-nofloat").text(e.t("standardUI[.]Remember me")),0!==$("#login").length&&$("#login").text(e.t("standardUI[.]Site login"));var n={Home:e.t("standardUI[.]Home"),Account:e.t("standardUI[.]Account"),Logout:e.t("standardUI[.]Logout"),Channels:e.t("standardUI[.]Channels"),Profile:e.t("standardUI[.]Profile"),"Change Password/Email":e.t("standardUI[.]Change Password/Email"),Login:e.t("standardUI[.]Log in"),Register:e.t("standardUI[.]Register"),Options:e.t("standardUI[.]Options"),"Channel Settings":e.t("standardUI[.]Channel Settings"),Layout:e.t("standardUI[.]Layout"),"Chat Only":e.t("standardUI[.]Chat Only"),"Remove Video":e.t("standardUI[.]Remove Video")};$(".navbar").find(".navbar-nav").children().each(function(){$(this).find("a").each(function(){for(var e in n)n.hasOwnProperty(e)&&$(this).html($(this).html().replace(e,n[e]))})}),0!==$("#mediaurl").length&&$("#mediaurl").attr("placeholder",e.t("standardUI[.]Video url")),0!==$("#queue_next").length&&$("#queue_next").text(e.t("standardUI[.]Next")),0!==$("#queue_end").length&&$("#queue_end").text(e.t("standardUI[.]At end")),$(".qbtn-play").each(function(){$(this).html($(this).html().replace(/\s*Play/," "+e.t("standardUI[.]Play")))}),$(".qbtn-next").each(function(){$(this).html($(this).html().replace(/\s*Queue Next/," "+e.t("standardUI[.]Queue Next")))}),$(".qbtn-tmp").each(function(){$(this).html($(this).html().replace(/\s*Make Temporary/," "+e.t("standardUI[.]Make Temporary")).replace(/\s*Make Permanent/," "+e.t("standardUI[.]Make Permanent")))}),$(".qbtn-delete").each(function(){$(this).html($(this).html().replace(/\s*Delete/," "+e.t("standardUI[.]Delete")))}),window.addQueueButtons=function(t){return function(n){var a=t(n);return 0!==n.find(".qbtn-play").length&&n.find(".qbtn-play").html(n.find(".qbtn-play").html().replace(/\s*Play/," "+e.t("standardUI[.]Play"))),0!==n.find(".qbtn-next").length&&n.find(".qbtn-next").html(n.find(".qbtn-next").html().replace(/\s*Queue Next/," "+e.t("standardUI[.]Queue Next"))),0!==n.find(".qbtn-tmp").length&&n.find(".qbtn-tmp").html(n.find(".qbtn-tmp").html().replace(/\s*Make Temporary/," "+e.t("standardUI[.]Make Temporary")).replace(/\s*Make Permanent/," "+e.t("standardUI[.]Make Permanent"))),0!==n.find(".qbtn-delete").length&&n.find(".qbtn-delete").html(n.find(".qbtn-delete").html().replace(/\s*Delete/," "+e.t("standardUI[.]Delete"))),a}}(window.addQueueButtons),this.handleTemp=function(t){var n=$(".pluid-"+t.uid).find(".qbtn-tmp");0!==n.length&&(t.temp?n.html(n.html().replace("\u0421\u0434\u0435\u043B\u0430\u0442\u044C \u0432\u0440\u0435\u043C\u0435\u043D\u043D\u044B\u043C",e.t("standardUI[.]Make Temporary"))):n.html(n.html().replace("\u0421\u0434\u0435\u043B\u0430\u0442\u044C \u043F\u043E\u0441\u0442\u043E\u044F\u043D\u043D\u044B\u043C",e.t("standardUI[.]Make Permanent"))))},window.socket.on("setTemp",function(e){t.handleTemp(e)}),0!==$("#guestname").length&&$("#guestname").attr("placeholder",e.t("standardUI[.]Name")),$("#guestlogin")&&$("#guestlogin").find(".input-group-addon").text(e.t("standardUI[.]Guest login")),0!==$("#chatbtn").length&&$("#chatbtn").text("\u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C"),0!==$("#modflair").length&&$("#modflair").text("\u041C\u043E\u0434")}})},function(){window.cytubeEnhanced.addModule("videoControls",function(e,t){'use strict';var n=this;t=$.extend({},{turnOffVideoOption:!0,selectQualityOption:!0,expandPlaylistOption:!0,showVideoContributorsOption:!0,playlistHeight:500},t),$("#mediarefresh").hide(),this.$topVideoControls=$("<div id=\"top-video-controls\" class=\"btn-group\">").appendTo("#videowrap"),this.refreshVideo=function(){$("#mediarefresh").click()},this.$refreshVideoBtn=$("<button id=\"refresh-video\" class=\"btn btn-sm btn-default\" title=\""+e.t("video[.]Refresh video")+"\">").html("<i class=\"glyphicon glyphicon-refresh\">").appendTo(this.$topVideoControls).on("click",function(){n.refreshVideo()}),this.hidePlayer=function(e){if(e.hasClass("btn-default")){var t=$("#videowrap").find(".embed-responsive");t.css({position:"relative"}),$("<div id=\"player-overlay\">").appendTo(t),e.html("<i class=\"glyphicon glyphicon-film\">").removeClass("btn-default").addClass("btn-success")}else $("#player-overlay").remove(),e.html("<i class=\"glyphicon glyphicon-ban-circle\">").removeClass("btn-success").addClass("btn-default")},this.$hidePlayerBtn=$("<button id=\"hide-player-btn\" class=\"btn btn-sm btn-default\" title=\""+e.t("video[.]Hide video")+"\">").html("<i class=\"glyphicon glyphicon-ban-circle\">").appendTo(this.$topVideoControls).on("click",function(){n.hidePlayer($(this))}),t.turnOffVideoOption||this.$hidePlayerBtn.hide(),this.qualityLabelsTranslate={auto:"\u0430\u0432\u0442\u043E",240:"240p",360:"360p",480:"480p",720:"720p",1080:"1080p",best:e.t("video[.]best")};var a=["auto",240,360,480,720,1080,"best"];this.$videoQualityBtnGroup=$("<div class=\"btn-group\">").html("<button type=\"button\" class=\"btn btn-default btn-sm video-dropdown-toggle\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">"+e.t("video[.]Quality")+": "+this.qualityLabelsTranslate[window.USEROPTS.default_quality||"auto"]+" <span class=\"caret\"></span></button>").appendTo(this.$topVideoControls),this.$videoQualityList=$("<ul class=\"dropdown-menu\">");for(var o=0,i=a.length;o<i;o++)$("<li>").html("<a href=\"#\" data-quality=\""+a[o]+"\">"+this.qualityLabelsTranslate[a[o]]+"</a>").appendTo(this.$videoQualityList);this.$videoQualityList.appendTo(this.$videoQualityBtnGroup),this.changeVideoQuality=function(t){this.settingsFix(),$("#us-default-quality").val(t.data("quality")),window.saveUserOptions(),this.$refreshVideoBtn.click(),this.$videoQualityBtnGroup.find("button").html(e.t("video[.]Quality")+": "+t.text()+" <span class=\"caret\"></span>"),$(".video-dropdown-toggle").dropdown()},this.$videoQualityBtnGroup.on("click","a",function(){return n.changeVideoQuality($(this)),!1}),$("#us-default-quality").on("change",function(){n.$videoQualityBtnGroup.find("button").html(e.t("video[.]Quality")+": "+n.qualityLabelsTranslate[$(this).val()]+" <span class=\"caret\"></span>")}),t.selectQualityOption||this.$videoQualityBtnGroup.hide(),this.settingsFix=function(){$("#us-theme").val(window.USEROPTS.theme),$("#us-layout").val(window.USEROPTS.layout),$("#us-no-channelcss").prop("checked",window.USEROPTS.ignore_channelcss),$("#us-no-channeljs").prop("checked",window.USEROPTS.ignore_channeljs),$("#us-synch").prop("checked",window.USEROPTS.synch),$("#us-synch-accuracy").val(window.USEROPTS.sync_accuracy),$("#us-wmode-transparent").prop("checked",window.USEROPTS.wmode_transparent),$("#us-hidevideo").prop("checked",window.USEROPTS.hidevid),$("#us-playlistbuttons").prop("checked",window.USEROPTS.qbtn_hide),$("#us-oldbtns").prop("checked",window.USEROPTS.qbtn_idontlikechange),$("#us-default-quality").val(window.USEROPTS.default_quality||"auto"),$("#us-chat-timestamp").prop("checked",window.USEROPTS.show_timestamps),$("#us-sort-rank").prop("checked",window.USEROPTS.sort_rank),$("#us-sort-afk").prop("checked",window.USEROPTS.sort_afk),$("#us-blink-title").val(window.USEROPTS.blink_title),$("#us-ping-sound").val(window.USEROPTS.boop),$("#us-sendbtn").prop("checked",window.USEROPTS.chatbtn),$("#us-no-emotes").prop("checked",window.USEROPTS.no_emotes),$("#us-modflair").prop("checked",window.USEROPTS.modhat),$("#us-joinmessage").prop("checked",window.USEROPTS.joinmessage),$("#us-shadowchat").prop("checked",window.USEROPTS.show_shadowchat)},0!==$("#showmediaurl").length&&$("#showmediaurl").html(e.t("standardUI[.]Add video")).attr({title:e.t("standardUI[.]Add video from url")}).detach().insertBefore($("#showsearch")),this.expandPlaylist=function(n){n.hasClass("btn-success")?($("#queue").css("max-height",t.playlistHeight+"px"),n.attr("title",e.t("video[.]Expand playlist")),n.removeClass("btn-success"),n.addClass("btn-default")):($("#queue").css("max-height","100000px"),n.attr("title",e.t("video[.]Unexpand playlist")),n.removeClass("btn-default"),n.addClass("btn-success"),window.scrollQueue())},this.$expandPlaylistBtn=$("<button id=\"expand-playlist-btn\" class=\"btn btn-sm btn-default\" data-expanded=\"0\" title=\""+e.t("video[.]Expand playlist")+"\">").append("<span class=\"glyphicon glyphicon-resize-full\">").prependTo("#videocontrols").on("click",function(){n.expandPlaylist($(this))}),t.expandPlaylistOption||this.$expandPlaylistBtn.hide(),this.$scrollToCurrentBtn=$("<button id=\"scroll-to-current-btn\" class=\"btn btn-sm btn-default\" title=\""+e.t("video[.]Scroll the playlist to the current video")+"\">").append("<span class=\"glyphicon glyphicon-hand-right\">").prependTo("#videocontrols").on("click",function(){window.scrollQueue()}),this.showVideoContributorsList=function(){var t=$("<h3 class=\"modal-title\">").text(e.t("video[.]Contributors' list")),n=$("<div>"),a={};$("#queue").find(".queue_entry").each(function(){var e=$(this).attr("title").replace("Added by: ","");a[e]===void 0?a[e]=1:a[e]+=1}),n.append($("<p>"+e.t("video[.]Video's count")+": "+($("#queue").find(".queue_entry").length+1)+"</p>"));var o=$("<ol>");for(var i in a)a.hasOwnProperty(i)&&o.append($("<li>"+i+": "+a[i]+".</li>"));o.appendTo(n),e.UI.createModalWindow("video-contributors-list",t,n)},this.$videoContributorsBtn=$("<button id=\"video-contributors-btn\" class=\"btn btn-sm btn-default\" title=\""+e.t("video[.]Contributors' list")+"\">").append("<span class=\"glyphicon glyphicon-user\">").prependTo("#videocontrols").on("click",function(){n.showVideoContributorsList()}),t.showVideoContributorsOption||this.$videoContributorsBtn.hide()})},function(){window.cytubeEnhanced.addModule("videoResize",function(e,t){'use strict';function n(){var t=this;t.ARROW="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADZJREFUeNpiYBgFVAfzoZhoeSYsihJwGDIfKkeUK/6jGYJNjGhDSNaMbghZmokN1FFADQAQYACgYhHrEaVEsQAAAABJRU5ErkJggg==",t.COLCOUNT=12,t.PREFIX="set-width-",t.AUTHOR="dfdfg",t.positions=[],t.mode="show",t.checkPosition=function(){var e=document.getElementById("chatwrap"),n=document.getElementById("videowrap");t.positions=e.nextSibling==n?[e,n]:[n,e];var a=$(e).position().top,o=$(n).position().top;return a==o},t.addHtml=function(){for(var e=["<div id=\""+t.PREFIX+"wrap\" style=\"top: -17px; position: relative; height: 0px;line-height: 0px;\">"],n=1;n<t.COLCOUNT;n++)e.push("<div style=\"left: "+100*n/t.COLCOUNT+"%; position: relative;height: 0px;\">"),e.push("<img id=\""+t.PREFIX+"arrow-"+n+"\" class=\""+t.PREFIX+"arrow\" src=\""+t.ARROW+"\" style=\"cursor: pointer; margin-left: -8px; background-color:rgba(255,255,255,0.1); border-radius: 8px;\">"),e.push("</div>");e.push("</div>"),$("#main").prepend(e.join("\n"))},t.hide=function(e){if(e=e||-1,-1==e){var n=t.positions[0].getAttribute("class");e=n.substr(n.lastIndexOf("-")+1)}for(var a=1;a<t.COLCOUNT;a++)a!=e&&$("#"+t.PREFIX+"arrow-"+a).parent().hide();t.mode="hide"},t.show=function(){$("."+t.PREFIX+"arrow").parent().show(),t.mode="show"},t.setHandlers=function(){$("."+t.PREFIX+"arrow").click(function(n){if("show"==t.mode){var a=n.currentTarget.id,o=a.substr(a.lastIndexOf("-")+1),i=t.COLCOUNT-o,s=$("#"+t.PREFIX+"wrap").next();return e.storage.set("chatWidthInColumns",o),s.attr("class","col-lg-"+o+" col-md-"+o),s=s.next(),s.attr("class","col-lg-"+i+" col-md-"+i),t.hide(o),void window.handleWindowResize()}t.show()})},t.loadPosition=function(){var t=e.storage.get("chatWidthInColumns");t&&$("#"+o.PREFIX+"arrow-"+t).trigger("click").load(function(){$(this).trigger("click")})},t.create=function(){$("#"+t.PREFIX+"wrap").remove(),t.checkPosition()&&(t.addHtml(),t.setHandlers(),t.hide(),t.loadPosition())}}var a=this;if(t=$.extend({},{turnedOn:!0},t),t.turnedOn){e.storage.setDefault("chatWidthInColumns",5);var o=new n;o.create()}})},function(){window.cytubeEnhanced.addModule("videojsProgress",function(){'use strict';var e=this;this.handleProgress=function(){if(window.PLAYER instanceof window.VideoJSPlayer&&("Html5"===window.PLAYER.player.techName||"Html5"===window.PLAYER.player.Ua)){var t=$("<div class=\"vjs-tip\">").insertAfter(".vjs-progress-control"),n=$("<div class=\"vjs-tip-body\">").appendTo(t);$("<div class=\"vjs-tip-body-arrow\">").appendTo(n);var a=$("<div class=\"vjs-tip-body-inner\">").appendTo(n);$(".vjs-progress-control").on("mousemove",function(n){var e=$(window.PLAYER.player.controlBar.progressControl.seekBar.el()),o=e.outerWidth()/window.PLAYER.player.duration(),i=n.pageX-e.offset().left,s=i/o,d=Math.floor(s/3600),r=0<d?Math.floor(s%3600/60):Math.floor(s/60);10>r&&0<d&&(r="0"+r);var l=Math.floor(s%60);10>l&&(l="0"+l),0<d?a.text(d+":"+r+":"+l):a.text(r+":"+l);var c=$(".vjs-control-bar");t.css("top",-(c.height()+$(".vjs-progress-control").height())+"px").css("left",n.pageX-c.offset().left-a.outerWidth()/2+"px").show()}),$(".vjs-progress-control, .vjs-play-control").on("mouseout",function(){t.hide()})}},this.handleProgress(),window.socket.on("changeMedia",function(){e.handleProgress()})})},function(){window.cytubeEnhanced.getModule("extras").done(function(e){e.add({title:"\u0410\u043D\u0438\u043C\u0435-\u0446\u0438\u0442\u0430\u0442\u044B",name:"anime-quotes",description:"\u041D\u0435\u0441\u043A\u0443\u0447\u043D\u044B\u0435 \u0430\u043D\u0438\u043C\u0435-\u0446\u0438\u0442\u0430\u0442\u044B.",url:"//cdn.rawgit.com/kaba99/cytube-enhanced/master/extras/anime-quotes/anime-quotes.js"})})},function(){window.cytubeEnhanced.getModule("extras").done(function(e){e.add({title:"\u0426\u0438\u0442\u0430\u0442\u044B \u043F\u0438\u0440\u0430\u0442\u0430",name:"pirate-quotes",description:"\u041D\u0435\u0441\u043A\u0443\u0447\u043D\u044B\u0435 \u0446\u0438\u0442\u0430\u0442\u044B \u041F\u0438\u0440\u0430\u0442\u0430.",url:"//cdn.rawgit.com/kaba99/cytube-enhanced/master/extras/pirate-quotes/pirate-quotes.js"})})},function(){window.cytubeEnhanced.getModule("extras").done(function(e){e.add({title:"\u0421\u043A\u0440\u0438\u043F\u0442 \u043F\u0438\u0440\u0430\u0442\u0430",name:"pirate-script",description:"\u041D\u0443, \u0432 \u043E\u0431\u0449\u0435\u043C, \u0441\u043A\u0440\u0438\u043F\u0442\u0435\u0446 \u0432\u043E\u0442, \u0432\u0441\u044F\u043A\u0438\u0435 \u043F\u043B\u044E\u0448\u043A\u0438 \u043F\u0440\u0438\u043A\u0440\u0443\u0442\u0438\u043B. \u0422\u0435\u043F\u0435\u0440\u044C \u043C\u043E\u0436\u043D\u043E \u0441\u0440\u0430\u0442\u044C \u0432 \u0447\u0430\u0442 \u0435\u0449\u0435 \u044D\u0444\u0444\u0435\u043A\u0442\u0438\u0432\u043D\u0435\u0435, \u0440\u0430\u0437\u0434\u0440\u0430\u0436\u0430\u0442\u044C \u043C\u043E\u0434\u0435\u0440\u0430\u0442\u043E\u0440\u043E\u0432 \u0435\u0449\u0435 \u0431\u043E\u043B\u044C\u0448\u0435 \u0438 \u043C\u043D\u043E\u0433\u043E\u0435 \u0434\u0440\u0443\u0433\u043E\u0435.",authorUrl:"https://github.com/Pirate505/animach-xtra",url:"//cdn.rawgit.com/Pirate505/animach-xtra/master/src/animachxtra.user.js"})})},function(){window.cytubeEnhanced.getModule("themes").done(function(e){e.add({title:"\u0421\u0442\u0430\u043D\u0434\u0430\u0440\u0442\u043D\u0430\u044F \u0442\u0435\u043C\u0430",name:"default",cssUrl:"https://rawgit.com/kaba99/cytube-enhanced/master/themes/default/theme.css",jsUrl:"https://rawgit.com/kaba99/cytube-enhanced/master/themes/default/theme.js",pictureUrl:"https://rawgit.com/kaba99/cytube-enhanced/master/themes/default/screenshot.png"})})},function(){window.cytubeEnhanced.getModule("themes").done(function(e){e.add({title:"Halloween",name:"halloween",cssUrl:"https://rawgit.com/kaba99/cytube-enhanced/master/themes/halloween/theme.css",jsUrl:"https://rawgit.com/kaba99/cytube-enhanced/master/themes/halloween/theme.js",pictureUrl:"https://rawgit.com/kaba99/cytube-enhanced/master/themes/halloween/screenshot.png"})})},function(){window.cytubeEnhanced.getModule("themes").done(function(e){e.add({title:"\u041D\u043E\u0432\u043E\u0433\u043E\u0434\u043D\u044F\u044F \u0442\u0435\u043C\u0430",name:"new-year",cssUrl:"https://rawgit.com/kaba99/cytube-enhanced/master/themes/new_year/theme.css",jsUrl:"https://rawgit.com/kaba99/cytube-enhanced/master/themes/new_year/theme.js",pictureUrl:"https://rawgit.com/kaba99/cytube-enhanced/master/themes/new_year/screenshot.png"})})},function(){window.cytubeEnhanced.getModule("themes").done(function(e){e.add({title:"\u0412\u043E\u0435\u043D\u043D\u0430\u044F \u0442\u0435\u043C\u0430",name:"war",cssUrl:"https://rawgit.com/kaba99/cytube-enhanced/master/themes/war/theme.css",jsUrl:"https://rawgit.com/kaba99/cytube-enhanced/master/themes/war/theme.js",pictureUrl:"https://rawgit.com/kaba99/cytube-enhanced/master/themes/war/screenshot.png"})})},function(){window.cytubeEnhanced.addModule("skipLockButton",function(){'use strict';if(2<=CLIENT.rank&&0==$("#skipLockButton").length){let e=CHANNEL.opts.allow_voteskip?"success":"danger";$("<button>").addClass("btn").addClass("btn-sm").addClass(`btn-${e}`).attr("id","skipLockButton").attr("title","\u0412\u043A\u043B / \u0412\u044B\u043A\u043B \u0441\u043A\u0438\u043F\u043B\u043E\u043A").html(`<span class="glyphicon glyphicon-step-forward" />`).prependTo($("#videocontrols")).click(()=>{$("#cs-allow_voteskip")[0].click()}),window.socket.on("channelOpts",function(e){let t=!e.allow_voteskip;var n=$("#skipLockButton");t?(n.hasClass("btn-success")&&n.removeClass("btn-success"),!n.hasClass("btn-danger")&&n.addClass("btn-danger")):(n.hasClass("btn-danger")&&n.removeClass("btn-danger"),!n.hasClass("btn-success")&&n.addClass("btn-success"))})}})},function(){window.cytubeEnhanced.addModule("movieInfo",function(e){'use strict';this.kinoID,this.movieActors=[],this.movieDirectors="",this.movieProducers="",this.movieCompositors="";var t=this;this.movieFetch=function(){let n=$(".queue_active a").text(),a=/.*?https?:\/\/www\.kinopoisk\.ru\/film\/(\d+)\//g;t.kinoID=n.replace(a,"$1");var o=a.test(n);this.createMovieButton(o),o&&(this.updateMoviePanelInfo(),e.getModule("additionalChatCommands").done(function(e){e.movieActors=[]}),$.ajax({type:"GET",dataType:"application/json",url:`${atob("aHR0cHM6Ly9raW5vcG9pc2thcGl1bm9mZmljaWFsLnRlY2gvYXBpL3YxL3N0YWZmP2ZpbG1JZD0=")}${this.kinoID}`,beforeSend:function(e){e.setRequestHeader(`${atob("WC1BUEktS0VZ")}`,`${atob("NGMwMGE3ZmItOGY3Zi00YTI3LTkwNzMtNzBlN2IxYWYwZDNk")}`)},complete:function(n){let a=JSON.parse(n.responseText);t.movieDirectors="",t.movieProducers="",t.movieCompositors="",t.movieActors=[],$.each(a,function(n,a){if("ACTOR"===a.professionKey){let n=a.description;if(n&&!n.includes("\u0432 \u0442\u0438\u0442\u0440\u0430\u0445 \u043D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D")){let o=a.posterUrl;$(`<img src=${o} />`).on("load",function(){let i=$(this)[0].width;if($(this)[0].remove(),52!=i){let i=a.nameRu;var s={actorName:i,actorPhoto:o,actorDescription:n};t.movieActors.push(s),e.getModule("additionalChatCommands").done(function(e){e.movieActors.push(s)})}})}}"DIRECTOR"===a.professionKey&&50>t.movieDirectors.length&&(t.movieDirectors+=a.nameRu+", "),"PRODUCER"===a.professionKey&&50>t.movieProducers.length&&(t.movieProducers+=a.nameRu+", "),"COMPOSER"===a.professionKey&&50>t.movieCompositors.length&&(t.movieCompositors+=a.nameRu+", ")})}}))},this.createMovieButton=function(e){e&&0==$("#movieButton").length&&($("<span id=\"movieButton\" title=\"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0444\u0438\u043B\u044C\u043C\u0430\" style=\"padding: 0px 0px;cursor: pointer\">").html("<img src=\"https://i.imgur.com/bpvLec5.png\" style=\"max-height: 40px;\" onload=\"\" onerror=\"$(this).remove();\"/>").appendTo("#leftcontrols").on("click",()=>$("#moviePanel").slideToggle(200)),this.createMoviePanel(),this.pickActorBtnCB())},this.pickActorBtnCB=function(){$("#rollActor").on("click",function(){let t=$("#chatline").val();$("#chatline").val("!actor");let n=jQuery.Event("keydown");n.which=13,n.keyCode=13,$("#chatline").trigger(n),$("#chatline").val(t)})},this.createMoviePanel=function(){0==$("#moviePanel").length&&($(`<style>`).appendTo("head").text(`
				@import url('https://fonts.googleapis.com/css2?family=Open+Sans&display=swap');
		
				.movieImg{
					max-width: 10em;
					border: double;
					border-color: crimson;
				}
		
				#moviePanel hr{
					margin-top: 1em;
					margin-bottom: 1em;
				}
		
				.movie-rate-img{
					max-width: 32px;
					max-height: 32px;
				}
		
				.movie-rate-txt{
					text-size: 2em;
				}
		
				#moviePanel {
					font-family: 'Open Sans', sans-serif;
				}
			`),$(`
					<div class="col-lg-12 col-md-12 closePanel" id="moviePanel" style="display: none;">
						<div class="well" id="moviePanelContent" style="min-height: 20em">
			
							<div class="row">
								<div id="moviePanelHeader" class="row text-center"><strong>Информация о фильме</strong></div>
							</div>
			
							<br>
			
							<div class="row">
								<div class="col-lg-12 col-md-12 col-lg-12" style="padding: 0">
									<div class="col-lg-4 col-md-4 col-lg-4">
										<img id="movieImg" class="movieImg" src="" />
										<div>
											<br>
											<div class="row text-center">
												<div class="col-lg-12 col-md-12 col-lg-12">
													<div class="col-lg-6 col-md-6 col-lg-6"><div id="rateKP"><a href="#" target="_blank" rel="noopener noreferrer" ><img class="movie-rate-img" src="https://i.imgur.com/QJinjle.png" /> <strong class="movie-rate-txt"></strong></a></div></div>
													<div class="col-lg-6 col-md-6 col-lg-6"><div id="rateIMDB"><a href="#" target="_blank" rel="noopener noreferrer" ><img class="movie-rate-img" src="https://i.imgur.com/AD1JBPx.png" /> <strong class="movie-rate-txt"></strong></a></div></div>
												</div>
											</div>
											<br>
											<div class="text-center"><button id="rollActor" class="btn btn-sm btn-success" title="Зароллить рандомного актёра из фильма">Выбрать актёра</button></div>
											<br>
											<div>
												<strong>В главных ролях:</strong>
											</div>
											<br>
											<div>
												<div id="actor0"><p><a href="#" target="_blank" rel="noopener noreferrer" ></a></p></div>
												<div id="actor1"><p><a href="#" target="_blank" rel="noopener noreferrer" ></a></p></div>
												<div id="actor2"><p><a href="#" target="_blank" rel="noopener noreferrer" ></a></p></div>
												<div id="actor3"><p><a href="#" target="_blank" rel="noopener noreferrer" ></a></p></div>
												<div id="actor4"><p><a href="#" target="_blank" rel="noopener noreferrer" ></a></p></div>
												<div id="actor5"><p><a href="#" target="_blank" rel="noopener noreferrer" ></a></p></div>
												<div id="actor6"><p><a href="#" target="_blank" rel="noopener noreferrer" ></a></p></div>
											</div>
										</div>
									</div>
									<div class="col-lg-8 col-md-8 col-lg-8">
										<div id="movieContent">
											<div class="row">
												<div id="movieNameRu" style="font-size: 24px;"><a href="#" target="_blank" rel="noopener noreferrer" ><strong></strong></a></div>
											</div>
											<div class="row">
												<div id="movieNameEn"><em>Test</em></div>
											</div>
											<div class="row">
												<hr>
											</div>
		
		
											<div class="row">
												<div class="col-lg-6 col-md-6 col-lg-6">
													<p>Год производства: </p>
												</div>
												<div id="movieYear" class="col-lg-6 col-md-6 col-lg-6">
													<p></p>
												</div>
											</div>
											<div class="row">
												<div class="col-lg-6 col-md-6 col-lg-6">
													<p>Страна: </p>
												</div>
												<div id="movieCountries" class="col-lg-6 col-md-6 col-lg-6">
													<p></p>
												</div>
											</div>
											<div class="row">
												<div class="col-lg-6 col-md-6 col-lg-6">
													<p>Жанр: </p>
												</div>
												<div id="movieGenres" class="col-lg-6 col-md-6 col-lg-6">
													<p></p>
												</div>
											</div>
		
											<hr>
		
											<div class="row">
												<div class="col-lg-6 col-md-6 col-lg-6">
													<p>Режиссеры: </p>
												</div>
												<div id="movieDirectors" class="col-lg-6 col-md-6 col-lg-6">
													<p></p>
												</div>
											</div>
											<div class="row">
												<div class="col-lg-6 col-md-6 col-lg-6">
													<p>Продюсеры: </p>
												</div>
												<div id="movieProducers" class="col-lg-6 col-md-6 col-lg-6">
													<p></p>
												</div>
											</div>
											<div class="row">
												<div class="col-lg-6 col-md-6 col-lg-6">
													<p>Композиторы: </p>
												</div>
												<div id="movieCompositors" class="col-lg-6 col-md-6 col-lg-6">
													<p></p>
												</div>
											</div>
		
											<hr>
		
											<div class="row">
												<div class="col-lg-6 col-md-6 col-lg-6">
													<p>Бюджет: </p>
												</div>
												<div id="movieBudget" class="col-lg-6 col-md-6 col-lg-6">
													<p></p>
												</div>
											</div>
		
											<br>
		
											<div class="row">
												<div class="col-lg-6 col-md-6 col-lg-6">
													<p>Сборы в России: </p>
												</div>
												<div id="movieGrossRu" class="col-lg-6 col-md-6 col-lg-6">
													<p></p>
												</div>
											</div>
											<div class="row">
												<div class="col-lg-6 col-md-6 col-lg-6">
													<p>Сборы в США: </p>
												</div>
												<div id="movieGrossUsa" class="col-lg-6 col-md-6 col-lg-6">
													<p></p>
												</div>
											</div>
											<div class="row">
												<div class="col-lg-6 col-md-6 col-lg-6">
													<p>Сборы в мире: </p>
												</div>
												<div id="movieGrossWorld" class="col-lg-6 col-md-6 col-lg-6">
													<p></p>
												</div>
											</div>
		
											<hr>
		
											<div class="row">
												<div class="col-lg-6 col-md-6 col-lg-6">
													<p>Премьера в России: </p>
												</div>
												<div id="moviePremiereRu" class="col-lg-6 col-md-6 col-lg-6">
													<p></p>
												</div>
											</div>
											<div class="row">
												<div class="col-lg-6 col-md-6 col-lg-6">
													<p>Премьера в мире: </p>
												</div>
												<div id="moviePremiereWorld" class="col-lg-6 col-md-6 col-lg-6">
													<p></p>
												</div>
											</div>
		
											<hr>
		
											<div class="row">
												<div class="col-lg-6 col-md-6 col-lg-6">
													<p>Время: </p>
												</div>
												<div id="movieLength" class="col-lg-6 col-md-6 col-lg-6">
													<p></p>
												</div>
											</div>
		
										</div>
									</div>
								</div>
							</div>
			
							<div class="row">
							<div class="col-lg-12 col-md-12 col-lg-12">
								<hr>
								<div>
									<h4><strong>Описание</strong></h4>
								</div>
								<div id="movieDescription">
									<p class="movie-description" style="text-align: justify;">
									</p>
								</div>
							</div>
							</div>
			
						</div>
					</div>
				`).insertBefore("#pollwrap"))},this.updateMoviePanelInfo=function(){$.ajax({type:"GET",dataType:"application/json",url:`${atob("aHR0cHM6Ly9raW5vcG9pc2thcGl1bm9mZmljaWFsLnRlY2gvYXBpL3YyLjEvZmlsbXMv")}${t.kinoID}${atob("P2FwcGVuZF90b19yZXNwb25zZT1CVURHRVQsIFJBVElORw==")}`,beforeSend:function(e){e.setRequestHeader(`${atob("WC1BUEktS0VZ")}`,`${atob("NGMwMGE3ZmItOGY3Zi00YTI3LTkwNzMtNzBlN2IxYWYwZDNk")}`)},complete:function(e){let n=JSON.parse(e.responseText),a=n.data,o=n.budget,i=n.rating,s=n.externalId.imdbId,d="\u043D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u043E";console.log(a),console.log(o),console.log(i),$("#rateKP > a > strong")[0].innerText=i.rating,$("#rateIMDB > a > strong")[0].innerText=i.ratingImdb,$("#rateKP > a")[0].href=a.webUrl,$("#rateIMDB > a")[0].href=`${atob("aHR0cHM6Ly93d3cuaW1kYi5jb20vdGl0bGUv")}${s}`,$($("#movieImg")[0]).attr("src",a.posterUrl),$("#movieNameRu > a > strong")[0].innerText=a.nameRu,$("#movieNameEn > em")[0].innerText=a.nameEn,$("#movieNameRu > a")[0].href=a.webUrl,setTimeout(()=>{if(0<t.movieActors.length)for(var e=0;7>e;e++){$(`#actor${e} > p > a`)[0].innerText=t.movieActors[e]?t.movieActors[e].actorName:"";let n=t.movieActors[e].actorPhoto.split("/")[6].split(".")[0];$(`#actor${e} > p > a`)[0].href=`${atob("aHR0cHM6Ly93d3cua2lub3BvaXNrLnJ1L25hbWUv")}${n}`}$("#movieDirectors > p")[0].innerText=0<t.movieDirectors.length?t.movieDirectors.slice(0,-2):d,$("#movieProducers > p")[0].innerText=0<t.movieProducers.length?t.movieProducers.slice(0,-2):d,$("#movieCompositors > p")[0].innerText=0<t.movieCompositors.length?t.movieCompositors.slice(0,-2):d},5e3),$("#movieYear > p")[0].innerText=a.year;let r="";a.countries.forEach(function(e){r+=e.country+", "}),$("#movieCountries > p")[0].innerText=t.checkForNull(r.slice(0,-2),d);let l="";a.genres.forEach(function(e){l+=e.genre+", "}),$("#movieGenres > p")[0].innerText=t.checkForNull(l.slice(0,-2),d),$("#movieBudget > p")[0].innerText=null===o.budget?d:`${o.budget}`,$("#movieGrossRu > p")[0].innerText=null===o.grossRu?d:`$${o.grossRu}`,$("#movieGrossUsa > p")[0].innerText=null===o.grossUsa?d:`$${o.grossUsa}`,$("#movieGrossWorld > p")[0].innerText=null===o.grossWorld?d:`$${o.grossWorld}`,$("#moviePremiereRu > p")[0].innerText=t.checkForNull(a.premiereRu,d),$("#moviePremiereWorld > p")[0].innerText=t.checkForNull(a.premiereWorld,d),$("#movieLength > p")[0].innerText=t.checkForNull(a.filmLength,d),$("#movieDescription > p")[0].innerText=t.checkForNull(a.description,d)}})},this.checkForNull=function(t,e){return null===t?e:t},this.movieFetch(),window.socket.on("changeMedia",function(){t.movieFetch()}),this.createMovieOptions=function(){$(".well.active > .option").each(function(e,n){let a=/.*?https?:\/\/www\.kinopoisk\.ru\/film\/(\d+)\//g,o=$(n).text().substring(2),i=a.test(o);if(i){let e=o.replace(a,"$1"),i=$(`<i id="movieInfoToggle" class="glyphicon glyphicon-chevron-left pull-right pointer" />`).attr("title","\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044E \u043E \u0444\u0438\u043B\u044C\u043C\u0435").on("click",()=>{let e=$(this).find("#movieInfoToggle"),n=$(this).find("#movieOptionPanel");t.toggleOptionDropdown(e),t.renderOptionPanel(n)}).prependTo($(n));$.ajax({type:"GET",dataType:"application/json",url:`${atob("aHR0cHM6Ly9raW5vcG9pc2thcGl1bm9mZmljaWFsLnRlY2gvYXBpL3YyLjEvZmlsbXMv")}${e}${atob("P2FwcGVuZF90b19yZXNwb25zZT1CVURHRVQsIFJBVElORw==")}`,beforeSend:function(e){e.setRequestHeader(`${atob("WC1BUEktS0VZ")}`,`${atob("NGMwMGE3ZmItOGY3Zi00YTI3LTkwNzMtNzBlN2IxYWYwZDNk")}`)},complete:function(e){let a=JSON.parse(e.responseText),o=a.data,i=a.rating,s=a.externalId.imdbId,d="\u043D\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043D\u043E",r=`<img class="movieImg" src="${o.posterUrl}" style="max-width: 10em;border: double;border-color: crimson;"/>`,l=`<a href=${o.webUrl} target="_blank" rel="noopener noreferrer" ><img class="movie-rate-img" src="https://i.imgur.com/QJinjle.png" /><strong> ${i.rating}</strong></a>`,c=`<a href=${atob("aHR0cHM6Ly93d3cuaW1kYi5jb20vdGl0bGUv")}${s} target="_blank" rel="noopener noreferrer" ><img class="movie-rate-img" src="https://i.imgur.com/AD1JBPx.png" /><strong> ${i.ratingImdb}</strong></a>`,p=`<a href="${o.webUrl}"><strong>${o.nameRu}</strong></a>`,u=`<em>${o.nameEn}</em>`,m=o.year,h="";o.countries.forEach(function(e){h+=e.country+", "}),h=t.checkForNull(h.slice(0,-2),d);let g="";o.genres.forEach(function(e){g+=e.genre+", "}),g=t.checkForNull(g.slice(0,-2),d);let f=t.checkForNull(o.filmLength,d),b=t.checkForNull(o.description,d),v=$(`
								<div id="movieOptionPanel" class="well closePanel" style="display: none;">
									<div class="row">
										<div class="col-lg-5 col-md-5 col-lg-5">
											${r}
										</div>
										<div id="movieInfoContent" class="col-lg-7 col-md-7 col-lg-7">
											<div class="row" style="font-size: 24px;">
												${p}
											</div>
											<div class="row">
												${u}
											</div>
											<br>
											<div class="row">
												<p>Год производства: ${m}</p>
											</div>
											<div class="row">
												<p>Жанр: ${g}</p>
											</div>
											<div class="row">
												<p>Страна: ${h}</p>
											</div>
											<div class="row">
												<p>Время: ${f}</p>
											</div>
											<div class="row">
												<div class="col-lg-6 col-md-6 col-lg-6">${l}</div>
												<div class="col-lg-6 col-md-6 col-lg-6">${c}</div>
											</div>
										</div>
									</div>
									<hr>
									<div class="row">
										<div class="col-lg-12 col-md-12 col-lg-12">
											<h4><strong>Описание</strong></h4>
										</div>
										<div class="col-lg-12 col-md-12 col-lg-12">
											${b}
										</div>
									</div>
								</div>
							`).appendTo($(n))}})}})},this.toggleOptionDropdown=function(e){e.hasClass("glyphicon-chevron-left")?(e.removeClass("glyphicon-chevron-left"),e.addClass("glyphicon-chevron-down")):(e.removeClass("glyphicon-chevron-down"),e.addClass("glyphicon-chevron-left"))},this.renderOptionPanel=function(e){return e?void(e.hasClass("openPanel")?(e.hide(),e.removeClass("openPanel"),e.addClass("closePanel")):(e.show(),e.removeClass("closePanel"),e.addClass("openPanel"))):null},setTimeout(function(){t.createMovieOptions()},4e3),window.socket.on("newPoll",function(){t.createMovieOptions()})})},function(){window.cytubeEnhanced.addModule("chess",function(){'use strict';var e=this;this.addChessButton=function(){0==$("#chessButton").length&&($("<span id=\"chessButton\" title=\"\u0418\u0433\u0440\u0430\u0442\u044C \u0432 \u0448\u0430\u0445\u043C\u0430\u0442\u044B\" style=\"padding: 0px 0px;cursor: pointer\">").html("<img src=\"https://i.imgur.com/RuE7GeG.png\" style=\"max-height: 40px;\"/>").appendTo("#leftcontrols").on("click",()=>{e.renderChessPanel(),e.updateChessPanel()}),this.createChessPanel())},this.createStyles=function(){$(`<style>`).appendTo("head").text(`
				.chess-game-id-input {
					width: calc(100% - 145px - 15px);

					margin-left: 15px;
				}

				.chess-join-game-btn {
					margin-left: calc(100% - 145px - 15px);

					position: relative;
					top: -38px;
				}
			`)},this.createChessPanel=function(){0==$("#chessPanel").length&&$(`
					<div class="col-lg-12 col-md-12 closePanel" id="chessPanel" style="display: none;">
						<div class="well" id="chessPanelContent" style="min-height: 20em">
			
							<div class="row">
								<div id="chessHeader" class="row text-center"><strong>Шахматы</strong></div>
							</div>
		
							<hr>
		
							<div class="row">
								<div class="col-lg-12 col-md-12">
									<div class="col-lg-3 col-md-3 col-lg-3">
										<strong>ID игры:</strong>
									</div>
									<div id="chessGameID" class="col-lg-3 col-md-3 col-lg-3">
										<strong></strong>
									</div>
									<div id="chessGameID" class="col-lg-6 col-md-6 col-lg-6">
									<button id="chessInviteBtn" class="btn btn-sm btn-info pull-right">Пригласить <span class="fa fa-share" /></button>
									<button id="chessCreateGame" class="btn btn-sm btn-success pull-right">Создать <span class="fa fa-chess-knight" /></button>
									</div>
								</div>
							</div>
							
							<hr>
		
							<div class="row">
								<div class="col-xs-12 col-md-12 col-lg-12" >
									<input class="chess-game-id-input form-control not-contained" type="text" id="chessGameIDinput" placeholder="ID игры" maxlength="8">
									<div class="c-wrap">
										<span id="chessJoinBtn" class="chess-join-game-btn btn btn-md btn-success share-points-btn" title="Подарить барбитульки">
											<span class="fa fa-chess-knight">
												Присоединиться
											</span>
										</span>
									</div>
								</div> 
							</div>
		
							<hr>  
		
							<div class="row">
								<div class="col-lg-12 col-md-12">
									<div id="chessView" class="row text-center">
										
									</div>
								</div>
							</div>
		
							<hr>
							
						</div>
					</div>
				`).insertBefore("#pollwrap")},this.renderChessPanel=function(){var e=$("#chessPanel");e&&(e.hasClass("openPanel")?(e.hide(),e.removeClass("openPanel"),e.addClass("closePanel")):(e.show(),e.removeClass("closePanel"),e.addClass("openPanel")))},this.updateChessPanel=function(){let t=randomByte();$("#chessGameID > strong")[0].innerText=t,$("#chessInviteBtn").unbind("click"),$("#chessInviteBtn").on("click",()=>{e.shareGameId(t)}),$("#chessCreateGame").unbind("click"),$("#chessCreateGame").on("click",()=>{e.createRoom(t)}),$("#chessJoinBtn").unbind("click"),$("#chessJoinBtn").on("click",()=>{e.createRoom()})},this.shareGameId=function(e){window.socket.emit("chatMsg",{msg:`:2peepochess: Шахматы: ${e}`})},this.createRoom=function(){0<$("#chessIframe").length&&$("#chessIframe").remove();let e=$("#chessGameIDinput").val(),t=$("#chessPanel").width()-40,n=$(`<iframe id="chessIframe" src="https://play.chessbase.com/en/Play?room=${e}" style="width:${t}px;height:${t}px"></iframe>`);n.appendTo("#chessView"),$("#chessHelp").remove();$(`
				<div class="row" id="chessHelp">
					<div class="col-lg-12 col-md-12">
						<div class="row text-center">
							<img src="https://i.imgur.com/ejTXTFv.png" />
							<br>
							<p>Нажмите "5 min Blitz" для начала игры</p>
						</div>
					</div>
				</div>`).appendTo("#chessPanelContent")},this.addChessButton(),this.createStyles()})},function(){window.cytubeEnhanced.addModule("chatlineSmiles",function(){'use strict';var e=this;this.tabNames=["YOBA","PEPE","MUSIC","POLITICS","OTHER"],this.chatlineCloseCallback=function(){"undefined"!==$._data($("#chatline")[0],"events").click&&$("#chatline").on("click",()=>{$("#smileDiv").hasClass("copen")&&$("#btn-smile").click()})},this.init=function(){e.createEmotesBoard("smileDiv");var t=e.CElement("div","btn-smile","","");USEROPTS.chatbtn&&$(t).addClass("shifted"),$(t).insertAfter("#messagebuffer"),$(t).on("click",()=>{$("#chatline").focus(),e.upDiv("smileDiv"),e.toggleButton(this,"","")}),e.chatlineCloseCallback(),window.socket.on("updateEmote",function(){e.updateEmotesBoard()}),window.socket.on("importEmotes",function(){e.updateEmotesBoard()}),window.socket.on("removeEmote",function(){e.updateEmotesBoard()}),window.socket.on("emoteList",function(){e.updateEmotesBoard()})},this.toggleButton=function(t,n,a){0===$("#emojipanel0").children().length&&e.updateEmotesBoard(),t=$(t),t.toggleClass("cpushed"),t.hasClass("cpushed")?t.html(a):t.html(n)},this.upDiv=function(e){$(`#${e}`).toggleClass("copen")},this.createEmotesBoard=function(t){for(var n=$("<div></div>").attr("id",t),a=[],o=0;o<e.tabNames.length;o++)a.push(new e.CElement("div","emojipanel"+o,"","emoji-panel")),$(a[o]).appendTo(n);0<a.length&&$(a[0]).addClass("copen");var s=e.createMotdButtons(t+"Radio","btn btn-default emoji-button",e.tabNames,a);$(s).insertAfter("#messagebuffer"),$(n).insertAfter("#messagebuffer"),e.appendCSS()},this.CElement=function(e,t,n,a){return $(`<${e}></${e}>`).attr("id",t).addClass(a).html(n)},this.createMotdButtons=function(e,t,n,o){var i=$("<div></div>").attr("id",e);let s=Array(n.length),d=Array(n.length);return $(n).each(function(n,a){s[n]=$(`<input type="radio" name=${e} id=${e+n} value=${n}>`),d[n]=$(`<label for=${e+n} class="${t}" >${a}</label>`),$(d[n]).on("click",()=>{$(d).each(function(e){e==n?$(o[e]).addClass("copen"):$(o[e]).removeClass("copen")})}),$(s[n]).appendTo(i),$(d[n]).appendTo(i)}),i},this.updateEmotesBoard=function(){var t=$(".emoji-panel");t.each(function(e,t){$(t).html("")}),CHANNEL.emotes.forEach(function(n){switch(n.name[1]){case"1":e.addSmileToDiv(t[0],n);break;case"2":e.addSmileToDiv(t[1],n);break;case"3":e.addSmileToDiv(t[2],n);break;case"4":e.addSmileToDiv(t[3],n);break;default:e.addSmileToDiv(t[4],n);}})},this.addSmileToDiv=function(t,n){let a=$("<img class=\"smile-preview\">").attr({src:n.image}).click(function(){e.pasteSmile(n.name)});$(t).append(a)},this.pasteSmile=function(e){$("#chatline").val(`${$("#chatline").val()} ${e} `).focus()},this.sendEvent=function(e,t){if(e.fireEvent)e.fireEvent("on"+t);else{var n=doc.createEvent("Events");n.initEvent(t,!0,!1),e.dispatchEvent(n)}},this.appendCSS=function(){$(`<style>`).appendTo("head").text(`
			@media (max-width: 991px) { 
				#smileDiv, #smileDivRadio {
					bottom: 76px;
				}
			}

			@media (min-width: 992px) { 
				#smileDiv, #smileDivRadio {
					bottom: 38px;
				}
			}

			#smileDiv, #smileDivRadio {
				position: absolute;
				overflow: hidden;
				width: 100%;
				left: 0;
				z-index: 9;
				max-height: 0;
				font-size: 14px;
				transition-duration: 0.115s;
				transition-timing-function: cubic-bezier(0.75, 0.00, 0.25, 1.00);
				text-align: center;
				padding: 0;
				border-radius: 0;
				background-color: rgb(0 0 0 / 75%);
			}
				#smileDivRadio input {
					display: none;
				}
				#smileDivRadio label:hover {
					background-color: hsl(0deg 0% 85%);
				}
				#smileDivRadio input:checked + label {
					background-color: transparent;
					color: inherit;
				}
				#smileDiv {
					border-top: solid 0em;
				}
				#smileDiv.copen {
					max-height: 60%;
					border-bottom: 2em solid transparent!important;
					overflow-y: auto;
					padding: 0.5em 0;
				}
				#smileDiv.copen + #smileDivRadio {
					max-height: 100%;
				}
					.smile-preview {
						cursor: pointer;
						margin: 0.2em;
						max-height: 40px;
					}
					.chat-image {
						max-height: 8em;
						max-width: 100%;
						cursor: zoom-in;
					}
				.emoji-panel {
					display: none;
				}
				.emoji-panel.copen {
					display: block;
				}
				.emoji-button {
					color: white;
					font-weight: 600;
					text-shadow: none;
					line-height: 2em;
					padding: 0;
					width: 20%;
				}
				.emoji-button:focus {
					color: #fff;
					background-color: rgba(0,0,0,0);
				}
				.emoji-button:hover {
					color: #333;
					text-shadow: none;
				}
			
				#smileDivRadio0 + label { background-color: hsl(50deg 100% 35%);}
				#smileDivRadio1 + label { background-color: hsl(100deg 100% 25%);}
				#smileDivRadio2 + label { background-color: hsl(300deg 100% 25%);}
				#smileDivRadio3 + label { background-color: hsl(200deg 100% 25%);}
				#smileDivRadio4 + label { background-color: hsl(0deg 0% 35%);}
			
				#btn-smile {
					position: absolute;
					cursor: pointer;
					height: 2.5em;
					z-index: 1;
					right: 0px;
					width: 3em;
					background-image: url(https://i.imgur.com/nGePXmR.png);
					background-size: auto 82%;
					background-position: center;
					background-repeat: no-repeat;
				}
					#btn-smile.cpushed {
						background-image: url(https://i.imgur.com/dFq5DXU.png);
					}

					#btn-smile.shifted {
						right: 50px;
					}

					#btn-smile {
						opacity: 0.5; 
					}  

					#btn-smile:hover {
						opacity: 1; 
					}
				
				#chatline {
					padding-right: 40px;
				}

			`)},this.init()})},function(){window.cytubeEnhanced.addModule("copyChatEmote",function(){'use strict';var e=this;this.$chatline=$("#chatline"),this.addClickCallback=function(){$(".channel-emote").each((t,n)=>{n=$(n);let a=$(n),o=a.attr("title");a.off(),a.click(()=>{e.$chatline.val(e.$chatline.val()+` ${o} `).focus()}),a.attr("style","cursor: pointer")})},setTimeout(function(){e.addClickCallback()},1e3),window.socket.on("chatMsg",function(){setTimeout(function(){e.addClickCallback()},1e3)})})},function(){window.cytubeEnhanced.addModule("modPoll",function(e,t){'use strict';var n=this;if(!(2>window.CLIENT.rank)){console.log("[cytubeEnhanced]: modPoll module is loading...");t=$.extend({},{pollTitleTemplates:[{name:"\u0420\u0435\u043A\u0432\u0435\u0441\u0442\u044B",text:"\u0420\u0435\u043A\u0432\u0435\u0441\u0442\u044B \u0432 \u041B\u0421. \u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 + \u0441\u0441\u044B\u043B\u043A\u0430 \u043D\u0430 \u041A\u0438\u043D\u043E\u043F\u043E\u0438\u0441\u043A"},{name:"\u0415\u0434\u0438\u043D\u0438\u0447\u043A\u0438",text:"\u041E\u0442\u0431\u043E\u0440\u043E\u0447\u043D\u044B\u0439 (\u0435\u0434\u0438\u043D\u0438\u0447\u043A\u0438)"},{name:"\u041E\u0442\u0431\u043E\u0440\u043E\u0447\u043D\u044B\u0439",text:"\u041E\u0442\u0431\u043E\u0440\u043E\u0447\u043D\u044B\u0439"},{name:"\u0424\u0438\u043D\u0430\u043B",text:"\u0424\u0438\u043D\u0430\u043B\u043E\u0447\u043A\u0430"},{name:"\u0413\u041E\u041B\u041E\u0421\u041E\u0412\u0410\u041D\u0418\u0415",text:"\u0413\u041E\u041B\u041E\u0421\u041E\u0412\u0410\u041D\u0418\u0415"}],pollTimeoutTemplates:[{name:"30 \u0441\u0435\u043A",text:"30"},{name:"1 \u043C\u0438\u043D\u0443\u0442\u0430",text:"1:00"},{name:"3 \u043C\u0438\u043D\u0443\u0442\u044B",text:"3:00"},{name:"5 \u043C\u0438\u043D\u0443\u0442",text:"5:00"}]},t),this.init=function(){n.setupNewPollButton(),n.setupNewPollCallback(),n.appendCSS()},this.setupNewPollButton=function(){$("#newpollbtn").on("click",function(){$(".poll-menu-option").remove(),n.addOptionBtnSetup(),n.addTemplates()})},this.setupNewPollCallback=function(){window.socket.on("newPoll",function(){setTimeout(function(){n.copyOptionSetup()},1e3)}),setTimeout(function(){n.copyOptionSetup()},5e3)},this.addTemplates=function(){n.addTitleTemplates(),n.addTimeoutTemplates()},this.addTitleTemplates=function(){let e=$($("#pollwrap > .well.poll-menu > input.form-control")[0]),n=$("<div>").addClass("input-group").addClass("pointer").insertBefore($(e));$("<br><br>").insertBefore($(n)),$("<span>").addClass("btn-md").addClass("btn-default").addClass("dropdown-toggle").addClass("input-group-addon").attr("id","poll-dropdown-addon").attr("data-toggle","dropdown").attr("aria-haspopup","true").attr("aria-expanded","false").appendTo($(n)).html(`<strong>Шаблоны</strong><span class="caret"></span>`),e.attr("placeholder","\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u043E\u043F\u0440\u043E\u0441\u0430").attr("aria-describedby","poll-dropdown-addon").attr("id","poll-title").appendTo($(n));let a=$("<ul>").addClass("dropdown-menu").prependTo($(n));for(var o=0;o<t.pollTitleTemplates.length;o++){let n=t.pollTitleTemplates[o].text;$("<li>").attr("id",`poll-option-${o}`).html(`<a>${t.pollTitleTemplates[o].name}</a>`).appendTo(a).on("click",function(){e.val(`${n}`)})}},this.addTimeoutTemplates=function(){let e=$($("#pollwrap > .well.poll-menu > input.form-control")[0]),n=$("<div>").addClass("input-group").addClass("pointer").insertBefore($(e));$("<span>").addClass("btn-md").addClass("btn-default").addClass("dropdown-toggle").addClass("input-group-addon").attr("id","poll-dropdown-addon").attr("data-toggle","dropdown").attr("aria-haspopup","true").attr("aria-expanded","false").appendTo($(n)).html(`<strong>Шаблоны</strong><span class="caret"></span>`),e.attr("placeholder","\u0422\u0430\u0439\u043C\u0435\u0440").attr("aria-describedby","poll-dropdown-addon").attr("id","poll-timeout").appendTo($(n));let a=$("<ul>").addClass("dropdown-menu").prependTo($(n));for(var o=0;o<t.pollTimeoutTemplates.length;o++){let n=t.pollTimeoutTemplates[o].text;$("<li>").attr("id",`poll-option-${o}`).html(`<a>${t.pollTimeoutTemplates[o].name}</a>`).appendTo(a).on("click",function(){e.val(`${n}`)})}},this.copyOptionSetup=function(){0<$("poll-copy-option").length&&0==$(".option").length||($("<br>").insertAfter($("#pollwrap > .well.active > h3")),$(".well.active > .option").each(function(e,t){$(`<span id="pollOptionCopy" class="btn btn-sm btn-info pull-left pointer" title="Очистить строку"><i class="glyphicon glyphicon-duplicate" /></span>`).attr("title","\u0421\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0432\u0430\u0440\u0438\u0430\u043D\u0442 \u0432 \u043D\u043E\u0432\u043E\u0435 \u0433\u043E\u043B\u043E\u0441\u043E\u0432\u0430\u043D\u0438\u0435").on("click",()=>{n.addOption(this)}).prependTo($(t))}))},this.addOption=function(e){let t=e.innerText.split(/(^([0-9]*(\?)*))/g)[4],n=$(".poll-menu-option");if(0==n.length)return;let a=!1;for(var o=0;o<n.length;o++)if(""===$(n[o]).val())return $(n[o]).val(t),void(a=!0);if(!a)return $("#addNewOptionBtn").click(),void $($(".poll-menu-option").last()).val(t)},this.addOptionBtnSetup=function(){let e=$("#pollwrap .btn-block");$("<br>").insertBefore(e);var t=$("#pollwrap button:contains(\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432\u0430\u0440\u0438\u0430\u043D\u0442)");t.attr("id","addNewOptionBtn"),t.off(),t.insertBefore(e),$("<br>").insertBefore(e),t.click(n.createPollOption),n.createPollOption(),n.createPollOption(),n.createRemoveLastOptionButton(t)},this.createRemoveLastOptionButton=function(e){$("<button>").attr("id","removeLastOptionButton").addClass("btn").addClass("btn-sm").addClass("btn-default").html("\u0423\u0431\u0440\u0430\u0442\u044C \u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0439 \u0432\u0430\u0440\u0438\u0430\u043D\u0442").insertAfter(e).click(()=>{0==$(".poll-clean-option").length||($(".form-control.poll-menu-option").last().remove(),$(".poll-clean-option").last().remove())})},this.createPollOption=function(){let e=$("<input/>").addClass("form-control").attr("type","text").addClass("poll-menu-option").insertBefore("#pollwrap .btn-block"),t=$("<span>").addClass("btn").addClass("btn-sm").addClass("btn-danger").addClass("poll-clean-option").attr("title","\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u0441\u0442\u0440\u043E\u043A\u0443").html(`<span class="glyphicon glyphicon-trash">`);t.click(()=>{$(e).remove(),$(t).remove()}),$("<div>").addClass("c-wrap").append(t).insertAfter(e)},this.appendCSS=function(){$(`<style>`).appendTo("head").text(`
			
			.poll-clean-option{
				position: relative;
				top: -44px;
				margin-left: calc(100% - 38px);
				opacity: 0.8;
			}

				.poll-clean-option:hover{
					opacity: 1.0
				}

			.c-wrap{
				height: 0px
			}

			.form-control.poll-menu-option{
				padding-right: 40px;
			}

			#pollOptionCopy{
				top: 8px;
    		right: 4px;
			}

			`)},this.init(),console.log("[cytubeEnhanced]: modPoll module is loaded!")}})},function(){window.cytubeEnhanced.addModule("videoRewindButton",function(e,t){'use strict';var n=this;t=$.extend({},{rewindRate:10},t),this.playerRewind=function(e){"number"!=typeof e||PLAYER.getTime(function(t){let n=t;USEROPTS.synch=!1,PLAYER.seekTo(n+e),$("#videoRewindButton").attr("disabled",!0);let a=n+Math.abs(e);setTimeout(()=>{PLAYER.seekTo(a),USEROPTS.synch=!0,$("#videoRewindButton").attr("disabled",!1)},1e3*Math.abs(e))})},this.setup=function(){0==$("#videoRewindButton").length&&$("<button>").addClass("btn").addClass("btn-sm").addClass("btn-default").attr("id","videoRewindButton").attr("title",`Отмотать на ${t.rewindRate} секунд`).attr("disabled",!1).html(`<span class="glyphicon glyphicon-backward"><strong> ${t.rewindRate}</strong></span>`).prependTo($("#videocontrols")).click(()=>{n.playerRewind(-t.rewindRate)})},this.setup()})},function(){window.cytubeEnhanced.addModule("playerMuteButton",function(){'use strict';var e=this;this.init=function(){0===$("#playerMuteBtn").length&&$("<button class=\"btn btn-sm btn-default\" id=\"playerMuteBtn\"><span class=\"glyphicon glyphicon-volume-up\"></span></button>").on("click",function(){e.toggleMute()}).appendTo("#plcontrol")},this.toggleMute=function(){window.PLAYER.getVolume(e=>{0<e?window.PLAYER.setVolume(0):window.PLAYER.setVolume(1)})},this.init()})},function(){window.cytubeEnhanced.addModule("emoteList",function(t,n){'use strict';const a=this;n=$.extend({},{visibleAmount:276},n),this.init=()=>{a.setupVisible(),a.setupHidden(),a.emoteEditCallbacks()},this.refreshVisibleEmotes=()=>{$("#visibleEmotesList").empty();for(var e=0;e<n.visibleAmount;e++)$("<img class=\"panelemote\">").attr({src:CHANNEL.emotes[e].image,title:CHANNEL.emotes[e].name}).on("click",n=>t.Helpers.addMessageToChatInput(" "+$(n.target).attr("title")+" ","end")).bind("contextmenu",()=>!1).on("contextmenu",n=>t.Helpers.addMessageToChatInput(" [f] "+$(n.target).attr("title")+" [/f] ","end")).appendTo("#visibleEmotesList")},this.setupVisible=()=>{$("<div class=\"row\" id=\"visibleEmotes\">").html("<div class=\"col-lg-12 col-md-12\"><div class=\"well\" id=\"visibleEmotesList\" style=\"display: none;\"></div></div>").insertBefore("#playlistrow"),$("#emotelistbtn").on("click",()=>{0===$("#visibleEmotesList").children().length&&a.refreshVisibleEmotes(),$("#visibleEmotesList").slideToggle(200)})},this.refreshHiddenEmotes=()=>{$("#hiddenEmotesList").empty();for(var e=n.visibleAmount;e<CHANNEL.emotes.length;e++)$("<img class=\"panelemote\">").attr({src:CHANNEL.emotes[e].image,title:CHANNEL.emotes[e].name}).on("click",n=>t.Helpers.addMessageToChatInput(" "+$(n.target).attr("title")+" ","end")).bind("contextmenu",()=>!1).on("contextmenu",n=>t.Helpers.addMessageToChatInput(" [f] "+$(n.target).attr("title")+" [/f] ","end")).appendTo("#hiddenEmotesList")},this.setupHidden=()=>{$("<div class=\"row\" id=\"hiddenEmotes\">").html("<div class=\"col-lg-12 col-md-12\"><div class=\"well\" id=\"hiddenEmotesList\" style=\"display: none;\"></div></div>").insertAfter("#visibleEmotes"),$("#emotelistbtn").bind("contextmenu",()=>!1),$("#emotelistbtn").on("contextmenu",()=>{0===$("#hiddenEmotesList").children().length&&a.refreshHiddenEmotes(),$("#hiddenEmotesList").slideToggle(200)})},this.handleEmoteEdit=()=>{a.refreshVisibleEmotes(),a.refreshHiddenEmotes()},this.emoteEditCallbacks=()=>{window.socket.on("updateEmote",function(){a.handleEmoteEdit()}),window.socket.on("importEmotes",function(){a.handleEmoteEdit()}),window.socket.on("removeEmote",function(){a.handleEmoteEdit()}),window.socket.on("emoteList",function(){a.handleEmoteEdit()})},this.init()})},function(){window.cytubeEnhanced.addModule("enchancedIgnore",function(){'use strict';const e=this;this.init=function(){e.loadIgnoreList(),e.updateUserDropdown(),e.reloadUersDropdown()},this.loadIgnoreList=()=>(window.IGNORED=JSON.parse(localStorage.getItem("IGNORED"))||[],window.IGNORED),this.updateUserDropdown=function(){window.addUserDropdown=function(t){return function(n){var a=t(n);const o=n.data("name"),i=$(n.find(".user-dropdown > .btn-group-vertical")[0].firstChild);return i.on("click",()=>{const t=e.loadIgnoreList(),n=-1!=t.indexOf(o);n?(t.splice(t.indexOf(o),1),localStorage.setItem("IGNORED",JSON.stringify(t))):(t.push(o),localStorage.setItem("IGNORED",JSON.stringify(t)))}),a}}(window.addUserDropdown)},this.reloadUersDropdown=()=>{const e=$("#userlist").children();for(var t=0;t<e.length;t++)window.addUserDropdown($(e[t]))},this.init()})},function(){window.cytubeEnhanced.addModule("voiceMsg",function(e,t){'use strict';const n=this;t=$.extend({},{test:1},t),this.init=()=>{n.createPanelToggle(),n.createPanel(),n.appendCSS()},this.createPanelToggle=()=>{0==$("#audioPanelToggle").length&&($("#leftcontrols").append(`<button id="audioPanelToggle" class="btn btn-sm btn-default" title="Голосовое сообщение" data-toggle="modal">
							<span class="glyphicon glyphicon-uploadbtn"></span>
						</button>`),$("#audioPanelToggle").on("click",()=>$("#audioPanel").slideToggle(200)))},this.createPanel=()=>{$(`
				<div class="col-lg-12 col-md-12" id="audioPanel" style="display: none;">
					<div class="well img-menu text-center" id="audioPanelContent" style="margin-bottom: 0 !important; min-height: 100px;">
						<div><strong>Голосовое сообщение</strong></div>

						<br>

						<div>
							<button id="voiceRecordBtn" class="btn btn-md btn-info" title="Начать / Закончить запись">
								<span id="recordStartIcon" class="glyphicon glyphicon-ice-lolly"></span>
								<span id="recordStopIcon" class="glyphicon glyphicon-stop" style="display: none;"></span>
							</button>
							<button id="voiceSendBtn" class="btn btn-md btn-success" title="Загрузить и отправить" style="display: none;">
								<span class="glyphicon glyphicon-send"></span>
							</button>
						</div>
						
						<hr>
						
						<div>
							<div id="recContent">
							</div>
						</div>

					</div>
				</div>
			`).insertBefore("#pollwrap"),$("#voiceRecordBtn").on("click",()=>{this.handleRecording()}),$("#voiceSendBtn").on("click",()=>{this.handleSendVoice()})};let a=null;this.handleRecording=()=>{const e=()=>{a.stop()};$("#voiceRecordBtn").hasClass("btn-info")?(console.log("Start recording"),$("#recordStartIcon").hide(),$("#recordStopIcon").show(),$("#voiceRecordBtn").removeClass("btn-info"),$("#voiceRecordBtn").addClass("btn-danger"),(()=>{a=null;const e=e=>{const t=[];a=new MediaRecorder(e,{type:"audio/ogg; codecs=opus"}),a.start(),a.ondataavailable=n=>{t.push(n.data)},a.onstop=function(){const e=new Blob(t,{type:"audio/ogg; codecs=opus"}),n=window.URL.createObjectURL(e);console.log("audioURL"),console.log(n);const a=$("<audio>");a.attr({id:"audioRec",controls:"true",src:n}),a.appendTo("#recContent"),console.log("recorder stopped"),$("#voiceSendBtn").show()}};navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.getUserMedia({audio:!0},e,t=>{console.log(t)})})()):(console.log("Stop recording"),$("#recordStopIcon").hide(),$("#recordStartIcon").show(),$("#voiceRecordBtn").removeClass("btn-danger"),$("#voiceRecordBtn").addClass("btn-info"),e())},this.handleSendVoice=async()=>{const e=$("#audioRec"),t=await fetch(e.attr("src")).then(e=>e.blob()),n=await this.blobToBase64(t);e.remove(),$("#voiceSendBtn").hide(),this.uploadAudio(n)},this.blobToBase64=e=>new Promise(t=>{const n=new FileReader;n.onloadend=()=>t(n.result),n.readAsDataURL(e)}),this.uploadAudio=e=>{$.ajax({url:"https://nifty-well-gander.glitch.me/catbox",type:"POST",data:{file:e},dataType:"json",success:function(e){console.log("Voice recording link: "+e),$("#chatline").val(`${$("#chatline").val()} ${e.data.url} `)},error:function(e){console.log(e)}})},this.appendCSS=function(){$(`<style>`).appendTo("head").text(`
			
				#audioPanelToggle {
					/* background: url(https://i.imgur.com/DLnEPwY.png) no-repeat; */
					background: url(https://i.imgur.com/7rOjHuT.png) no-repeat;
					height: 40px !important;
					width: 40px !important;
					text-indent: -9999px;
					outline: none;
					border: none;
					opacity: 0.8;
					background-size: contain !important;
				}

			`)},this.init()})},function(){window.cytubeEnhanced.addModule("findMovie",function(){'use strict';const e=this;this.init=()=>{e.createPanelToggle(),e.createPanel(),e.appendCSS()},this.createPanelToggle=()=>{0==$("#findMoviePanelToggle").length&&($("#leftcontrols").append(`<button id="findMoviePanelToggle" class="btn btn-sm btn-default" title="Найти кин4" data-toggle="modal">
							<span class="glyphicon glyphicon-uploadbtn"></span>
						</button>`),$("#findMoviePanelToggle").on("click",()=>$("#findMoviePanel").slideToggle(200)))},this.createPanel=()=>{$(`
				<div class="col-lg-12 col-md-12" id="findMoviePanel" style="display: none;">
					<div class="well img-menu text-center" id="findMoviePanelContent" style="margin-bottom: 0 !important; min-height: 100px;">
						<div><strong>Найти кин4</strong></div>

						<br>

						<div>
							<input class="form-control not-contained" type="text" id="findMovieKPInput" placeholder="Кинопоиск ID">
							
							<div class="c-wrap">
								<span id="findMovieKPBtn" class="btn btn-md btn-warning" title="Найти кин4">
									<span class="glyphicon glyphicon-search"></span>
								</span>
							</div>
						</div>
						
						<hr>
						
						<div>
							<div id="foundMovieInfo" class="row">
								
							</div>
							<br>
							<div id="foundMovieLink" class="row">
								<div id="foundMovieLinkContent" class="col-lg-12 col-md-12">

								</div>
							</div>
						</div>

					</div>
				</div>
			`).insertBefore("#pollwrap"),$("#findMovieKPBtn").on("click",()=>{this.handleFindMovie()}),$("#findMovieKPInput").on("input",e.handleKpInput)},this.kpFormatter=t=>-1===t.indexOf("kinopoisk.ru")?t:t.match(/(\d+)/g)[0]||"",this.handleKpInput=()=>{const t=$("#findMovieKPInput").val(),n=e.kpFormatter(t);$("#findMovieKPInput").val(n)},this.handleFindMovie=()=>{const t=$("#findMovieKPInput").val();$("#findMovieKPInput").val(""),$.ajax({url:"https://nifty-well-gander.glitch.me/getMovie",type:"POST",data:{kpID:t},dataType:"json",success:function(t){e.createMovieLinks(t.data.movieInfo)},error:function(e){console.log(e)}})},this.createMovieLinks=t=>{e.createTranslations(t)},this.createTranslations=t=>{$("#found-movie-translation-dropdown").remove(),$("#foundMovieInfo").empty();const n=$("<div id=\"found-movie-translation-dropdown\" class=\"dropdown col-lg-6 col-md-6\">").appendTo("#foundMovieInfo"),a=$("<button class=\"btn btn-default dropdown-toggle col-lg-12 col-md-12\" type=\"button\" id=\"found-movie-translation\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"true\">").html(`Перевод <span class="caret"></span>`).appendTo(n),o=$("<ul class=\"dropdown-menu pull-left\" aria-labelledby=\"found-movie-translation\">").appendTo(n);for(var s=0;s<t.length;s++){const n=t[s].translation,a=s;$("<li>").attr("id",`translation-option-${s}`).html(`<a>${n}</a>`).appendTo(o).on("click",function(){e.createQualities(t,a)})}},this.createQualities=(t,n)=>{$("#found-movie-qualities-dropdown").remove(),$("#foundMovieLinkContent").empty();const a=$("<div id=\"found-movie-qualities-dropdown\" class=\"dropdown col-lg-6 col-md-6\">").appendTo("#foundMovieInfo"),o=$("<button class=\"btn btn-default dropdown-toggle col-lg-12 col-md-12\" type=\"button\" id=\"found-movie-qualities\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"true\">").html(`Качество <span class="caret"></span>`).appendTo(a),s=$("<ul class=\"dropdown-menu pull-right\" aria-labelledby=\"found-movie-translation\">").appendTo(a),d=t[n].qualities;for(let a=0;a<d.length;a++){const t=d[a].movieLinks,n=d[a].quality;$("<li>").attr("id",`translation-option-${a}`).html(`<a>${n}</a>`).appendTo(s).on("click",function(){e.createFoundMovieLink(t)})}},this.createFoundMovieLink=e=>{$("#foundMovieLinkContent").empty();const t=$("<input disabled=\"true\" class=\"form-control not-contained\" type=\"text\" id=\"found-movie-link-input\">").appendTo("#foundMovieLinkContent").val(e),n=$("<div class=\"c-wrap\">").html(`<span id="found-movie-link-copy-btn" class="btn btn-md btn-info" title="Скопировать ссылку"><span class="glyphicon glyphicon-copy"></span></span>`).insertAfter("#found-movie-link-input").on("click",()=>{navigator.clipboard.writeText(e).then(()=>{$("#found-movie-link-copy-btn").hasClass("btn-info")&&($("#found-movie-link-copy-btn").removeClass("btn-info"),$("#found-movie-link-copy-btn").addClass("btn-success"),window.setTimeout(()=>{$("#found-movie-link-copy-btn").removeClass("btn-success"),$("#found-movie-link-copy-btn").addClass("btn-info")},1e3))},()=>{$("#found-movie-link-copy-btn").hasClass("btn-info")&&($("#found-movie-link-copy-btn").removeClass("btn-info"),$("#found-movie-link-copy-btn").addClass("btn-danger"),window.setTimeout(()=>{$("#found-movie-link-copy-btn").removeClass("btn-danger"),$("#found-movie-link-copy-btn").addClass("btn-info")},1e3))})}),a=$("<div class=\"c-wrap\">").html(`<span id="found-movie-link-watch-btn" class="btn btn-md btn-success" title="Добавить в плейлист"><span class="glyphicon glyphicon-send"></span></span>`).insertAfter(n).on("click",()=>{$("#mediaurl").val(e)}),o=$("<div class=\"c-wrap\">").html(`<span id="found-movie-remove-btn" class="btn btn-md btn-danger" title="Удалить ссылку"><span class="glyphicon glyphicon-remove"></span></span>`).insertAfter(a).on("click",()=>{$("#foundMovieInfo").empty(),$("#foundMovieLinkContent").empty()})},this.appendCSS=function(){$(`<style>`).appendTo("head").text(`
			
				#findMoviePanelToggle {
					background: url(https://i.imgur.com/zXIOGGM.png) no-repeat;
					height: 40px !important;
					width: 40px !important;
					text-indent: -9999px;
					outline: none;
					border: none;
					opacity: 0.8;
					background-size: contain !important;
				}

				.c-wrap{
					height: 0px
				}
				
				#findMovieKPInput {
					width: calc(100% - 36px);
				}
				
				#findMovieKPBtn {
					margin-left: calc(100% - 38px);
					z-index: 0;
					position: relative;
					top: -38px;
				}	
				


				
				#found-movie-link-input {
					width: calc(100% - 120px);
					margin-left: 40px;
				}

				#found-movie-link-copy-btn {
					margin-left: calc(100% - 120px);
					z-index: 0;
					position: relative;
					top: -38px;
				}

				#found-movie-link-watch-btn {
					margin-left: calc(100% - 42px);
					z-index: 0;
					position: relative;
					top: -38px;
				}

				#found-movie-remove-btn {
					margin-right: 100%;
					z-index: 0;
					position: relative;
					top: -38px;
				}
			`)},this.init()})},function(){window.cytubeEnhanced.addModule("newYear",function(){'use strict';const e=this;this.init=()=>{e.fixModHats()},this.fixModHats=()=>{2<CLIENT.rank&&$(`<style>`).appendTo("head").text(`
					div[class^="chat-msg-"] span:nth-child(3):nth-last-child(1) {
					  margin-left: 0px;
					}
					
					div[class^="chat-msg-"] span:nth-child(4):nth-last-child(1) {
					  margin-left: -20px;
					}
				`)},this.init()})},function(){window.cytubeEnhanced.addModule("previewImageEnchanced",function(){'use strict';const e=this;this.init=()=>{e.setupModalPreview(),e.setupPreviewImageButtonsCallbacks()},this.setupModalPreview=()=>{e.createClickPreview(),e.createModalPreview()},this.createClickPreview=()=>{$("body").on("click",".chat-picture",function(t){t.preventDefault();var n=$(this).attr("src");$("#js_image_container").find(".cmds-content").html("<img id=\"preview-image-content\" class=\"chat-picture-modal\" style=\"max-width: 100%;\" src=\""+n+"\">"),e.cbSetTitle(),$("#js_image_container").modal("show")})},this.cbSetTitle=()=>{const e=$("#preview-image-content").attr("src"),t=e.split("/"),n=t[t.length-1].split(".")[0];$("#preview-image-label").text(n)},this.createModalPreview=()=>{$("body").append(`
				<div class="modal fade" id="js_image_container" style="text-align: center;" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
					<div class="modal-dialog">
						<div class="modal-content">
							<div class="modal-header">
								<button id="image-preview-button-paste-to-chat" type="button" class="pull-left preview-image-button glyphicon glyphicon-comment" title="Вставить в сообщение" data-dismiss="modal">
								</button>
								<button id="image-preview-button-copy-link" type="button" class="pull-left preview-image-button glyphicon glyphicon-duplicate" title="Скопировать ссылку" data-dismiss="modal">
								</button>
								<button id="image-preview-button-find" type="button" class="pull-left preview-image-button glyphicon glyphicon-search" title="Поиск по картинке" data-dismiss="modal">
								</button>
								<button id="image-preview-button-close" type="button" class="pull-right preview-image-button glyphicon glyphicon-remove" title="Закрыть" data-dismiss="modal">
								</button>
								<h4 class="modal-title" id="preview-image-label">&nbsp;</h4>
							</div>
							<div class="modal-body" style="background-color: rgb(8 9 10);">
								<div class="cmds-content">
								</div>
							</div>
						</div>
					</div>
				</div>
			`)},this.setupPreviewImageButtonsCallbacks=()=>{e.cbPasteToChat(),e.cbCopyLink(),e.cbFind(),e.cbClose()},this.cbPasteToChat=()=>{$("#image-preview-button-paste-to-chat").on("click",()=>{const e=$("#preview-image-content").attr("src");$("#chatline").val($("#chatline").val()+" "+e+" ")})},this.cbCopyLink=()=>{$("#image-preview-button-copy-link").on("click",()=>{const e=$("#preview-image-content").attr("src");navigator.clipboard.writeText(e)})},this.cbFind=()=>{$("#image-preview-button-find").on("click",()=>{const e=$("#preview-image-content").attr("src");window.open(`https://www.google.com/searchbyimage?image_url=${e}`,"_blank").focus()})},this.cbClose=()=>{$("#image-preview-button-close").on("click",()=>{event.preventDefault(),$("#js_image_container").modal("hide")}),$("#preview-image-label").text("")},this.init()})}]);