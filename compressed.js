!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={exports:{},id:o,loaded:!1};return t[o].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=t,n.c=e,n.p="",n(0)}([function(t,e,n){n(1),n(2),n(3),n(4),n(5),n(6),n(7),n(10),n(11),n(16),n(17),n(18),n(19),n(22),n(27),n(28),n(32),n(35),n(43),n(44),n(46),n(47),n(48),n(49),n(50),n(51),n(52),n(53),n(54),n(55),n(56),n(58)},function(t,e){window.cytubeEnhancedDefaultTranslates=window.cytubeEnhancedDefaultTranslates||{},window.cytubeEnhancedDefaultTranslates.ru={qCommands:{"of course":"определенно да",yes:"да",maybe:"возможно",impossible:"ни шанса","no way":"определенно нет","don't think so":"вероятность мала",no:"нет","cirno is busy":"Смотрящий устал и отвечать не будет","I regret to inform you":"отказываюсь отвечать"},chatCommands:{"%username% action (e.g: <i>/me is dancing</i>)":"%username% что-то сделал. Например: <i>/me танцует</i>",spoiler:"спойлер",'sets the "AFK" status':'устанавливает статус "Отошёл"',"random option from the list of options (!pick option1, option2, option3)":"выбор случайной опции из указанного списка слов, разделенных запятыми (Например: <i>!pick слово1, слово2, слово3</i>)","asking a question with yes/no/... type answer (e.g. <i>!ask Will i be rich?</i>)":"задать вопрос с вариантами ответа да/нет/... (Например: <i>!ask Сегодня пойдет дождь?</i>)","show the current time":"показать текущее время","current time":"текущее время","throw a dice":"кинуть кость","random number between 0 and 999":"случайное число от 0 до 999","show the random quote":"показать случайную цитату","there aren't any quotes.":"цитаты отсутствуют.","vote for the video skip":"проголосовать за пропуск текущего видео","you have been voted for the video skip":"отдан голос за пропуск текущего видео","play the next video":"проиграть следующее видео","the next video is playing":"начато проигрывание следующего видео","bump the last video":"поднять последнее видео","the last video was bumped: ":"поднято последнее видео: ","adds the video to the end of the playlist (e.g. <i>!add https://www.youtube.com/watch?v=hh4gpgAZkc8</i>)":"добавляет видео в конец плейлиста (Например: <i>!add https://www.youtube.com/watch?v=hh4gpgAZkc8</i>)","error: the wrong link":"ошибка: неверная ссылка","the video was added":"видео было добавлено","show the current video's name":"показать название текущего видео","now: ":"сейчас играет: ","show the random emote":"показать случайный смайлик","the secret command":"секретная команда","Use !pick variant1, variant2":"Используй !pick вариант1, вариант2"},"The list of chat commands":"Список команд чата","Standard commands":"Стандартные команды","Extra commands":"Дополнительные команды","Commands list":"Список команд",AFK:"АФК",Clear:"Очист","Are you sure, that you want to clear the chat?":"Вы уверены, что хотите очистить чат?",favPics:{"Show your favorite images":"Показать избранные картинки","Export pictures":"Экспорт","Import pictures":"Импорт","Picture url":"Адрес",Add:"Добавить",Remove:"Удалить","The image already exists":"Такая картинка уже была добавлена","Drop the picture here to remove it":"Перетащите сюда картинку, чтобы её удалить",Exit:"Выход","<p>Favourite pictures feature if for saving favourite pictures like browser bookmarks.</p><p>Features:<ul><li><strong>Only links to images can be saved</strong>, so if image from link was removed, it also removes from your panel.</li><li>Images links are storing in browser. There are export and import buttons to share them between browsers.</li><li>Images are the same for site channels, but <strong>they are different for http:// and https://</strong></li></ul></p>":"<p>Избранные картинки нужны для сохранения понравившихся картинок, как закладки браузера.</p><p>Особенности:<ul><li><strong>Хранятся не картинки, а ссылки на них</strong>, другими словами если картинка по ссылке удалится, то она удалится и у вас.</li><li>Ссылки на картинки хранятся в браузере. Для того, чтобы их перемещать между браузерами имеется кнопка экспорта (вытащить) и импорт (вставка экспортированного файла).</li><li>Картинки общие для каналов сайта, но <strong>разные для http:// и https://</strong></li></ul></p>","Your old pictures will be removed and replaced with the images from uploaded file (file must correspond to format of the file from export button of this panel).<br>Are you sure you want to continue?":"Ваши старые картинки будут удалены, и заменены картинками из загруженного файла (поддерживаются только файлы, полученные экспортом через эту же панель).<br>Вы уверены, что хотите продолжить?","Can't detect any pictures in this file.":"Невозможно распознать картинки из файла."},videoInfo:{"Now:":"Сейчас:","Added by":"Добавлено","Nothing is playing now":"Сейчас ничего не воспроизводится"},tabs:{Title:"Заголовок",Content:"Содержимое","Show tabs settings (cytube enhanced)":"Показать настройки вкладок (cytube enhanced)","Tabs settings":"Настройка вкладок","Channel description":"Описание канала","Add tab":"Добавить вкладку","Remove the last tab":"Удалить последнюю вкладку","Convert to the editor's code":"Преобразовать в код редактора","The code in the editor will be replaced with the new code, continue?":"Код в редакторе будет удалён и заменен новым, продолжить?","Tabs settings will be replaced with the code from the editor, continue?":"Настройки вкладок будут заменены кодом из редактора, продолжить?","Wrong content for the dropdown":"Неправильное содержимое для выпадающего списка: ","Convert from the editor's code":"Преобразовать из кода редактора","By default tab behaves like simple tab.":"По умолчанию вкладка ведёт себя как обычная вкладка.",'Use !dropdown! prefix to create dropdown list. Example: !dropdown!My dropdown. Value must look like "[n]Link title 1[/n][a]URL 1[/a], [n]Link title 2[/n][a]URL 2[/a], [n]Link title 3[/n][a]URL 3[/a]"':'Чтобы создать выпадающий список, используйте префикс !dropdown! перед названием, например "!dropdown!Мой выпадающий список". Значение должно выглядеть так "[n]Заголовок 1[/n][a]Адрес ссылки 1[/a], [n]Заголовок 2[/n][a]Адрес ссылки 2[/a], [n]Заголовок 3[/n][a]Адрес ссылки 3[/a]"',"Use !link! prefix to create link. Example: !link!My link. Value must contain URL.":'Чтобы создать ссылку, используйте префикс !link! перед названием, например "!link!Моя ссылка". Значение должно содержать адрес ссылки.'},emotes:{"Show emotes":"Показать смайлики"},settings:{"Extended settings":"+",Save:"Сохранить",Cancel:"Отмена","Some settings need to refresh the page to get to work. Do it now?":"Для нормальной работы некоторых настроек требуется перезагрузить страницу. Сделать это сейчас?",Yes:"Да",No:"Нет"},general:{General:"Общее","Smiles and pictures together":"Смайлики и картинки вместе","Show emotes and favorite images":"Показать смайлики и избранные изображения","Interface language":"Язык интерфейса"},chatAvatars:{"Chat avatars":"Аватарки в чате",Disabled:"Выключены",Small:"Маленькие",Big:"Большие"},standardUI:{"Create a poll":"Создать опрос","Add video":"Добавить видео","Add video from url":"Добавить видео по ссылке","connected users":"пользователей","connected user":"пользователь",AFK:"АФК",Anonymous:"Анонимных","Channel Admins":"Администраторов канала",Guests:"Гостей",Moderators:"Модераторов","Regular Users":"Обычных пользователей","Site Admins":"Администраторов сайта","Welcome, ":"Добро пожаловать, ","Log out":"Выйти",Login:"Логин",Password:"Пароль","Remember me":"Запомнить","Log in":"Вход",Home:"На главную",Account:"Аккаунт",Logout:"Выход",Channels:"Каналы",Profile:"Профиль","Change Password/Email":"Изменить пароль/почту",Register:"Регистрация",Options:"Настройки","Channel Settings":"Настройки канала",Layout:"Оформление","Chat Only":"Только чат","Remove Video":"Удалить видео","Video url":"Адрес видео",Next:"Следующим","At end":"В конец",Play:"Проиграть","Queue Next":"Поставить следующим","Make Temporary":"Сделать временным","Make Permanent":"Сделать постоянным",Delete:"Удалить",Name:"Имя","Guest login":"Гостевой вход"},video:{"Refresh video":"Обновить видео","Hide video":"Скрыть видео",best:"наивысшее",Quality:"Качество","Use Youtube JS Player":"Использовать Youtube JS Player","Expand playlist":"Развернуть плейлист","Unexpand playlist":"Свернуть плейлист","Scroll the playlist to the current video":"Прокрутить плейлист к текущему видео","Contributors' list":"Список пользователей, добавивших видео","Video's count":"Всего видео"},markdown:{"Markdown helper":"Помощник разметки","Bold text":"Жирный текст","Cursive text":"Наклонный текст",Spoiler:"Спойлер",Monospace:"Моноширинный текст",Strike:"Перечёркнутый текст"},pmHistory:{History:"Ист","Chat history":"История чата","Your chat messages history.":"История сообщений, адресованных вам в чате.","Reset history":"Сбросить историю","Are you sure, that you want to clear messages history?":"Вы уверены, что хотите сбросить историю сообщений?",Exit:"Выход"},extras:{Extras:"Сторонние модули","Extras for additional functionality":"Сторонние модули для дополнительного функционала.",Source:"Источник"},themes:{Themes:"Темы","Theme settings":"Настройка темы","Apply this theme?":"Изменить тему на выбранную?",'Default theme was changed to "%themeTitle%" by administrator. Do you want to try it? (Don\'t forget, that you can switch your theme in extended settings anytime.)':'Тема по умолчанию была измена администратором на "%themeTitle%". Вы хотите попробовать её? (Не забывайте, что вы можете поменять свою тему в расширенных настройках в любое время.)'},Help:"Помощь",Close:"Закрыть",ru:"Русский",en:"Английский",Confirm:"Подтвердить",Cancel:"Отмена",OK:"OK"}},function(t,e){window.CytubeEnhancedHelpers=function(t){this.getViewportSize=function(){return{width:Math.max(document.documentElement.clientWidth,window.innerWidth||0),height:Math.max(document.documentElement.clientHeight,window.innerHeight||0)}},this.addMessageToChatInput=function(t,e){var n=$(chatline);"begin"===(e=e||"end")?t+=n.val():t=n.val()+t,n.val(t).focus()}}},function(t,e){window.CytubeEnhancedStorage=function(t,e,n){var o=this;e=void 0===e||e,n=void 0!==n&&n;var i={},r={},a={};try{a=JSON.parse(window.localStorage.getItem(t+"-"+(e?"":CHANNEL.name)+t)),a=_.isPlainObject(a)?a:{}}catch(t){a={}}r=_.cloneDeep(a),this.getDefault=function(t){return i[t]},this.setDefault=function(t,e){e=_.cloneDeep(e),i[t]=e,a[t]=void 0!==a[t]?a[t]:e,r[t]=void 0!==r[t]?r[t]:e},this.get=function(t){return a[t]},this.set=function(t,e){var i=a[t]=_.cloneDeep(e);return n&&o.save(),i},this.toggle=function(t){var e=a[t]=!a[t];return n&&o.save(),e},this.isDirty=function(t){var e=!1;if(_.isArray(t)){for(var n in t)if(!s(a[n],r[n])){e=!0;break}}else e=!s(a[t],r[t]);return e},this.save=function(){try{return window.localStorage.setItem(t+"-"+(e?"":CHANNEL.name)+t,JSON.stringify(a))}catch(t){return!1}},this.reset=function(){a=_.cloneDeep(i)};var s=function(t,e){return _.isArray(t)&&_.isArray(e)?0===_.difference(t,e).length&&0===_.difference(e,t).length:_.isEqual(t,e)}}},function(t,e){window.CytubeEnhancedUISettings=function(t){"use strict";var e=this;this.$navbar=$("#nav-collapsible").find(".navbar-nav"),this.tabs={},this.$tabsContainerHeader=$('<div class="'+t.prefix+'ui__header"></div>'),this.$tabsContainerBody=$('<div class="'+t.prefix+'ui__body tab-content"></div>'),this.$tabsContainerTabs=$('<ul class="nav nav-tabs">'),this.$tabsContainerFooter=$('<div class="'+t.prefix+'ui__footer"></div>'),this.$tabsContainerOpenButton=$('<a href="#" id="'+t.prefix+'ui"></a>').text(t.t("settings[.]Extended settings")).on("click",function(t){t.preventDefault(),t.stopPropagation(),e.openSettings()});var n=$("#useroptions .modal-header .nav-tabs");n.length,this.$tabsContainerOpenButton.appendTo(e.$navbar).wrap("<li>"),this.themeTabName="theme-settings",this.themeTabTitle=t.t("themes[.]Theme settings"),this.storage=new CytubeEnhancedStorage("settings",!1);var o=!1;$("<h4>"+t.t("settings[.]Extended settings")+"</h4>").appendTo(e.$tabsContainerHeader),e.$tabsContainerTabs.appendTo(e.$tabsContainerHeader),$('<button type="button" data-dismiss="modal" class="btn btn-success">'+t.t("settings[.]Save")+"</button>").appendTo(e.$tabsContainerFooter).on("click",function(){e.save()}),$('<button type="button" data-dismiss="modal" class="'+t.prefix+'user-settings btn btn-default">'+t.t("settings[.]Cancel")+"</button>").appendTo(e.$tabsContainerFooter),this.onSave=function(n){$(document).on(t.prefix+"settings.save",function(){n(e.storage)})},this.save=function(){$(document).trigger(t.prefix+"settings.save"),e.storage.save(),o&&t.UI.createConfirmWindow(t.t("settings[.]Some settings need to refresh the page to get to work. Do it now?"),function(t){t&&window.location.reload()})},this.reset=function(){e.storage.reset(),t.UI.createConfirmWindow(t.t("settings[.]Some settings need to refresh the page to get to work. Do it now?"),function(t){t&&window.location.reload()})};this.getTab=function(n,o,i){return void 0!==e.tabs[n]?e.tabs[n]:o?function(n,o,i){var r=new window.CytubeEnhancedUITab(t,n,o,i);return r.$button.appendTo(e.$tabsContainerTabs),r.$content.appendTo(e.$tabsContainerBody),e.tabs[n]=r,e.sortTabs(),r}(n,o,i):null},this.configureTheme=function(n){var o=e.getTab(e.themeTabName,e.themeTabTitle,99999),i=new CytubeEnhancedStorage("themes."+t.Settings.storage.get("themes.selected"),!0,!0);n(t,o,i)},this.openTab=function(t){return!!e.tabs[t]&&(e.tabs[t].show(),!0)},e.removeTab=function(t){return!!e.tabs[t]&&(e.tabs[t].remove(),delete e.tabs[t],!0)},this.sortTabs=function(){var t=[];for(var n in e.tabs)t.push(e.tabs[n]);for(var o=0,i=(t=t.sort(function(t,e){return t.sort>e.sort?1:t.sort<e.sort?-1:0})).length;o<i;o++)t[o].$button.detach().appendTo(e.$tabsContainerTabs)},this.openSettings=function(){var n;for(var o in t.UI.createModalWindow("settings",e.$tabsContainerHeader,e.$tabsContainerBody,e.$tabsContainerFooter,!0),e.tabs)(void 0===n||void 0===n.sort||n.sort>e.tabs[o].sort)&&(n=e.tabs[o]);n.show()},this.requestPageReload=function(){o=!0}}},function(t,e){window.CytubeEnhancedUITab=function(t,e,n,o){"use strict";var i=this;this.$button=$('<li><a href="#'+t.prefix+e+'__content" class="'+e+'__button" data-toggle="tab">'+n+"</a></li>"),this.$content=$('<div id="'+t.prefix+e+'__content" class="tab-pane">'),this.$form=t.UI.createControlsWrapper("horizontal").appendTo(this.$content),this.sort=Math.abs(parseInt(o,10))||0,this.controls={},this.show=function(){i.$button.find("a").tab("show"),$(document).trigger(t.prefix+"tab-"+e+".show")},this.$button.on("show.bs.tab",function(){$(document).trigger(t.prefix+"tab-"+e+".show")}),this.onShow=function(n){$(document).on(t.prefix+"tab-"+e+".show",function(){n(i)})},this.addControl=function(e,n,o,r,a,s,l,c){e=-1!=["select","checkbox"].indexOf(e)?e:"select",l=Math.abs(parseInt(l,10))||0;var u="create"+e.slice(0,1).toUpperCase()+e.slice(1)+"Control",d=t.UI[u](n,o,r,a,s);return d.data("sort",l),i.controls[r]={$el:d,sort:l},c?d.appendTo(c):d.appendTo(i.$form),i.sortControls(),d},this.sortControls=function(){var t=[];for(var e in i.controls)t.push(i.controls[e]);for(var n=0,o=(t=t.sort(function(t,e){return t.sort>e.sort?1:t.sort<e.sort?-1:0})).length;n<o;n++)t[n].$el.detach().appendTo(i.$form)},this.getName=function(){return e},this.remove=function(){i.$button.empty(),i.$content.empty()}}},function(t,e){window.CytubeEnhancedUI=function(t){var e=this;this.createModalWindow=function(e,n,o,i,r){$(".modal").modal("hide"),e=t.prefix+"modal-"+e;var a=$("#"+e);if(r){if(a.length)return a.modal("show"),a}else a.remove();var s=$('<div class="modal fade" id="'+e+'" role="dialog" tabindex="-1">').appendTo($("body")),l=$('<div class="modal-dialog modal-lg">').appendTo(s),c=$('<div class="modal-content">').appendTo(l);if(n){var u=$('<div class="modal-header">').append(n).appendTo(c);$('<button type="button" class="close" data-dismiss="modal" aria-label="'+t.t("Close")+'">').html('<span aria-hidden="true">&times;</span>').prependTo(u)}return o&&$('<div class="modal-body">').append(o).appendTo(c),i&&$('<div class="modal-footer">').append(i).appendTo(c),s.on("hidden.bs.modal",function(){r||$(this).remove()}),s.modal({keyboard:!0}),s},this.createConfirmWindow=function(n,o){var i=!1,r=$('<div class="modal fade '+t.prefix+'modal-confirm modal-centered" role="dialog" tabindex="-1">').appendTo($("body")),a=$('<div class="modal-dialog modal-sm">').appendTo(r),s=$('<div class="modal-content">').appendTo(a);$('<div class="modal-header">').html($('<h3 class="modal-title">').html(n)).appendTo(s);var l=$('<div class="modal-footer">').appendTo(s);$('<button type="button" class="btn btn-default">'+t.t("Confirm")+"</button>").appendTo(l).on("click",function(){i=!0,r.modal("hide")}),$('<button type="button" data-dismiss="modal" class="'+t.prefix+'user-settings btn btn-default">'+t.t("Cancel")+"</button>").appendTo(l),r.on("shown.bs.modal",function(){e.centerModals($(this))}),r.on("hidden.bs.modal",function(){_.isFunction(o)&&o(i),$(this).remove()}),r.modal({keyboard:!0})},this.createAlertWindow=function(n,o){var i=$('<div class="modal fade '+t.prefix+'modal-confirm modal-centered" role="dialog" tabindex="-1">').appendTo($("body")),r=$('<div class="modal-dialog modal-sm">').appendTo(i),a=$('<div class="modal-content">').appendTo(r);$('<div class="modal-header">').html($('<h3 class="modal-title">').html(n)).appendTo(a);var s=$('<div class="modal-footer">').appendTo(a);$('<button type="button" data-dismiss="modal" class="btn btn-default">'+t.t("OK")+"</button>").appendTo(s),i.on("shown.bs.modal",function(){e.centerModals($(this))}),i.on("hidden.bs.modal",function(){_.isFunction(o)&&o(),$(this).remove()}),i.modal({keyboard:!0})},this.createControlsWrapper=function(t){return t=-1!=["default","horizontal","inline"].indexOf(t)?t:"default",$('<div class="form-'+t+'">')},this.createSelectControl=function(e,n,o,i,r){i=i||[];var a,s,l=$('<div class="form-group">');if("horizontal"==e){$('<label for="'+t.prefix+o+'" class="control-label col-sm-4">'+n+"</label>").appendTo(l);var c=$('<div class="col-sm-8">').appendTo(l);a=$('<select id="'+t.prefix+o+'" class="form-control">').appendTo(c)}else $('<label for="'+t.prefix+o+'">'+n+"</label>").appendTo(l),a=$('<select id="'+t.prefix+o+'" class="form-control">').appendTo(l);r&&a.on("change",r);for(var u=0,d=i.length;u<d;u++)s=i[u].selected?"selected":"",a.append('<option value="'+i[u].value+'" '+s+">"+i[u].title+"</option>");return l},this.createButton=function(t,e,n){var o=$('<button type="button" class="btn btn-'+t+'">'+e+"</button>");return n&&o.on("click",n),o},this.toggleLoader=function(t,e){t.each(function(){void 0===e&&(e=t.hasClass("loading-spinner__loading")?"off":"on"),$(this).removeClass("loading-spinner__loading"),$(".loading-spinner__overlay").remove(),$(this).css("height","auto"),$(this).css("width","auto"),"on"===e&&($(this).addClass("loading-spinner__loading"),$(this).css("height",$(this).outerHeight()),$(this).css("width",$(this).outerWidth()),$('<div class="loading-spinner__overlay">').append($('<div class="loading-spinner__wrapper">').append('<div class="loading-spinner">')).appendTo($(this)))})},$.fn.toggleLoader=function(t){e.toggleLoader($(this),t)},this.centerModals=function(t){void 0===t&&(t=$(".modal-centered")),t.each(function(){var e=t.find(".modal-dialog");e.css({display:"block",marginTop:Math.max(0,($(window).height()-e.outerHeight())/2)})})},$(window).resize(function(){e.centerModals()})}},function(t,e,n){n(8),window.CytubeEnhanced=function(t,e,n){"use strict";var o=this;this.translations={},this.prefix="ce-",this.version="2.8.0";var i={};if(this.getModule=function(t){var e=$.Deferred(),n=6e4;return function o(){if(void 0!==i[t])e.resolve(i[t]);else{if(n<=0)throw new Error("Load timeout for module "+t+".");n-=100,setTimeout(o,100)}}(),e},this.addModule=function(t,o){if(this.isModulePermitted(t)){var r=new o(this,e[t]||{});n[t]&&n[t](r),i[t]=r}},this.isModulePermitted=function(t){return!e.hasOwnProperty(t)||(!e[t].hasOwnProperty("enabled")||e[t].enabled)},this.addTranslation=function(t,e){void 0===o.translations[t]?o.translations[t]=e:$.extend(!0,o.translations[t],e)},this.t=function(t){var e=t;if("en"!==o.storage.get("language")&&o.translations[o.storage.get("language")])if(-1!==t.indexOf("[.]")){var n=t.split("[.]");if(void 0===(e=o.translations[o.storage.get("language")][n[0]]))return(e=t.split("[.]").pop())||t;for(var i=1,r=n.length;i<r;i++)if(void 0===(e=e[n[i]]))return(e=t.split("[.]").pop())||t;e=e||n[n.length-1]}else e=o.translations[o.storage.get("language")][t];else-1!==t.indexOf("[.]")&&(e=(e=t.split("[.]").pop())||t);return e},this.parseJSON=function(t,e){var n;e=void 0!==e?e:null;try{n=window.JSON.parse(t)}catch(t){n=e}return n},this.toJSON=function(t,e){var n;e=void 0!==e?e:null;try{n=window.JSON.stringify(t)}catch(t){n=e}return n},$.ajaxSetup({cache:!0}),window.cytubeEnhancedDefaultTranslates)for(var r in window.cytubeEnhancedDefaultTranslates)this.addTranslation(r,window.cytubeEnhancedDefaultTranslates[r]);this.storage=new window.CytubeEnhancedStorage("default",!0,!0),this.storage.setDefault("language",t),this.UI=new window.CytubeEnhancedUI(this),this.Helpers=new window.CytubeEnhancedHelpers(this),this.Settings=new window.CytubeEnhancedUISettings(this)}},function(t,e,n){var o;(function(t,i){(function(){var r,a="4.11.2",s=200,l="Expected a function",c="__lodash_hash_undefined__",u="__lodash_placeholder__",d=1,h=2,p=4,f=8,m=16,v=32,g=64,b=128,w=256,y=512,$=1,x=2,_=30,k="...",C=150,T=16,E=1,P=2,S=3,M=1/0,I=9007199254740991,A=1.7976931348623157e308,O=NaN,R=4294967295,B=R-1,j=R>>>1,L="[object Arguments]",U="[object Array]",D="[object Boolean]",N="[object Date]",H="[object Error]",W="[object Function]",q="[object GeneratorFunction]",z="[object Map]",F="[object Number]",G="[object Object]",V="[object Promise]",Y="[object RegExp]",Q="[object Set]",Z="[object String]",J="[object Symbol]",X="[object WeakMap]",K="[object WeakSet]",tt="[object ArrayBuffer]",et="[object DataView]",nt="[object Float32Array]",ot="[object Float64Array]",it="[object Int8Array]",rt="[object Int16Array]",at="[object Int32Array]",st="[object Uint8Array]",lt="[object Uint8ClampedArray]",ct="[object Uint16Array]",ut="[object Uint32Array]",dt=/\b__p \+= '';/g,ht=/\b(__p \+=) '' \+/g,pt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ft=/&(?:amp|lt|gt|quot|#39|#96);/g,mt=/[&<>"'`]/g,vt=RegExp(ft.source),gt=RegExp(mt.source),bt=/<%-([\s\S]+?)%>/g,wt=/<%([\s\S]+?)%>/g,yt=/<%=([\s\S]+?)%>/g,$t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,xt=/^\w*$/,_t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,kt=/[\\^$.*+?()[\]{}|]/g,Ct=RegExp(kt.source),Tt=/^\s+|\s+$/g,Et=/^\s+/,Pt=/\s+$/,St=/[a-zA-Z0-9]+/g,Mt=/\\(\\)?/g,It=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,At=/\w*$/,Ot=/^0x/i,Rt=/^[-+]0x[0-9a-f]+$/i,Bt=/^0b[01]+$/i,jt=/^\[object .+?Constructor\]$/,Lt=/^0o[0-7]+$/i,Ut=/^(?:0|[1-9]\d*)$/,Dt=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Nt=/($^)/,Ht=/['\n\r\u2028\u2029\\]/g,Wt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",qt="[\\ud800-\\udfff]",zt="["+Wt+"]",Ft="[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]",Gt="\\d+",Vt="[\\u2700-\\u27bf]",Yt="[a-z\\xdf-\\xf6\\xf8-\\xff]",Qt="[^\\ud800-\\udfff"+Wt+Gt+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",Zt="\\ud83c[\\udffb-\\udfff]",Jt="[^\\ud800-\\udfff]",Xt="(?:\\ud83c[\\udde6-\\uddff]){2}",Kt="[\\ud800-\\udbff][\\udc00-\\udfff]",te="[A-Z\\xc0-\\xd6\\xd8-\\xde]",ee="(?:"+Yt+"|"+Qt+")",ne="(?:"+te+"|"+Qt+")",oe="(?:"+Ft+"|"+Zt+")"+"?",ie="[\\ufe0e\\ufe0f]?"+oe+("(?:\\u200d(?:"+[Jt,Xt,Kt].join("|")+")[\\ufe0e\\ufe0f]?"+oe+")*"),re="(?:"+[Vt,Xt,Kt].join("|")+")"+ie,ae="(?:"+[Jt+Ft+"?",Ft,Xt,Kt,qt].join("|")+")",se=RegExp("['’]","g"),le=RegExp(Ft,"g"),ce=RegExp(Zt+"(?="+Zt+")|"+ae+ie,"g"),ue=RegExp([te+"?"+Yt+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[zt,te,"$"].join("|")+")",ne+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[zt,te+ee,"$"].join("|")+")",te+"?"+ee+"+(?:['’](?:d|ll|m|re|s|t|ve))?",te+"+(?:['’](?:D|LL|M|RE|S|T|VE))?",Gt,re].join("|"),"g"),de=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0\\ufe0e\\ufe0f]"),he=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,pe=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","Reflect","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],fe=-1,me={};me[nt]=me[ot]=me[it]=me[rt]=me[at]=me[st]=me[lt]=me[ct]=me[ut]=!0,me[L]=me[U]=me[tt]=me[D]=me[et]=me[N]=me[H]=me[W]=me[z]=me[F]=me[G]=me[Y]=me[Q]=me[Z]=me[X]=!1;var ve={};ve[L]=ve[U]=ve[tt]=ve[et]=ve[D]=ve[N]=ve[nt]=ve[ot]=ve[it]=ve[rt]=ve[at]=ve[z]=ve[F]=ve[G]=ve[Y]=ve[Q]=ve[Z]=ve[J]=ve[st]=ve[lt]=ve[ct]=ve[ut]=!0,ve[H]=ve[W]=ve[X]=!1;var ge={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},be={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},we={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},ye={function:!0,object:!0},$e={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},xe=parseFloat,_e=parseInt,ke=ye[typeof e]&&e&&!e.nodeType?e:r,Ce=ye[typeof t]&&t&&!t.nodeType?t:r,Te=Ce&&Ce.exports===ke?ke:r,Ee=an(ke&&Ce&&"object"==typeof i&&i),Pe=an(ye[typeof self]&&self),Se=an(ye[typeof window]&&window),Me=an(ye[typeof this]&&this),Ie=Ee||Se!==(Me&&Me.window)&&Se||Pe||Me||Function("return this")();function Ae(t,e){return t.set(e[0],e[1]),t}function Oe(t,e){return t.add(e),t}function Re(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Be(t,e,n,o){for(var i=-1,r=t.length;++i<r;){var a=t[i];e(o,a,n(a),t)}return o}function je(t,e){for(var n=-1,o=t.length;++n<o&&!1!==e(t[n],n,t););return t}function Le(t,e){for(var n=-1,o=t.length;++n<o;)if(!e(t[n],n,t))return!1;return!0}function Ue(t,e){for(var n=-1,o=t.length,i=0,r=[];++n<o;){var a=t[n];e(a,n,t)&&(r[i++]=a)}return r}function De(t,e){return!!t.length&&Ye(t,e,0)>-1}function Ne(t,e,n){for(var o=-1,i=t.length;++o<i;)if(n(e,t[o]))return!0;return!1}function He(t,e){for(var n=-1,o=t.length,i=Array(o);++n<o;)i[n]=e(t[n],n,t);return i}function We(t,e){for(var n=-1,o=e.length,i=t.length;++n<o;)t[i+n]=e[n];return t}function qe(t,e,n,o){var i=-1,r=t.length;for(o&&r&&(n=t[++i]);++i<r;)n=e(n,t[i],i,t);return n}function ze(t,e,n,o){var i=t.length;for(o&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function Fe(t,e){for(var n=-1,o=t.length;++n<o;)if(e(t[n],n,t))return!0;return!1}function Ge(t,e,n,o){var i;return n(t,function(t,n,r){if(e(t,n,r))return i=o?n:t,!1}),i}function Ve(t,e,n){for(var o=t.length,i=n?o:-1;n?i--:++i<o;)if(e(t[i],i,t))return i;return-1}function Ye(t,e,n){if(e!=e)return un(t,n);for(var o=n-1,i=t.length;++o<i;)if(t[o]===e)return o;return-1}function Qe(t,e,n,o){for(var i=n-1,r=t.length;++i<r;)if(o(t[i],e))return i;return-1}function Ze(t,e){var n=t?t.length:0;return n?Xe(t,e)/n:O}function Je(t,e,n,o,i){return i(t,function(t,i,r){n=o?(o=!1,t):e(n,t,i,r)}),n}function Xe(t,e){for(var n,o=-1,i=t.length;++o<i;){var a=e(t[o]);a!==r&&(n=n===r?a:n+a)}return n}function Ke(t,e){for(var n=-1,o=Array(t);++n<t;)o[n]=e(n);return o}function tn(t,e){return He(e,function(e){return[e,t[e]]})}function en(t){return function(e){return t(e)}}function nn(t,e){return He(e,function(e){return t[e]})}function on(t,e){for(var n=-1,o=t.length;++n<o&&Ye(e,t[n],0)>-1;);return n}function rn(t,e){for(var n=t.length;n--&&Ye(e,t[n],0)>-1;);return n}function an(t){return t&&t.Object===Object?t:null}function sn(t){return ge[t]}function ln(t){return be[t]}function cn(t){return"\\"+$e[t]}function un(t,e,n){for(var o=t.length,i=e+(n?0:-1);n?i--:++i<o;){var r=t[i];if(r!=r)return i}return-1}function dn(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function hn(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function pn(t){var e=-1,n=Array(t.size);return t.forEach(function(t,o){n[++e]=[o,t]}),n}function fn(t,e){for(var n=-1,o=t.length,i=0,r=[];++n<o;){var a=t[n];a!==e&&a!==u||(t[n]=u,r[i++]=n)}return r}function mn(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function vn(t){if(!t||!de.test(t))return t.length;for(var e=ce.lastIndex=0;ce.test(t);)e++;return e}function gn(t){return t.match(ce)}function bn(t){return we[t]}var wn=function t(e){var n=(e=e?wn.defaults({},e,wn.pick(Ie,pe)):Ie).Date,o=e.Error,i=e.Math,Wt=e.RegExp,qt=e.TypeError,zt=e.Array.prototype,Ft=e.Object.prototype,Gt=e.String.prototype,Vt=e.Function.prototype.toString,Yt=Ft.hasOwnProperty,Qt=0,Zt=Vt.call(Object),Jt=Ft.toString,Xt=Ie._,Kt=Wt("^"+Vt.call(Yt).replace(kt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),te=Te?e.Buffer:r,ee=e.Reflect,ne=e.Symbol,oe=e.Uint8Array,ie=e.clearTimeout,re=ee?ee.enumerate:r,ae=Object.getOwnPropertySymbols,ce="symbol"==typeof(ce=ne&&ne.iterator)?ce:r,ge=Object.create,be=Ft.propertyIsEnumerable,we=e.setTimeout,ye=zt.splice,$e=i.ceil,ke=i.floor,Ce=Object.getPrototypeOf,Ee=e.isFinite,Pe=zt.join,Se=Object.keys,Me=i.max,an=i.min,yn=e.parseInt,$n=i.random,xn=Gt.replace,_n=zt.reverse,kn=Gt.split,Cn=Yi(e,"DataView"),Tn=Yi(e,"Map"),En=Yi(e,"Promise"),Pn=Yi(e,"Set"),Sn=Yi(e,"WeakMap"),Mn=Yi(Object,"create"),In=Sn&&new Sn,An=!be.call({valueOf:1},"valueOf"),On={},Rn=wr(Cn),Bn=wr(Tn),jn=wr(En),Ln=wr(Pn),Un=wr(Sn),Dn=ne?ne.prototype:r,Nn=Dn?Dn.valueOf:r,Hn=Dn?Dn.toString:r;function Wn(t){if(Oa(t)&&!ka(t)&&!(t instanceof Fn)){if(t instanceof zn)return t;if(Yt.call(t,"__wrapped__"))return yr(t)}return new zn(t)}function qn(){}function zn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=r}function Fn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=R,this.__views__=[]}function Gn(){}function Vn(t,e){return Mn?t[e]!==r:Yt.call(t,e)}function Yn(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}function Qn(t){var e=-1,n=t?t.length:0;for(this.__data__=new Yn;++e<n;)this.push(t[e])}function Zn(t,e){var n=t.__data__;if(sr(e)){var o=n.__data__;return("string"==typeof e?o.string:o.hash)[e]===c}return n.has(e)}function Jn(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}function Xn(t,e){var n=eo(t,e);return!(n<0||(n==t.length-1?t.pop():ye.call(t,n,1),0))}function Kn(t,e){var n=eo(t,e);return n<0?r:t[n][1]}function to(t,e){return eo(t,e)>-1}function eo(t,e){for(var n=t.length;n--;)if(ya(t[n][0],e))return n;return-1}function no(t,e,n){var o=eo(t,e);o<0?t.push([e,n]):t[o][1]=n}function oo(t,e,n,o){return t===r||ya(t,Ft[n])&&!Yt.call(o,n)?e:t}function io(t,e,n){(n===r||ya(t[e],n))&&("number"!=typeof e||n!==r||e in t)||(t[e]=n)}function ro(t,e,n){var o=t[e];Yt.call(t,e)&&ya(o,n)&&(n!==r||e in t)||(t[e]=n)}function ao(t,e,n,o){return mo(t,function(t,i,r){e(o,t,n(t),r)}),o}function so(t,e){return t&&$i(e,ss(e),t)}function lo(t,e){for(var n=-1,o=null==t,i=e.length,a=Array(i);++n<i;)a[n]=o?r:ns(t,e[n]);return a}function co(t,e,n){return t==t&&(n!==r&&(t=t<=n?t:n),e!==r&&(t=t>=e?t:e)),t}function uo(t,e,n,o,i,a,s){var l;if(o&&(l=a?o(t,i,a,s):o(t)),l!==r)return l;if(!Aa(t))return t;var c=ka(t);if(c){if(l=function(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&Yt.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!e)return yi(t,l)}else{var u=Ki(t),d=u==W||u==q;if(Ea(t))return function(t,e){if(e)return t.slice();var n=new t.constructor(t.length);return t.copy(n),n}(t,e);if(u==G||u==L||d&&!a){if(dn(t))return a?t:{};if(l=function(t){return"function"!=typeof t.constructor||cr(t)?{}:ho(Zi(t))}(d?{}:t),!e)return function(t,e){return $i(t,Ji(t),e)}(t,so(l,t))}else{if(!ve[u])return a?t:{};l=function(t,e,n,o){var i,r,a,s=t.constructor;switch(e){case tt:return vi(t);case D:case N:return new s(+t);case et:return function(t,e){var n=e?vi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,o);case nt:case ot:case it:case rt:case at:case st:case lt:case ct:case ut:return function(t,e){var n=e?vi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}(t,o);case z:return function(t,e,n){return qe(e?n(pn(t),!0):pn(t),Ae,new t.constructor)}(t,o,n);case F:case Z:return new s(t);case Y:return(a=new(r=t).constructor(r.source,At.exec(r))).lastIndex=r.lastIndex,a;case Q:return function(t,e,n){return qe(e?n(mn(t),!0):mn(t),Oe,new t.constructor)}(t,o,n);case J:return i=t,Nn?Object(Nn.call(i)):{}}}(t,u,uo,e)}}s||(s=new Jn);var h=s.get(t);if(h)return h;if(s.set(t,l),!c)var p=n?function(t){return Eo(t,ss,Ji)}(t):ss(t);return je(p||t,function(i,r){p&&(i=t[r=i]),ro(l,r,uo(i,e,n,o,r,t,s))}),l}function ho(t){return Aa(t)?ge(t):{}}function po(t,e,n){if("function"!=typeof t)throw new qt(l);return we(function(){t.apply(r,n)},e)}function fo(t,e,n,o){var i=-1,r=De,a=!0,l=t.length,c=[],u=e.length;if(!l)return c;n&&(e=He(e,en(n))),o?(r=Ne,a=!1):e.length>=s&&(r=Zn,a=!1,e=new Qn(e));t:for(;++i<l;){var d=t[i],h=n?n(d):d;if(d=o||0!==d?d:0,a&&h==h){for(var p=u;p--;)if(e[p]===h)continue t;c.push(d)}else r(e,h,o)||c.push(d)}return c}Wn.templateSettings={escape:bt,evaluate:wt,interpolate:yt,variable:"",imports:{_:Wn}},Wn.prototype=qn.prototype,Wn.prototype.constructor=Wn,zn.prototype=ho(qn.prototype),zn.prototype.constructor=zn,Fn.prototype=ho(qn.prototype),Fn.prototype.constructor=Fn,Gn.prototype=Mn?Mn(null):Ft,Yn.prototype.clear=function(){this.__data__={hash:new Gn,map:Tn?new Tn:[],string:new Gn}},Yn.prototype.delete=function(t){var e=this.__data__;return sr(t)?function(t,e){return Vn(t,e)&&delete t[e]}("string"==typeof t?e.string:e.hash,t):Tn?e.map.delete(t):Xn(e.map,t)},Yn.prototype.get=function(t){var e=this.__data__;return sr(t)?function(t,e){if(Mn){var n=t[e];return n===c?r:n}return Yt.call(t,e)?t[e]:r}("string"==typeof t?e.string:e.hash,t):Tn?e.map.get(t):Kn(e.map,t)},Yn.prototype.has=function(t){var e=this.__data__;return sr(t)?Vn("string"==typeof t?e.string:e.hash,t):Tn?e.map.has(t):to(e.map,t)},Yn.prototype.set=function(t,e){var n=this.__data__;return sr(t)?function(t,e,n){t[e]=Mn&&n===r?c:n}("string"==typeof t?n.string:n.hash,t,e):Tn?n.map.set(t,e):no(n.map,t,e),this},Qn.prototype.push=function(t){var e=this.__data__;if(sr(t)){var n=e.__data__;("string"==typeof t?n.string:n.hash)[t]=c}else e.set(t,c)},Jn.prototype.clear=function(){this.__data__={array:[],map:null}},Jn.prototype.delete=function(t){var e=this.__data__,n=e.array;return n?Xn(n,t):e.map.delete(t)},Jn.prototype.get=function(t){var e=this.__data__,n=e.array;return n?Kn(n,t):e.map.get(t)},Jn.prototype.has=function(t){var e=this.__data__,n=e.array;return n?to(n,t):e.map.has(t)},Jn.prototype.set=function(t,e){var n=this.__data__,o=n.array;o&&(o.length<s-1?no(o,t,e):(n.array=null,n.map=new Yn(o)));var i=n.map;return i&&i.set(t,e),this};var mo=ki(_o),vo=ki(ko,!0);function go(t,e){var n=!0;return mo(t,function(t,o,i){return n=!!e(t,o,i)}),n}function bo(t,e,n){for(var o=-1,i=t.length;++o<i;){var a=t[o],s=e(a);if(null!=s&&(l===r?s==s&&!Da(s):n(s,l)))var l=s,c=a}return c}function wo(t,e){var n=[];return mo(t,function(t,o,i){e(t,o,i)&&n.push(t)}),n}function yo(t,e,n,o,i){var r=-1,a=t.length;for(n||(n=nr),i||(i=[]);++r<a;){var s=t[r];e>0&&n(s)?e>1?yo(s,e-1,n,o,i):We(i,s):o||(i[i.length]=s)}return i}var $o=Ci(),xo=Ci(!0);function _o(t,e){return t&&$o(t,e,ss)}function ko(t,e){return t&&xo(t,e,ss)}function Co(t,e){return Ue(e,function(e){return Sa(t[e])})}function To(t,e){for(var n=0,o=(e=ar(e,t)?[e]:fi(e)).length;null!=t&&n<o;)t=t[br(e[n++])];return n&&n==o?t:r}function Eo(t,e,n){var o=e(t);return ka(t)?o:We(o,n(t))}function Po(t,e){return t>e}function So(t,e){return Yt.call(t,e)||"object"==typeof t&&e in t&&null===Zi(t)}function Mo(t,e){return e in Object(t)}function Io(t,e,n){for(var o=n?Ne:De,i=t[0].length,a=t.length,s=a,l=Array(a),c=1/0,u=[];s--;){var d=t[s];s&&e&&(d=He(d,en(e))),c=an(d.length,c),l[s]=!n&&(e||i>=120&&d.length>=120)?new Qn(s&&d):r}d=t[0];var h=-1,p=l[0];t:for(;++h<i&&u.length<c;){var f=d[h],m=e?e(f):f;if(f=n||0!==f?f:0,!(p?Zn(p,m):o(u,m,n))){for(s=a;--s;){var v=l[s];if(!(v?Zn(v,m):o(t[s],m,n)))continue t}p&&p.push(m),u.push(f)}}return u}function Ao(t,e,n){ar(e,t)||(t=pr(t,e=fi(e)),e=Mr(e));var o=null==t?t:t[br(e)];return null==o?r:Re(o,t,n)}function Oo(t,e,n,o,i){return t===e||(null==t||null==e||!Aa(t)&&!Oa(e)?t!=t&&e!=e:function(t,e,n,o,i,a){var s=ka(t),l=ka(e),c=U,u=U;s||(c=(c=Ki(t))==L?G:c),l||(u=(u=Ki(e))==L?G:u);var d=c==G&&!dn(t),h=u==G&&!dn(e),p=c==u;if(p&&!d)return a||(a=new Jn),s||Na(t)?Hi(t,e,n,o,i,a):function(t,e,n,o,i,r,a){switch(n){case et:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case tt:return!(t.byteLength!=e.byteLength||!o(new oe(t),new oe(e)));case D:case N:return+t==+e;case H:return t.name==e.name&&t.message==e.message;case F:return t!=+t?e!=+e:t==+e;case Y:case Z:return t==e+"";case z:var s=pn;case Q:var l=r&x;if(s||(s=mn),t.size!=e.size&&!l)return!1;var c=a.get(t);return c?c==e:(r|=$,a.set(t,e),Hi(s(t),s(e),o,i,r,a));case J:if(Nn)return Nn.call(t)==Nn.call(e)}return!1}(t,e,c,n,o,i,a);if(!(i&x)){var f=d&&Yt.call(t,"__wrapped__"),m=h&&Yt.call(e,"__wrapped__");if(f||m){var v=f?t.value():t,g=m?e.value():e;return a||(a=new Jn),n(v,g,o,i,a)}}return!!p&&(a||(a=new Jn),function(t,e,n,o,i,a){var s=i&x,l=ss(t),c=l.length,u=ss(e).length;if(c!=u&&!s)return!1;for(var d=c;d--;){var h=l[d];if(!(s?h in e:So(e,h)))return!1}var p=a.get(t);if(p)return p==e;var f=!0;a.set(t,e);for(var m=s;++d<c;){h=l[d];var v=t[h],g=e[h];if(o)var b=s?o(g,v,h,e,t,a):o(v,g,h,t,e,a);if(!(b===r?v===g||n(v,g,o,i,a):b)){f=!1;break}m||(m="constructor"==h)}if(f&&!m){var w=t.constructor,y=e.constructor;w!=y&&"constructor"in t&&"constructor"in e&&!("function"==typeof w&&w instanceof w&&"function"==typeof y&&y instanceof y)&&(f=!1)}return a.delete(t),f}(t,e,n,o,i,a))}(t,e,Oo,n,o,i))}function Ro(t,e,n,o){var i=n.length,a=i,s=!o;if(null==t)return!a;for(t=Object(t);i--;){var l=n[i];if(s&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++i<a;){var c=(l=n[i])[0],u=t[c],d=l[1];if(s&&l[2]){if(u===r&&!(c in t))return!1}else{var h=new Jn;if(o)var p=o(u,d,c,t,e,h);if(!(p===r?Oo(d,u,o,$|x,h):p))return!1}}return!0}function Bo(t){return"function"==typeof t?t:null==t?As:"object"==typeof t?ka(t)?No(t[0],t[1]):Do(t):Hs(t)}function jo(t){t=null==t?t:Object(t);var e=[];for(var n in t)e.push(n);return e}function Lo(t,e){return t<e}function Uo(t,e){var n=-1,o=Ca(t)?Array(t.length):[];return mo(t,function(t,i,r){o[++n]=e(t,i,r)}),o}function Do(t){var e=Vi(t);return 1==e.length&&e[0][2]?dr(e[0][0],e[0][1]):function(n){return n===t||Ro(n,t,e)}}function No(t,e){return ar(t)&&ur(e)?dr(br(t),e):function(n){var o=ns(n,t);return o===r&&o===e?os(n,t):Oo(e,o,r,$|x)}}function Ho(t,e,n,o,i){if(t!==e){if(!ka(e)&&!Na(e))var a=ls(e);je(a||e,function(s,l){if(a&&(s=e[l=s]),Aa(s))i||(i=new Jn),function(t,e,n,o,i,a,s){var l=t[n],c=e[n],u=s.get(c);if(u)io(t,n,u);else{var d=a?a(l,c,n+"",t,e,s):r,h=d===r;h&&(d=c,ka(c)||Na(c)?ka(l)?d=l:Ta(l)?d=yi(l):(h=!1,d=uo(c,!0)):ja(c)||_a(c)?_a(l)?d=Va(l):!Aa(l)||o&&Sa(l)?(h=!1,d=uo(c,!0)):d=l:h=!1),s.set(c,d),h&&i(d,c,o,a,s),s.delete(c),io(t,n,d)}}(t,e,l,n,Ho,o,i);else{var c=o?o(t[l],s,l+"",t,e,i):r;c===r&&(c=s),io(t,l,c)}})}}function Wo(t,e){var n=t.length;if(n)return ir(e+=e<0?n:0,n)?t[e]:r}function qo(t,e,n){var o=-1;return e=He(e.length?e:[As],en(Fi())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(Uo(t,function(t,n,i){return{criteria:He(e,function(e){return e(t)}),index:++o,value:t}}),function(t,e){return function(t,e,n){for(var o=-1,i=t.criteria,r=e.criteria,a=i.length,s=n.length;++o<a;){var l=gi(i[o],r[o]);if(l){if(o>=s)return l;var c=n[o];return l*("desc"==c?-1:1)}}return t.index-e.index}(t,e,n)})}function zo(t,e){return t=Object(t),qe(e,function(e,n){return n in t&&(e[n]=t[n]),e},{})}function Fo(t,e){for(var n=-1,o=Wi(t),i=o.length,r={};++n<i;){var a=o[n],s=t[a];e(s,a)&&(r[a]=s)}return r}function Go(t){return function(e){return null==e?r:e[t]}}function Vo(t,e,n,o){var i=o?Qe:Ye,r=-1,a=e.length,s=t;for(n&&(s=He(t,en(n)));++r<a;)for(var l=0,c=e[r],u=n?n(c):c;(l=i(s,u,l,o))>-1;)s!==t&&ye.call(s,l,1),ye.call(t,l,1);return t}function Yo(t,e){for(var n=t?e.length:0,o=n-1;n--;){var i=e[n];if(n==o||i!==r){var r=i;if(ir(i))ye.call(t,i,1);else if(ar(i,t))delete t[br(i)];else{var a=fi(i),s=pr(t,a);null!=s&&delete s[br(Mr(a))]}}}return t}function Qo(t,e){return t+ke($n()*(e-t+1))}function Zo(t,e){var n="";if(!t||e<1||e>I)return n;do{e%2&&(n+=t),(e=ke(e/2))&&(t+=t)}while(e);return n}function Jo(t,e,n,o){for(var i=-1,a=(e=ar(e,t)?[e]:fi(e)).length,s=a-1,l=t;null!=l&&++i<a;){var c=br(e[i]);if(Aa(l)){var u=n;if(i!=s){var d=l[c];(u=o?o(d,c,l):r)===r&&(u=null==d?ir(e[i+1])?[]:{}:d)}ro(l,c,u)}l=l[c]}return t}re&&!be.call({valueOf:1},"valueOf")&&(jo=function(t){return hn(re(t))});var Xo=In?function(t,e){return In.set(t,e),t}:As;function Ko(t,e,n){var o=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var r=Array(i);++o<i;)r[o]=t[o+e];return r}function ti(t,e){var n;return mo(t,function(t,o,i){return!(n=e(t,o,i))}),!!n}function ei(t,e,n){var o=0,i=t?t.length:o;if("number"==typeof e&&e==e&&i<=j){for(;o<i;){var r=o+i>>>1,a=t[r];null!==a&&!Da(a)&&(n?a<=e:a<e)?o=r+1:i=r}return i}return ni(t,e,As,n)}function ni(t,e,n,o){e=n(e);for(var i=0,a=t?t.length:0,s=e!=e,l=null===e,c=Da(e),u=e===r;i<a;){var d=ke((i+a)/2),h=n(t[d]),p=h!==r,f=null===h,m=h==h,v=Da(h);if(s)var g=o||m;else g=u?m&&(o||p):l?m&&p&&(o||!f):c?m&&p&&!f&&(o||!v):!f&&!v&&(o?h<=e:h<e);g?i=d+1:a=d}return an(a,B)}function oi(t,e){for(var n=-1,o=t.length,i=0,r=[];++n<o;){var a=t[n],s=e?e(a):a;if(!n||!ya(s,l)){var l=s;r[i++]=0===a?0:a}}return r}function ii(t){return"number"==typeof t?t:Da(t)?O:+t}function ri(t){if("string"==typeof t)return t;if(Da(t))return Hn?Hn.call(t):"";var e=t+"";return"0"==e&&1/t==-M?"-0":e}function ai(t,e,n){var o=-1,i=De,r=t.length,a=!0,l=[],c=l;if(n)a=!1,i=Ne;else if(r>=s){var u=e?null:Di(t);if(u)return mn(u);a=!1,i=Zn,c=new Qn}else c=e?[]:l;t:for(;++o<r;){var d=t[o],h=e?e(d):d;if(d=n||0!==d?d:0,a&&h==h){for(var p=c.length;p--;)if(c[p]===h)continue t;e&&c.push(h),l.push(d)}else i(c,h,n)||(c!==l&&c.push(h),l.push(d))}return l}function si(t,e,n,o){return Jo(t,e,n(To(t,e)),o)}function li(t,e,n,o){for(var i=t.length,r=o?i:-1;(o?r--:++r<i)&&e(t[r],r,t););return n?Ko(t,o?0:r,o?r+1:i):Ko(t,o?r+1:0,o?i:r)}function ci(t,e){var n=t;return n instanceof Fn&&(n=n.value()),qe(e,function(t,e){return e.func.apply(e.thisArg,We([t],e.args))},n)}function ui(t,e,n){for(var o=-1,i=t.length;++o<i;)var r=r?We(fo(r,t[o],e,n),fo(t[o],r,e,n)):t[o];return r&&r.length?ai(r,e,n):[]}function di(t,e,n){for(var o=-1,i=t.length,a=e.length,s={};++o<i;){var l=o<a?e[o]:r;n(s,t[o],l)}return s}function hi(t){return Ta(t)?t:[]}function pi(t){return"function"==typeof t?t:As}function fi(t){return ka(t)?t:gr(t)}function mi(t,e,n){var o=t.length;return n=n===r?o:n,!e&&n>=o?t:Ko(t,e,n)}function vi(t){var e=new t.constructor(t.byteLength);return new oe(e).set(new oe(t)),e}function gi(t,e){if(t!==e){var n=t!==r,o=null===t,i=t==t,a=Da(t),s=e!==r,l=null===e,c=e==e,u=Da(e);if(!l&&!u&&!a&&t>e||a&&s&&c&&!l&&!u||o&&s&&c||!n&&c||!i)return 1;if(!o&&!a&&!u&&t<e||u&&n&&i&&!o&&!a||l&&n&&i||!s&&i||!c)return-1}return 0}function bi(t,e,n,o){for(var i=-1,r=t.length,a=n.length,s=-1,l=e.length,c=Me(r-a,0),u=Array(l+c),d=!o;++s<l;)u[s]=e[s];for(;++i<a;)(d||i<r)&&(u[n[i]]=t[i]);for(;c--;)u[s++]=t[i++];return u}function wi(t,e,n,o){for(var i=-1,r=t.length,a=-1,s=n.length,l=-1,c=e.length,u=Me(r-s,0),d=Array(u+c),h=!o;++i<u;)d[i]=t[i];for(var p=i;++l<c;)d[p+l]=e[l];for(;++a<s;)(h||i<r)&&(d[p+n[a]]=t[i++]);return d}function yi(t,e){var n=-1,o=t.length;for(e||(e=Array(o));++n<o;)e[n]=t[n];return e}function $i(t,e,n,o){n||(n={});for(var i=-1,r=e.length;++i<r;){var a=e[i];ro(n,a,o?o(n[a],t[a],a,n,t):t[a])}return n}function xi(t,e){return function(n,o){var i=ka(n)?Be:ao,r=e?e():{};return i(n,t,Fi(o),r)}}function _i(t){return ba(function(e,n){var o=-1,i=n.length,a=i>1?n[i-1]:r,s=i>2?n[2]:r;for(a="function"==typeof a?(i--,a):r,s&&rr(n[0],n[1],s)&&(a=i<3?r:a,i=1),e=Object(e);++o<i;){var l=n[o];l&&t(e,l,o,a)}return e})}function ki(t,e){return function(n,o){if(null==n)return n;if(!Ca(n))return t(n,o);for(var i=n.length,r=e?i:-1,a=Object(n);(e?r--:++r<i)&&!1!==o(a[r],r,a););return n}}function Ci(t){return function(e,n,o){for(var i=-1,r=Object(e),a=o(e),s=a.length;s--;){var l=a[t?s:++i];if(!1===n(r[l],l,r))break}return e}}function Ti(t){return function(e){e=Ya(e);var n=de.test(e)?gn(e):r,o=n?n[0]:e.charAt(0),i=n?mi(n,1).join(""):e.slice(1);return o[t]()+i}}function Ei(t){return function(e){return qe(Ts(bs(e).replace(se,"")),t,"")}}function Pi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=ho(t.prototype),o=t.apply(n,e);return Aa(o)?o:n}}function Si(t){return ba(function(e){var n=(e=yo(e,1)).length,o=n,i=zn.prototype.thru;for(t&&e.reverse();o--;){var a=e[o];if("function"!=typeof a)throw new qt(l);if(i&&!c&&"wrapper"==zi(a))var c=new zn([],!0)}for(o=c?o:n;++o<n;){var u=zi(a=e[o]),d="wrapper"==u?qi(a):r;c=d&&lr(d[0])&&d[1]==(b|f|v|w)&&!d[4].length&&1==d[9]?c[zi(d[0])].apply(c,d[3]):1==a.length&&lr(a)?c[u]():c.thru(a)}return function(){var t=arguments,o=t[0];if(c&&1==t.length&&ka(o)&&o.length>=s)return c.plant(o).value();for(var i=0,r=n?e[i].apply(this,t):o;++i<n;)r=e[i].call(this,r);return r}})}function Mi(t,e,n,o,i,a,s,l,c,u){var p=e&b,v=e&d,g=e&h,w=e&(f|m),$=e&y,x=g?r:Pi(t);return function d(){for(var h=arguments.length,f=h,m=Array(h);f--;)m[f]=arguments[f];if(w)var b=Qi(d),y=function(t,e){for(var n=t.length,o=0;n--;)t[n]===e&&o++;return o}(m,b);if(o&&(m=bi(m,o,i,w)),a&&(m=wi(m,a,s,w)),h-=y,w&&h<u){var _=fn(m,b);return Li(t,e,Mi,d.placeholder,n,m,_,l,c,u-h)}var k=v?n:this,C=g?k[t]:t;return h=m.length,l?m=function(t,e){for(var n=t.length,o=an(e.length,n),i=yi(t);o--;){var a=e[o];t[o]=ir(a,n)?i[a]:r}return t}(m,l):$&&h>1&&m.reverse(),p&&c<h&&(m.length=c),this&&this!==Ie&&this instanceof d&&(C=x||Pi(C)),C.apply(k,m)}}function Ii(t,e){return function(n,o){return function(t,e,n,o){return _o(t,function(t,i,r){e(o,n(t),i,r)}),o}(n,t,e(o),{})}}function Ai(t){return function(e,n){var o;if(e===r&&n===r)return 0;if(e!==r&&(o=e),n!==r){if(o===r)return n;"string"==typeof e||"string"==typeof n?(e=ri(e),n=ri(n)):(e=ii(e),n=ii(n)),o=t(e,n)}return o}}function Oi(t){return ba(function(e){return e=1==e.length&&ka(e[0])?He(e[0],en(Fi())):He(yo(e,1,or),en(Fi())),ba(function(n){var o=this;return t(e,function(t){return Re(t,o,n)})})})}function Ri(t,e){var n=(e=e===r?" ":ri(e)).length;if(n<2)return n?Zo(e,t):e;var o=Zo(e,$e(t/vn(e)));return de.test(e)?mi(gn(o),0,t).join(""):o.slice(0,t)}function Bi(t){return function(e,n,o){return o&&"number"!=typeof o&&rr(e,n,o)&&(n=o=r),e=(e=Ga(e))==e?e:0,n===r?(n=e,e=0):n=Ga(n)||0,function(t,e,n,o){for(var i=-1,r=Me($e((e-t)/(n||1)),0),a=Array(r);r--;)a[o?r:++i]=t,t+=n;return a}(e,n,o=o===r?e<n?1:-1:Ga(o)||0,t)}}function ji(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Ga(e),n=Ga(n)),t(e,n)}}function Li(t,e,n,o,i,a,s,l,c,u){var m=e&f;e|=m?v:g,(e&=~(m?g:v))&p||(e&=~(d|h));var b=[t,e,i,m?a:r,m?s:r,m?r:a,m?r:s,l,c,u],w=n.apply(r,b);return lr(t)&&vr(w,b),w.placeholder=o,w}function Ui(t){var e=i[t];return function(t,n){if(t=Ga(t),n=za(n)){var o=(Ya(t)+"e").split("e");return+((o=(Ya(e(o[0]+"e"+(+o[1]+n)))+"e").split("e"))[0]+"e"+(+o[1]-n))}return e(t)}}var Di=Pn&&1/mn(new Pn([,-0]))[1]==M?function(t){return new Pn(t)}:Ls;function Ni(t,e,n,o,i,a,s,c){var y=e&h;if(!y&&"function"!=typeof t)throw new qt(l);var $=o?o.length:0;if($||(e&=~(v|g),o=i=r),s=s===r?s:Me(za(s),0),c=c===r?c:za(c),$-=i?i.length:0,e&g){var x=o,_=i;o=i=r}var k=y?r:qi(t),C=[t,e,n,o,i,x,_,a,s,c];if(k&&function(t,e){var n=t[1],o=e[1],i=n|o,r=i<(d|h|b),a=o==b&&n==f||o==b&&n==w&&t[7].length<=e[8]||o==(b|w)&&e[7].length<=e[8]&&n==f;if(!r&&!a)return t;o&d&&(t[2]=e[2],i|=n&d?0:p);var s=e[3];if(s){var l=t[3];t[3]=l?bi(l,s,e[4]):s,t[4]=l?fn(t[3],u):e[4]}(s=e[5])&&(l=t[5],t[5]=l?wi(l,s,e[6]):s,t[6]=l?fn(t[5],u):e[6]),(s=e[7])&&(t[7]=s),o&b&&(t[8]=null==t[8]?e[8]:an(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(C,k),t=C[0],e=C[1],n=C[2],o=C[3],i=C[4],!(c=C[9]=null==C[9]?y?0:t.length:Me(C[9]-$,0))&&e&(f|m)&&(e&=~(f|m)),e&&e!=d)T=e==f||e==m?function(t,e,n){var o=Pi(t);return function i(){for(var a=arguments.length,s=Array(a),l=a,c=Qi(i);l--;)s[l]=arguments[l];var u=a<3&&s[0]!==c&&s[a-1]!==c?[]:fn(s,c);return(a-=u.length)<n?Li(t,e,Mi,i.placeholder,r,s,u,r,r,n-a):Re(this&&this!==Ie&&this instanceof i?o:t,this,s)}}(t,e,c):e!=v&&e!=(d|v)||i.length?Mi.apply(r,C):function(t,e,n,o){var i=e&d,r=Pi(t);return function e(){for(var a=-1,s=arguments.length,l=-1,c=o.length,u=Array(c+s),d=this&&this!==Ie&&this instanceof e?r:t;++l<c;)u[l]=o[l];for(;s--;)u[l++]=arguments[++a];return Re(d,i?n:this,u)}}(t,e,n,o);else var T=function(t,e,n){var o=e&d,i=Pi(t);return function e(){return(this&&this!==Ie&&this instanceof e?i:t).apply(o?n:this,arguments)}}(t,e,n);return(k?Xo:vr)(T,C)}function Hi(t,e,n,o,i,a){var s=-1,l=i&x,c=i&$,u=t.length,d=e.length;if(u!=d&&!(l&&d>u))return!1;var h=a.get(t);if(h)return h==e;var p=!0;for(a.set(t,e);++s<u;){var f=t[s],m=e[s];if(o)var v=l?o(m,f,s,e,t,a):o(f,m,s,t,e,a);if(v!==r){if(v)continue;p=!1;break}if(c){if(!Fe(e,function(t){return f===t||n(f,t,o,i,a)})){p=!1;break}}else if(f!==m&&!n(f,m,o,i,a)){p=!1;break}}return a.delete(t),p}function Wi(t){return Eo(t,ls,Xi)}var qi=In?function(t){return In.get(t)}:Ls;function zi(t){for(var e=t.name+"",n=On[e],o=Yt.call(On,e)?n.length:0;o--;){var i=n[o],r=i.func;if(null==r||r==t)return i.name}return e}function Fi(){var t=Wn.iteratee||Os;return t=t===Os?Bo:t,arguments.length?t(arguments[0],arguments[1]):t}var Gi=Go("length");function Vi(t){for(var e=ps(t),n=e.length;n--;)e[n][2]=ur(e[n][1]);return e}function Yi(t,e){var n=t[e];return Ra(n)?n:r}function Qi(t){return(Yt.call(Wn,"placeholder")?Wn:t).placeholder}function Zi(t){return Ce(Object(t))}function Ji(t){return ae(Object(t))}ae||(Ji=function(){return[]});var Xi=ae?function(t){for(var e=[];t;)We(e,Ji(t)),t=Zi(t);return e}:Ji;function Ki(t){return Jt.call(t)}function tr(t,e,n){for(var o,i=-1,r=(e=ar(e,t)?[e]:fi(e)).length;++i<r;){var a=br(e[i]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||!!(r=t?t.length:0)&&Ia(r)&&ir(a,r)&&(ka(t)||Ua(t)||_a(t))}function er(t){var e=t?t.length:r;return Ia(e)&&(ka(t)||Ua(t)||_a(t))?Ke(e,String):null}function nr(t){return Ta(t)&&(ka(t)||_a(t))}function or(t){return ka(t)&&!(2==t.length&&!Sa(t[0]))}function ir(t,e){return!!(e=null==e?I:e)&&("number"==typeof t||Ut.test(t))&&t>-1&&t%1==0&&t<e}function rr(t,e,n){if(!Aa(n))return!1;var o=typeof e;return!!("number"==o?Ca(n)&&ir(e,n.length):"string"==o&&e in n)&&ya(n[e],t)}function ar(t,e){if(ka(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Da(t))||xt.test(t)||!$t.test(t)||null!=e&&t in Object(e)}function sr(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function lr(t){var e=zi(t),n=Wn[e];if("function"!=typeof n||!(e in Fn.prototype))return!1;if(t===n)return!0;var o=qi(n);return!!o&&t===o[0]}function cr(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Ft)}function ur(t){return t==t&&!Aa(t)}function dr(t,e){return function(n){return null!=n&&n[t]===e&&(e!==r||t in Object(n))}}function hr(t,e,n,o,i,a){return Aa(t)&&Aa(e)&&Ho(t,e,r,hr,a.set(e,t)),t}function pr(t,e){return 1==e.length?t:To(t,Ko(e,0,-1))}(Cn&&Ki(new Cn(new ArrayBuffer(1)))!=et||Tn&&Ki(new Tn)!=z||En&&Ki(En.resolve())!=V||Pn&&Ki(new Pn)!=Q||Sn&&Ki(new Sn)!=X)&&(Ki=function(t){var e=Jt.call(t),n=e==G?t.constructor:r,o=n?wr(n):r;if(o)switch(o){case Rn:return et;case Bn:return z;case jn:return V;case Ln:return Q;case Un:return X}return e});var fr,mr,vr=(fr=0,mr=0,function(t,e){var n=ra(),o=T-(n-mr);if(mr=n,o>0){if(++fr>=C)return t}else fr=0;return Xo(t,e)}),gr=pa(function(t){var e=[];return Ya(t).replace(_t,function(t,n,o,i){e.push(o?i.replace(Mt,"$1"):n||t)}),e});function br(t){if("string"==typeof t||Da(t))return t;var e=t+"";return"0"==e&&1/t==-M?"-0":e}function wr(t){if(null!=t){try{return Vt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function yr(t){if(t instanceof Fn)return t.clone();var e=new zn(t.__wrapped__,t.__chain__);return e.__actions__=yi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var $r=ba(function(t,e){return Ta(t)?fo(t,yo(e,1,Ta,!0)):[]}),xr=ba(function(t,e){var n=Mr(e);return Ta(n)&&(n=r),Ta(t)?fo(t,yo(e,1,Ta,!0),Fi(n)):[]}),_r=ba(function(t,e){var n=Mr(e);return Ta(n)&&(n=r),Ta(t)?fo(t,yo(e,1,Ta,!0),r,n):[]});function kr(t,e,n){var o=t?t.length:0;return o?Ko(t,(e=n||e===r?1:za(e))<0?0:e,o):[]}function Cr(t,e,n){var o=t?t.length:0;return o?Ko(t,0,(e=o-(e=n||e===r?1:za(e)))<0?0:e):[]}function Tr(t){return t&&t.length?t[0]:r}var Er=ba(function(t){var e=He(t,hi);return e.length&&e[0]===t[0]?Io(e):[]}),Pr=ba(function(t){var e=Mr(t),n=He(t,hi);return e===Mr(n)?e=r:n.pop(),n.length&&n[0]===t[0]?Io(n,Fi(e)):[]}),Sr=ba(function(t){var e=Mr(t),n=He(t,hi);return e===Mr(n)?e=r:n.pop(),n.length&&n[0]===t[0]?Io(n,r,e):[]});function Mr(t){var e=t?t.length:0;return e?t[e-1]:r}var Ir=ba(Ar);function Ar(t,e){return t&&t.length&&e&&e.length?Vo(t,e):t}var Or=ba(function(t,e){e=yo(e,1);var n=t?t.length:0,o=lo(t,e);return Yo(t,He(e,function(t){return ir(t,n)?+t:t}).sort(gi)),o});function Rr(t){return t?_n.call(t):t}var Br=ba(function(t){return ai(yo(t,1,Ta,!0))}),jr=ba(function(t){var e=Mr(t);return Ta(e)&&(e=r),ai(yo(t,1,Ta,!0),Fi(e))}),Lr=ba(function(t){var e=Mr(t);return Ta(e)&&(e=r),ai(yo(t,1,Ta,!0),r,e)});function Ur(t){if(!t||!t.length)return[];var e=0;return t=Ue(t,function(t){if(Ta(t))return e=Me(t.length,e),!0}),Ke(e,function(e){return He(t,Go(e))})}function Dr(t,e){if(!t||!t.length)return[];var n=Ur(t);return null==e?n:He(n,function(t){return Re(e,r,t)})}var Nr=ba(function(t,e){return Ta(t)?fo(t,e):[]}),Hr=ba(function(t){return ui(Ue(t,Ta))}),Wr=ba(function(t){var e=Mr(t);return Ta(e)&&(e=r),ui(Ue(t,Ta),Fi(e))}),qr=ba(function(t){var e=Mr(t);return Ta(e)&&(e=r),ui(Ue(t,Ta),r,e)}),zr=ba(Ur);var Fr=ba(function(t){var e=t.length,n=e>1?t[e-1]:r;return n="function"==typeof n?(t.pop(),n):r,Dr(t,n)});function Gr(t){var e=Wn(t);return e.__chain__=!0,e}function Vr(t,e){return e(t)}var Yr=ba(function(t){var e=(t=yo(t,1)).length,n=e?t[0]:0,o=this.__wrapped__,i=function(e){return lo(e,t)};return!(e>1||this.__actions__.length)&&o instanceof Fn&&ir(n)?((o=o.slice(n,+n+(e?1:0))).__actions__.push({func:Vr,args:[i],thisArg:r}),new zn(o,this.__chain__).thru(function(t){return e&&!t.length&&t.push(r),t})):this.thru(i)});var Qr=xi(function(t,e,n){Yt.call(t,n)?++t[n]:t[n]=1});function Zr(t,e){return"function"==typeof e&&ka(t)?je(t,e):mo(t,Fi(e))}function Jr(t,e){return"function"==typeof e&&ka(t)?function(t,e){for(var n=t.length;n--&&!1!==e(t[n],n,t););return t}(t,e):vo(t,Fi(e))}var Xr=xi(function(t,e,n){Yt.call(t,n)?t[n].push(e):t[n]=[e]});var Kr=ba(function(t,e,n){var o=-1,i="function"==typeof e,a=ar(e),s=Ca(t)?Array(t.length):[];return mo(t,function(t){var l=i?e:a&&null!=t?t[e]:r;s[++o]=l?Re(l,t,n):Ao(t,e,n)}),s}),ta=xi(function(t,e,n){t[n]=e});function ea(t,e){return(ka(t)?He:Uo)(t,Fi(e,3))}var na=xi(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]});function oa(t,e,n){var o=-1,i=qa(t),a=i.length,s=a-1;for(e=(n?rr(t,e,n):e===r)?1:co(za(e),0,a);++o<e;){var l=Qo(o,s),c=i[l];i[l]=i[o],i[o]=c}return i.length=e,i}var ia=ba(function(t,e){if(null==t)return[];var n=e.length;return n>1&&rr(t,e[0],e[1])?e=[]:n>2&&rr(e[0],e[1],e[2])&&(e=[e[0]]),qo(t,e=1==e.length&&ka(e[0])?e[0]:yo(e,1,or),[])}),ra=n.now;function aa(t,e,n){return e=n?r:e,e=t&&null==e?t.length:e,Ni(t,b,r,r,r,r,e)}function sa(t,e){var n;if("function"!=typeof e)throw new qt(l);return t=za(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=r),n}}var la=ba(function(t,e,n){var o=d;if(n.length){var i=fn(n,Qi(la));o|=v}return Ni(t,o,e,n,i)}),ca=ba(function(t,e,n){var o=d|h;if(n.length){var i=fn(n,Qi(ca));o|=v}return Ni(e,o,t,n,i)});function ua(t,e,n){var o,i,a,s,c,u=0,d=0,h=!1,p=!1,f=!0;if("function"!=typeof t)throw new qt(l);function m(e){var n=o,a=i;return o=i=r,d=e,s=t.apply(a,n)}function v(t){var n=t-u;return!u||n>=e||n<0||p&&t-d>=a}function g(){var t=ra();if(v(t))return b(t);c=we(g,function(t){var n=e-(t-u);return p?an(n,a-(t-d)):n}(t))}function b(t){return ie(c),c=r,f&&o?m(t):(o=i=r,s)}function w(){var t=ra(),n=v(t);if(o=arguments,i=this,u=t,n){if(c===r)return function(t){return d=t,c=we(g,e),h?m(t):s}(u);if(p)return ie(c),c=we(g,e),m(u)}return c===r&&(c=we(g,e)),s}return e=Ga(e)||0,Aa(n)&&(h=!!n.leading,a=(p="maxWait"in n)?Me(Ga(n.maxWait)||0,e):a,f="trailing"in n?!!n.trailing:f),w.cancel=function(){c!==r&&ie(c),u=d=0,o=i=c=r},w.flush=function(){return c===r?s:b(ra())},w}var da=ba(function(t,e){return po(t,1,e)}),ha=ba(function(t,e,n){return po(t,Ga(e)||0,n)});function pa(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new qt(l);var n=function(){var o=arguments,i=e?e.apply(this,o):o[0],r=n.cache;if(r.has(i))return r.get(i);var a=t.apply(this,o);return n.cache=r.set(i,a),a};return n.cache=new(pa.Cache||Yn),n}pa.Cache=Yn;var fa=ba(function(t,e){var n=(e=1==e.length&&ka(e[0])?He(e[0],en(Fi())):He(yo(e,1,or),en(Fi()))).length;return ba(function(o){for(var i=-1,r=an(o.length,n);++i<r;)o[i]=e[i].call(this,o[i]);return Re(t,this,o)})}),ma=ba(function(t,e){var n=fn(e,Qi(ma));return Ni(t,v,r,e,n)}),va=ba(function(t,e){var n=fn(e,Qi(va));return Ni(t,g,r,e,n)}),ga=ba(function(t,e){return Ni(t,w,r,r,r,yo(e,1))});function ba(t,e){if("function"!=typeof t)throw new qt(l);return e=Me(e===r?t.length-1:za(e),0),function(){for(var n=arguments,o=-1,i=Me(n.length-e,0),r=Array(i);++o<i;)r[o]=n[e+o];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,n[0],r);case 2:return t.call(this,n[0],n[1],r)}var a=Array(e+1);for(o=-1;++o<e;)a[o]=n[o];return a[e]=r,Re(t,this,a)}}function wa(){if(!arguments.length)return[];var t=arguments[0];return ka(t)?t:[t]}function ya(t,e){return t===e||t!=t&&e!=e}var $a=ji(Po),xa=ji(function(t,e){return t>=e});function _a(t){return Ta(t)&&Yt.call(t,"callee")&&(!be.call(t,"callee")||Jt.call(t)==L)}var ka=Array.isArray;function Ca(t){return null!=t&&Ia(Gi(t))&&!Sa(t)}function Ta(t){return Oa(t)&&Ca(t)}var Ea=te?function(t){return t instanceof te}:Ss(!1);function Pa(t){return!!Oa(t)&&(Jt.call(t)==H||"string"==typeof t.message&&"string"==typeof t.name)}function Sa(t){var e=Aa(t)?Jt.call(t):"";return e==W||e==q}function Ma(t){return"number"==typeof t&&t==za(t)}function Ia(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=I}function Aa(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Oa(t){return!!t&&"object"==typeof t}function Ra(t){return!!Aa(t)&&(Sa(t)||dn(t)?Kt:jt).test(wr(t))}function Ba(t){return"number"==typeof t||Oa(t)&&Jt.call(t)==F}function ja(t){if(!Oa(t)||Jt.call(t)!=G||dn(t))return!1;var e=Zi(t);if(null===e)return!0;var n=Yt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Vt.call(n)==Zt}function La(t){return Aa(t)&&Jt.call(t)==Y}function Ua(t){return"string"==typeof t||!ka(t)&&Oa(t)&&Jt.call(t)==Z}function Da(t){return"symbol"==typeof t||Oa(t)&&Jt.call(t)==J}function Na(t){return Oa(t)&&Ia(t.length)&&!!me[Jt.call(t)]}var Ha=ji(Lo),Wa=ji(function(t,e){return t<=e});function qa(t){if(!t)return[];if(Ca(t))return Ua(t)?gn(t):yi(t);if(ce&&t[ce])return hn(t[ce]());var e=Ki(t);return(e==z?pn:e==Q?mn:ms)(t)}function za(t){if(!t)return 0===t?t:0;if((t=Ga(t))===M||t===-M)return(t<0?-1:1)*A;var e=t%1;return t==t?e?t-e:t:0}function Fa(t){return t?co(za(t),0,R):0}function Ga(t){if("number"==typeof t)return t;if(Da(t))return O;if(Aa(t)){var e=Sa(t.valueOf)?t.valueOf():t;t=Aa(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Tt,"");var n=Bt.test(t);return n||Lt.test(t)?_e(t.slice(2),n?2:8):Rt.test(t)?O:+t}function Va(t){return $i(t,ls(t))}function Ya(t){return null==t?"":ri(t)}var Qa=_i(function(t,e){if(An||cr(e)||Ca(e))$i(e,ss(e),t);else for(var n in e)Yt.call(e,n)&&ro(t,n,e[n])}),Za=_i(function(t,e){if(An||cr(e)||Ca(e))$i(e,ls(e),t);else for(var n in e)ro(t,n,e[n])}),Ja=_i(function(t,e,n,o){$i(e,ls(e),t,o)}),Xa=_i(function(t,e,n,o){$i(e,ss(e),t,o)}),Ka=ba(function(t,e){return lo(t,yo(e,1))});var ts=ba(function(t){return t.push(r,oo),Re(Ja,r,t)}),es=ba(function(t){return t.push(r,hr),Re(us,r,t)});function ns(t,e,n){var o=null==t?r:To(t,e);return o===r?n:o}function os(t,e){return null!=t&&tr(t,e,Mo)}var is=Ii(function(t,e,n){t[e]=n},Ss(As)),rs=Ii(function(t,e,n){Yt.call(t,e)?t[e].push(n):t[e]=[n]},Fi),as=ba(Ao);function ss(t){var e=cr(t);if(!e&&!Ca(t))return function(t){return Se(Object(t))}(t);var n=er(t),o=!!n,i=n||[],r=i.length;for(var a in t)!So(t,a)||o&&("length"==a||ir(a,r))||e&&"constructor"==a||i.push(a);return i}function ls(t){for(var e=-1,n=cr(t),o=jo(t),i=o.length,r=er(t),a=!!r,s=r||[],l=s.length;++e<i;){var c=o[e];a&&("length"==c||ir(c,l))||"constructor"==c&&(n||!Yt.call(t,c))||s.push(c)}return s}var cs=_i(function(t,e,n){Ho(t,e,n)}),us=_i(function(t,e,n,o){Ho(t,e,n,o)}),ds=ba(function(t,e){return null==t?{}:(e=He(yo(e,1),br),zo(t,fo(Wi(t),e)))});var hs=ba(function(t,e){return null==t?{}:zo(t,He(yo(e,1),br))});function ps(t){return tn(t,ss(t))}function fs(t){return tn(t,ls(t))}function ms(t){return t?nn(t,ss(t)):[]}var vs=Ei(function(t,e,n){return e=e.toLowerCase(),t+(n?gs(e):e)});function gs(t){return Cs(Ya(t).toLowerCase())}function bs(t){return(t=Ya(t))&&t.replace(Dt,sn).replace(le,"")}var ws=Ei(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),ys=Ei(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),$s=Ti("toLowerCase");var xs=Ei(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()});var _s=Ei(function(t,e,n){return t+(n?" ":"")+Cs(e)});var ks=Ei(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),Cs=Ti("toUpperCase");function Ts(t,e,n){return t=Ya(t),(e=n?r:e)===r&&(e=he.test(t)?ue:St),t.match(e)||[]}var Es=ba(function(t,e){try{return Re(t,r,e)}catch(t){return Pa(t)?t:new o(t)}}),Ps=ba(function(t,e){return je(yo(e,1),function(e){e=br(e),t[e]=la(t[e],t)}),t});function Ss(t){return function(){return t}}var Ms=Si(),Is=Si(!0);function As(t){return t}function Os(t){return Bo("function"==typeof t?t:uo(t,!0))}var Rs=ba(function(t,e){return function(n){return Ao(n,t,e)}}),Bs=ba(function(t,e){return function(n){return Ao(t,n,e)}});function js(t,e,n){var o=ss(e),i=Co(e,o);null!=n||Aa(e)&&(i.length||!o.length)||(n=e,e=t,t=this,i=Co(e,ss(e)));var r=!(Aa(n)&&"chain"in n&&!n.chain),a=Sa(t);return je(i,function(n){var o=e[n];t[n]=o,a&&(t.prototype[n]=function(){var e=this.__chain__;if(r||e){var n=t(this.__wrapped__);return(n.__actions__=yi(this.__actions__)).push({func:o,args:arguments,thisArg:t}),n.__chain__=e,n}return o.apply(t,We([this.value()],arguments))})}),t}function Ls(){}var Us=Oi(He),Ds=Oi(Le),Ns=Oi(Fe);function Hs(t){return ar(t)?Go(br(t)):function(t){return function(e){return To(e,t)}}(t)}var Ws=Bi(),qs=Bi(!0);var zs=Ai(function(t,e){return t+e}),Fs=Ui("ceil"),Gs=Ai(function(t,e){return t/e}),Vs=Ui("floor");var Ys,Qs=Ai(function(t,e){return t*e}),Zs=Ui("round"),Js=Ai(function(t,e){return t-e});return Wn.after=function(t,e){if("function"!=typeof e)throw new qt(l);return t=za(t),function(){if(--t<1)return e.apply(this,arguments)}},Wn.ary=aa,Wn.assign=Qa,Wn.assignIn=Za,Wn.assignInWith=Ja,Wn.assignWith=Xa,Wn.at=Ka,Wn.before=sa,Wn.bind=la,Wn.bindAll=Ps,Wn.bindKey=ca,Wn.castArray=wa,Wn.chain=Gr,Wn.chunk=function(t,e,n){e=(n?rr(t,e,n):e===r)?1:Me(za(e),0);var o=t?t.length:0;if(!o||e<1)return[];for(var i=0,a=0,s=Array($e(o/e));i<o;)s[a++]=Ko(t,i,i+=e);return s},Wn.compact=function(t){for(var e=-1,n=t?t.length:0,o=0,i=[];++e<n;){var r=t[e];r&&(i[o++]=r)}return i},Wn.concat=function(){var t=arguments.length,e=wa(arguments[0]);if(t<2)return t?yi(e):[];for(var n=Array(t-1);t--;)n[t-1]=arguments[t];return function(t,e){for(var n=-1,o=t.length,i=-1,r=e.length,a=Array(o+r);++n<o;)a[n]=t[n];for(;++i<r;)a[n++]=e[i];return a}(e,yo(n,1))},Wn.cond=function(t){var e=t?t.length:0,n=Fi();return t=e?He(t,function(t){if("function"!=typeof t[1])throw new qt(l);return[n(t[0]),t[1]]}):[],ba(function(n){for(var o=-1;++o<e;){var i=t[o];if(Re(i[0],this,n))return Re(i[1],this,n)}})},Wn.conforms=function(t){return function(t){var e=ss(t),n=e.length;return function(o){if(null==o)return!n;for(var i=n;i--;){var a=e[i],s=t[a],l=o[a];if(l===r&&!(a in Object(o))||!s(l))return!1}return!0}}(uo(t,!0))},Wn.constant=Ss,Wn.countBy=Qr,Wn.create=function(t,e){var n=ho(t);return e?so(n,e):n},Wn.curry=function t(e,n,o){var i=Ni(e,f,r,r,r,r,r,n=o?r:n);return i.placeholder=t.placeholder,i},Wn.curryRight=function t(e,n,o){var i=Ni(e,m,r,r,r,r,r,n=o?r:n);return i.placeholder=t.placeholder,i},Wn.debounce=ua,Wn.defaults=ts,Wn.defaultsDeep=es,Wn.defer=da,Wn.delay=ha,Wn.difference=$r,Wn.differenceBy=xr,Wn.differenceWith=_r,Wn.drop=kr,Wn.dropRight=Cr,Wn.dropRightWhile=function(t,e){return t&&t.length?li(t,Fi(e,3),!0,!0):[]},Wn.dropWhile=function(t,e){return t&&t.length?li(t,Fi(e,3),!0):[]},Wn.fill=function(t,e,n,o){var i=t?t.length:0;return i?(n&&"number"!=typeof n&&rr(t,e,n)&&(n=0,o=i),function(t,e,n,o){var i=t.length;for((n=za(n))<0&&(n=-n>i?0:i+n),(o=o===r||o>i?i:za(o))<0&&(o+=i),o=n>o?0:Fa(o);n<o;)t[n++]=e;return t}(t,e,n,o)):[]},Wn.filter=function(t,e){return(ka(t)?Ue:wo)(t,Fi(e,3))},Wn.flatMap=function(t,e){return yo(ea(t,e),1)},Wn.flatMapDeep=function(t,e){return yo(ea(t,e),M)},Wn.flatMapDepth=function(t,e,n){return n=n===r?1:za(n),yo(ea(t,e),n)},Wn.flatten=function(t){return t&&t.length?yo(t,1):[]},Wn.flattenDeep=function(t){return t&&t.length?yo(t,M):[]},Wn.flattenDepth=function(t,e){return t&&t.length?yo(t,e=e===r?1:za(e)):[]},Wn.flip=function(t){return Ni(t,y)},Wn.flow=Ms,Wn.flowRight=Is,Wn.fromPairs=function(t){for(var e=-1,n=t?t.length:0,o={};++e<n;){var i=t[e];o[i[0]]=i[1]}return o},Wn.functions=function(t){return null==t?[]:Co(t,ss(t))},Wn.functionsIn=function(t){return null==t?[]:Co(t,ls(t))},Wn.groupBy=Xr,Wn.initial=function(t){return Cr(t,1)},Wn.intersection=Er,Wn.intersectionBy=Pr,Wn.intersectionWith=Sr,Wn.invert=is,Wn.invertBy=rs,Wn.invokeMap=Kr,Wn.iteratee=Os,Wn.keyBy=ta,Wn.keys=ss,Wn.keysIn=ls,Wn.map=ea,Wn.mapKeys=function(t,e){var n={};return e=Fi(e,3),_o(t,function(t,o,i){n[e(t,o,i)]=t}),n},Wn.mapValues=function(t,e){var n={};return e=Fi(e,3),_o(t,function(t,o,i){n[o]=e(t,o,i)}),n},Wn.matches=function(t){return Do(uo(t,!0))},Wn.matchesProperty=function(t,e){return No(t,uo(e,!0))},Wn.memoize=pa,Wn.merge=cs,Wn.mergeWith=us,Wn.method=Rs,Wn.methodOf=Bs,Wn.mixin=js,Wn.negate=function(t){if("function"!=typeof t)throw new qt(l);return function(){return!t.apply(this,arguments)}},Wn.nthArg=function(t){return t=za(t),ba(function(e){return Wo(e,t)})},Wn.omit=ds,Wn.omitBy=function(t,e){return e=Fi(e),Fo(t,function(t,n){return!e(t,n)})},Wn.once=function(t){return sa(2,t)},Wn.orderBy=function(t,e,n,o){return null==t?[]:(ka(e)||(e=null==e?[]:[e]),ka(n=o?r:n)||(n=null==n?[]:[n]),qo(t,e,n))},Wn.over=Us,Wn.overArgs=fa,Wn.overEvery=Ds,Wn.overSome=Ns,Wn.partial=ma,Wn.partialRight=va,Wn.partition=na,Wn.pick=hs,Wn.pickBy=function(t,e){return null==t?{}:Fo(t,Fi(e))},Wn.property=Hs,Wn.propertyOf=function(t){return function(e){return null==t?r:To(t,e)}},Wn.pull=Ir,Wn.pullAll=Ar,Wn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Vo(t,e,Fi(n)):t},Wn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Vo(t,e,r,n):t},Wn.pullAt=Or,Wn.range=Ws,Wn.rangeRight=qs,Wn.rearg=ga,Wn.reject=function(t,e){var n=ka(t)?Ue:wo;return e=Fi(e,3),n(t,function(t,n,o){return!e(t,n,o)})},Wn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var o=-1,i=[],r=t.length;for(e=Fi(e,3);++o<r;){var a=t[o];e(a,o,t)&&(n.push(a),i.push(o))}return Yo(t,i),n},Wn.rest=ba,Wn.reverse=Rr,Wn.sampleSize=oa,Wn.set=function(t,e,n){return null==t?t:Jo(t,e,n)},Wn.setWith=function(t,e,n,o){return o="function"==typeof o?o:r,null==t?t:Jo(t,e,n,o)},Wn.shuffle=function(t){return oa(t,R)},Wn.slice=function(t,e,n){var o=t?t.length:0;return o?(n&&"number"!=typeof n&&rr(t,e,n)?(e=0,n=o):(e=null==e?0:za(e),n=n===r?o:za(n)),Ko(t,e,n)):[]},Wn.sortBy=ia,Wn.sortedUniq=function(t){return t&&t.length?oi(t):[]},Wn.sortedUniqBy=function(t,e){return t&&t.length?oi(t,Fi(e)):[]},Wn.split=function(t,e,n){return n&&"number"!=typeof n&&rr(t,e,n)&&(e=n=r),(n=n===r?R:n>>>0)?(t=Ya(t))&&("string"==typeof e||null!=e&&!La(e))&&""==(e=ri(e))&&de.test(t)?mi(gn(t),0,n):kn.call(t,e,n):[]},Wn.spread=function(t,e){if("function"!=typeof t)throw new qt(l);return e=e===r?0:Me(za(e),0),ba(function(n){var o=n[e],i=mi(n,0,e);return o&&We(i,o),Re(t,this,i)})},Wn.tail=function(t){return kr(t,1)},Wn.take=function(t,e,n){return t&&t.length?Ko(t,0,(e=n||e===r?1:za(e))<0?0:e):[]},Wn.takeRight=function(t,e,n){var o=t?t.length:0;return o?Ko(t,(e=o-(e=n||e===r?1:za(e)))<0?0:e,o):[]},Wn.takeRightWhile=function(t,e){return t&&t.length?li(t,Fi(e,3),!1,!0):[]},Wn.takeWhile=function(t,e){return t&&t.length?li(t,Fi(e,3)):[]},Wn.tap=function(t,e){return e(t),t},Wn.throttle=function(t,e,n){var o=!0,i=!0;if("function"!=typeof t)throw new qt(l);return Aa(n)&&(o="leading"in n?!!n.leading:o,i="trailing"in n?!!n.trailing:i),ua(t,e,{leading:o,maxWait:e,trailing:i})},Wn.thru=Vr,Wn.toArray=qa,Wn.toPairs=ps,Wn.toPairsIn=fs,Wn.toPath=function(t){return ka(t)?He(t,br):Da(t)?[t]:yi(gr(t))},Wn.toPlainObject=Va,Wn.transform=function(t,e,n){var o=ka(t)||Na(t);if(e=Fi(e,4),null==n)if(o||Aa(t)){var i=t.constructor;n=o?ka(t)?new i:[]:Sa(i)?ho(Zi(t)):{}}else n={};return(o?je:_o)(t,function(t,o,i){return e(n,t,o,i)}),n},Wn.unary=function(t){return aa(t,1)},Wn.union=Br,Wn.unionBy=jr,Wn.unionWith=Lr,Wn.uniq=function(t){return t&&t.length?ai(t):[]},Wn.uniqBy=function(t,e){return t&&t.length?ai(t,Fi(e)):[]},Wn.uniqWith=function(t,e){return t&&t.length?ai(t,r,e):[]},Wn.unset=function(t,e){return null==t||function(t,e){t=pr(t,e=ar(e,t)?[e]:fi(e));var n=br(Mr(e));return!(null!=t&&So(t,n))||delete t[n]}(t,e)},Wn.unzip=Ur,Wn.unzipWith=Dr,Wn.update=function(t,e,n){return null==t?t:si(t,e,pi(n))},Wn.updateWith=function(t,e,n,o){return o="function"==typeof o?o:r,null==t?t:si(t,e,pi(n),o)},Wn.values=ms,Wn.valuesIn=function(t){return null==t?[]:nn(t,ls(t))},Wn.without=Nr,Wn.words=Ts,Wn.wrap=function(t,e){return ma(e=null==e?As:e,t)},Wn.xor=Hr,Wn.xorBy=Wr,Wn.xorWith=qr,Wn.zip=zr,Wn.zipObject=function(t,e){return di(t||[],e||[],ro)},Wn.zipObjectDeep=function(t,e){return di(t||[],e||[],Jo)},Wn.zipWith=Fr,Wn.entries=ps,Wn.entriesIn=fs,Wn.extend=Za,Wn.extendWith=Ja,js(Wn,Wn),Wn.add=zs,Wn.attempt=Es,Wn.camelCase=vs,Wn.capitalize=gs,Wn.ceil=Fs,Wn.clamp=function(t,e,n){return n===r&&(n=e,e=r),n!==r&&(n=(n=Ga(n))==n?n:0),e!==r&&(e=(e=Ga(e))==e?e:0),co(Ga(t),e,n)},Wn.clone=function(t){return uo(t,!1,!0)},Wn.cloneDeep=function(t){return uo(t,!0,!0)},Wn.cloneDeepWith=function(t,e){return uo(t,!0,!0,e)},Wn.cloneWith=function(t,e){return uo(t,!1,!0,e)},Wn.deburr=bs,Wn.divide=Gs,Wn.endsWith=function(t,e,n){t=Ya(t),e=ri(e);var o=t.length;return n=n===r?o:co(za(n),0,o),(n-=e.length)>=0&&t.indexOf(e,n)==n},Wn.eq=ya,Wn.escape=function(t){return(t=Ya(t))&&gt.test(t)?t.replace(mt,ln):t},Wn.escapeRegExp=function(t){return(t=Ya(t))&&Ct.test(t)?t.replace(kt,"\\$&"):t},Wn.every=function(t,e,n){var o=ka(t)?Le:go;return n&&rr(t,e,n)&&(e=r),o(t,Fi(e,3))},Wn.find=function(t,e){if(e=Fi(e,3),ka(t)){var n=Ve(t,e);return n>-1?t[n]:r}return Ge(t,e,mo)},Wn.findIndex=function(t,e){return t&&t.length?Ve(t,Fi(e,3)):-1},Wn.findKey=function(t,e){return Ge(t,Fi(e,3),_o,!0)},Wn.findLast=function(t,e){if(e=Fi(e,3),ka(t)){var n=Ve(t,e,!0);return n>-1?t[n]:r}return Ge(t,e,vo)},Wn.findLastIndex=function(t,e){return t&&t.length?Ve(t,Fi(e,3),!0):-1},Wn.findLastKey=function(t,e){return Ge(t,Fi(e,3),ko,!0)},Wn.floor=Vs,Wn.forEach=Zr,Wn.forEachRight=Jr,Wn.forIn=function(t,e){return null==t?t:$o(t,Fi(e),ls)},Wn.forInRight=function(t,e){return null==t?t:xo(t,Fi(e),ls)},Wn.forOwn=function(t,e){return t&&_o(t,Fi(e))},Wn.forOwnRight=function(t,e){return t&&ko(t,Fi(e))},Wn.get=ns,Wn.gt=$a,Wn.gte=xa,Wn.has=function(t,e){return null!=t&&tr(t,e,So)},Wn.hasIn=os,Wn.head=Tr,Wn.identity=As,Wn.includes=function(t,e,n,o){t=Ca(t)?t:ms(t),n=n&&!o?za(n):0;var i=t.length;return n<0&&(n=Me(i+n,0)),Ua(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Ye(t,e,n)>-1},Wn.indexOf=function(t,e,n){var o=t?t.length:0;return o?((n=za(n))<0&&(n=Me(o+n,0)),Ye(t,e,n)):-1},Wn.inRange=function(t,e,n){return e=Ga(e)||0,n===r?(n=e,e=0):n=Ga(n)||0,function(t,e,n){return t>=an(e,n)&&t<Me(e,n)}(t=Ga(t),e,n)},Wn.invoke=as,Wn.isArguments=_a,Wn.isArray=ka,Wn.isArrayBuffer=function(t){return Oa(t)&&Jt.call(t)==tt},Wn.isArrayLike=Ca,Wn.isArrayLikeObject=Ta,Wn.isBoolean=function(t){return!0===t||!1===t||Oa(t)&&Jt.call(t)==D},Wn.isBuffer=Ea,Wn.isDate=function(t){return Oa(t)&&Jt.call(t)==N},Wn.isElement=function(t){return!!t&&1===t.nodeType&&Oa(t)&&!ja(t)},Wn.isEmpty=function(t){if(Ca(t)&&(ka(t)||Ua(t)||Sa(t.splice)||_a(t)||Ea(t)))return!t.length;if(Oa(t)){var e=Ki(t);if(e==z||e==Q)return!t.size}for(var n in t)if(Yt.call(t,n))return!1;return!(An&&ss(t).length)},Wn.isEqual=function(t,e){return Oo(t,e)},Wn.isEqualWith=function(t,e,n){var o=(n="function"==typeof n?n:r)?n(t,e):r;return o===r?Oo(t,e,n):!!o},Wn.isError=Pa,Wn.isFinite=function(t){return"number"==typeof t&&Ee(t)},Wn.isFunction=Sa,Wn.isInteger=Ma,Wn.isLength=Ia,Wn.isMap=function(t){return Oa(t)&&Ki(t)==z},Wn.isMatch=function(t,e){return t===e||Ro(t,e,Vi(e))},Wn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:r,Ro(t,e,Vi(e),n)},Wn.isNaN=function(t){return Ba(t)&&t!=+t},Wn.isNative=Ra,Wn.isNil=function(t){return null==t},Wn.isNull=function(t){return null===t},Wn.isNumber=Ba,Wn.isObject=Aa,Wn.isObjectLike=Oa,Wn.isPlainObject=ja,Wn.isRegExp=La,Wn.isSafeInteger=function(t){return Ma(t)&&t>=-I&&t<=I},Wn.isSet=function(t){return Oa(t)&&Ki(t)==Q},Wn.isString=Ua,Wn.isSymbol=Da,Wn.isTypedArray=Na,Wn.isUndefined=function(t){return t===r},Wn.isWeakMap=function(t){return Oa(t)&&Ki(t)==X},Wn.isWeakSet=function(t){return Oa(t)&&Jt.call(t)==K},Wn.join=function(t,e){return t?Pe.call(t,e):""},Wn.kebabCase=ws,Wn.last=Mr,Wn.lastIndexOf=function(t,e,n){var o=t?t.length:0;if(!o)return-1;var i=o;if(n!==r&&(i=((i=za(n))<0?Me(o+i,0):an(i,o-1))+1),e!=e)return un(t,i,!0);for(;i--;)if(t[i]===e)return i;return-1},Wn.lowerCase=ys,Wn.lowerFirst=$s,Wn.lt=Ha,Wn.lte=Wa,Wn.max=function(t){return t&&t.length?bo(t,As,Po):r},Wn.maxBy=function(t,e){return t&&t.length?bo(t,Fi(e),Po):r},Wn.mean=function(t){return Ze(t,As)},Wn.meanBy=function(t,e){return Ze(t,Fi(e))},Wn.min=function(t){return t&&t.length?bo(t,As,Lo):r},Wn.minBy=function(t,e){return t&&t.length?bo(t,Fi(e),Lo):r},Wn.multiply=Qs,Wn.nth=function(t,e){return t&&t.length?Wo(t,za(e)):r},Wn.noConflict=function(){return Ie._===this&&(Ie._=Xt),this},Wn.noop=Ls,Wn.now=ra,Wn.pad=function(t,e,n){t=Ya(t);var o=(e=za(e))?vn(t):0;if(!e||o>=e)return t;var i=(e-o)/2;return Ri(ke(i),n)+t+Ri($e(i),n)},Wn.padEnd=function(t,e,n){t=Ya(t);var o=(e=za(e))?vn(t):0;return e&&o<e?t+Ri(e-o,n):t},Wn.padStart=function(t,e,n){t=Ya(t);var o=(e=za(e))?vn(t):0;return e&&o<e?Ri(e-o,n)+t:t},Wn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),t=Ya(t).replace(Tt,""),yn(t,e||(Ot.test(t)?16:10))},Wn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&rr(t,e,n)&&(e=n=r),n===r&&("boolean"==typeof e?(n=e,e=r):"boolean"==typeof t&&(n=t,t=r)),t===r&&e===r?(t=0,e=1):(t=Ga(t)||0,e===r?(e=t,t=0):e=Ga(e)||0),t>e){var o=t;t=e,e=o}if(n||t%1||e%1){var i=$n();return an(t+i*(e-t+xe("1e-"+((i+"").length-1))),e)}return Qo(t,e)},Wn.reduce=function(t,e,n){var o=ka(t)?qe:Je,i=arguments.length<3;return o(t,Fi(e,4),n,i,mo)},Wn.reduceRight=function(t,e,n){var o=ka(t)?ze:Je,i=arguments.length<3;return o(t,Fi(e,4),n,i,vo)},Wn.repeat=function(t,e,n){return e=(n?rr(t,e,n):e===r)?1:za(e),Zo(Ya(t),e)},Wn.replace=function(){var t=arguments,e=Ya(t[0]);return t.length<3?e:xn.call(e,t[1],t[2])},Wn.result=function(t,e,n){var o=-1,i=(e=ar(e,t)?[e]:fi(e)).length;for(i||(t=r,i=1);++o<i;){var a=null==t?r:t[br(e[o])];a===r&&(o=i,a=n),t=Sa(a)?a.call(t):a}return t},Wn.round=Zs,Wn.runInContext=t,Wn.sample=function(t){var e=Ca(t)?t:ms(t),n=e.length;return n>0?e[Qo(0,n-1)]:r},Wn.size=function(t){if(null==t)return 0;if(Ca(t)){var e=t.length;return e&&Ua(t)?vn(t):e}if(Oa(t)){var n=Ki(t);if(n==z||n==Q)return t.size}return ss(t).length},Wn.snakeCase=xs,Wn.some=function(t,e,n){var o=ka(t)?Fe:ti;return n&&rr(t,e,n)&&(e=r),o(t,Fi(e,3))},Wn.sortedIndex=function(t,e){return ei(t,e)},Wn.sortedIndexBy=function(t,e,n){return ni(t,e,Fi(n))},Wn.sortedIndexOf=function(t,e){var n=t?t.length:0;if(n){var o=ei(t,e);if(o<n&&ya(t[o],e))return o}return-1},Wn.sortedLastIndex=function(t,e){return ei(t,e,!0)},Wn.sortedLastIndexBy=function(t,e,n){return ni(t,e,Fi(n),!0)},Wn.sortedLastIndexOf=function(t,e){if(t&&t.length){var n=ei(t,e,!0)-1;if(ya(t[n],e))return n}return-1},Wn.startCase=_s,Wn.startsWith=function(t,e,n){return t=Ya(t),n=co(za(n),0,t.length),t.lastIndexOf(ri(e),n)==n},Wn.subtract=Js,Wn.sum=function(t){return t&&t.length?Xe(t,As):0},Wn.sumBy=function(t,e){return t&&t.length?Xe(t,Fi(e)):0},Wn.template=function(t,e,n){var o=Wn.templateSettings;n&&rr(t,e,n)&&(e=r),t=Ya(t),e=Ja({},e,o,oo);var i,a,s=Ja({},e.imports,o.imports,oo),l=ss(s),c=nn(s,l),u=0,d=e.interpolate||Nt,h="__p += '",p=Wt((e.escape||Nt).source+"|"+d.source+"|"+(d===yt?It:Nt).source+"|"+(e.evaluate||Nt).source+"|$","g"),f="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++fe+"]")+"\n";t.replace(p,function(e,n,o,r,s,l){return o||(o=r),h+=t.slice(u,l).replace(Ht,cn),n&&(i=!0,h+="' +\n__e("+n+") +\n'"),s&&(a=!0,h+="';\n"+s+";\n__p += '"),o&&(h+="' +\n((__t = ("+o+")) == null ? '' : __t) +\n'"),u=l+e.length,e}),h+="';\n";var m=e.variable;m||(h="with (obj) {\n"+h+"\n}\n"),h=(a?h.replace(dt,""):h).replace(ht,"$1").replace(pt,"$1;"),h="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var v=Es(function(){return Function(l,f+"return "+h).apply(r,c)});if(v.source=h,Pa(v))throw v;return v},Wn.times=function(t,e){if((t=za(t))<1||t>I)return[];var n=R,o=an(t,R);e=Fi(e),t-=R;for(var i=Ke(o,e);++n<t;)e(n);return i},Wn.toInteger=za,Wn.toLength=Fa,Wn.toLower=function(t){return Ya(t).toLowerCase()},Wn.toNumber=Ga,Wn.toSafeInteger=function(t){return co(za(t),-I,I)},Wn.toString=Ya,Wn.toUpper=function(t){return Ya(t).toUpperCase()},Wn.trim=function(t,e,n){if((t=Ya(t))&&(n||e===r))return t.replace(Tt,"");if(!t||!(e=ri(e)))return t;var o=gn(t),i=gn(e);return mi(o,on(o,i),rn(o,i)+1).join("")},Wn.trimEnd=function(t,e,n){if((t=Ya(t))&&(n||e===r))return t.replace(Pt,"");if(!t||!(e=ri(e)))return t;var o=gn(t);return mi(o,0,rn(o,gn(e))+1).join("")},Wn.trimStart=function(t,e,n){if((t=Ya(t))&&(n||e===r))return t.replace(Et,"");if(!t||!(e=ri(e)))return t;var o=gn(t);return mi(o,on(o,gn(e))).join("")},Wn.truncate=function(t,e){var n=_,o=k;if(Aa(e)){var i="separator"in e?e.separator:i;n="length"in e?za(e.length):n,o="omission"in e?ri(e.omission):o}var a=(t=Ya(t)).length;if(de.test(t)){var s=gn(t);a=s.length}if(n>=a)return t;var l=n-vn(o);if(l<1)return o;var c=s?mi(s,0,l).join(""):t.slice(0,l);if(i===r)return c+o;if(s&&(l+=c.length-l),La(i)){if(t.slice(l).search(i)){var u,d=c;for(i.global||(i=Wt(i.source,Ya(At.exec(i))+"g")),i.lastIndex=0;u=i.exec(d);)var h=u.index;c=c.slice(0,h===r?l:h)}}else if(t.indexOf(ri(i),l)!=l){var p=c.lastIndexOf(i);p>-1&&(c=c.slice(0,p))}return c+o},Wn.unescape=function(t){return(t=Ya(t))&&vt.test(t)?t.replace(ft,bn):t},Wn.uniqueId=function(t){var e=++Qt;return Ya(t)+e},Wn.upperCase=ks,Wn.upperFirst=Cs,Wn.each=Zr,Wn.eachRight=Jr,Wn.first=Tr,js(Wn,(Ys={},_o(Wn,function(t,e){Yt.call(Wn.prototype,e)||(Ys[e]=t)}),Ys),{chain:!1}),Wn.VERSION=a,je(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){Wn[t].placeholder=Wn}),je(["drop","take"],function(t,e){Fn.prototype[t]=function(n){var o=this.__filtered__;if(o&&!e)return new Fn(this);n=n===r?1:Me(za(n),0);var i=this.clone();return o?i.__takeCount__=an(n,i.__takeCount__):i.__views__.push({size:an(n,R),type:t+(i.__dir__<0?"Right":"")}),i},Fn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),je(["filter","map","takeWhile"],function(t,e){var n=e+1,o=n==E||n==S;Fn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Fi(t,3),type:n}),e.__filtered__=e.__filtered__||o,e}}),je(["head","last"],function(t,e){var n="take"+(e?"Right":"");Fn.prototype[t]=function(){return this[n](1).value()[0]}}),je(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");Fn.prototype[t]=function(){return this.__filtered__?new Fn(this):this[n](1)}}),Fn.prototype.compact=function(){return this.filter(As)},Fn.prototype.find=function(t){return this.filter(t).head()},Fn.prototype.findLast=function(t){return this.reverse().find(t)},Fn.prototype.invokeMap=ba(function(t,e){return"function"==typeof t?new Fn(this):this.map(function(n){return Ao(n,t,e)})}),Fn.prototype.reject=function(t){return t=Fi(t,3),this.filter(function(e){return!t(e)})},Fn.prototype.slice=function(t,e){t=za(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Fn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==r&&(n=(e=za(e))<0?n.dropRight(-e):n.take(e-t)),n)},Fn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Fn.prototype.toArray=function(){return this.take(R)},_o(Fn.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),o=/^(?:head|last)$/.test(e),i=Wn[o?"take"+("last"==e?"Right":""):e],a=o||/^find/.test(e);i&&(Wn.prototype[e]=function(){var e=this.__wrapped__,s=o?[1]:arguments,l=e instanceof Fn,c=s[0],u=l||ka(e),d=function(t){var e=i.apply(Wn,We([t],s));return o&&h?e[0]:e};u&&n&&"function"==typeof c&&1!=c.length&&(l=u=!1);var h=this.__chain__,p=!!this.__actions__.length,f=a&&!h,m=l&&!p;if(!a&&u){e=m?e:new Fn(this);var v=t.apply(e,s);return v.__actions__.push({func:Vr,args:[d],thisArg:r}),new zn(v,h)}return f&&m?t.apply(this,s):(v=this.thru(d),f?o?v.value()[0]:v.value():v)})}),je(["pop","push","shift","sort","splice","unshift"],function(t){var e=zt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",o=/^(?:pop|shift)$/.test(t);Wn.prototype[t]=function(){var t=arguments;if(o&&!this.__chain__){var i=this.value();return e.apply(ka(i)?i:[],t)}return this[n](function(n){return e.apply(ka(n)?n:[],t)})}}),_o(Fn.prototype,function(t,e){var n=Wn[e];if(n){var o=n.name+"";(On[o]||(On[o]=[])).push({name:e,func:n})}}),On[Mi(r,h).name]=[{name:"wrapper",func:r}],Fn.prototype.clone=function(){var t=new Fn(this.__wrapped__);return t.__actions__=yi(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=yi(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=yi(this.__views__),t},Fn.prototype.reverse=function(){if(this.__filtered__){var t=new Fn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Fn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=ka(t),o=e<0,i=n?t.length:0,r=function(t,e,n){for(var o=-1,i=n.length;++o<i;){var r=n[o],a=r.size;switch(r.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=an(e,t+a);break;case"takeRight":t=Me(t,e-a)}}return{start:t,end:e}}(0,i,this.__views__),a=r.start,l=r.end,c=l-a,u=o?l:a-1,d=this.__iteratees__,h=d.length,p=0,f=an(c,this.__takeCount__);if(!n||i<s||i==c&&f==c)return ci(t,this.__actions__);var m=[];t:for(;c--&&p<f;){for(var v=-1,g=t[u+=e];++v<h;){var b=d[v],w=b.iteratee,y=b.type,$=w(g);if(y==P)g=$;else if(!$){if(y==E)continue t;break t}}m[p++]=g}return m},Wn.prototype.at=Yr,Wn.prototype.chain=function(){return Gr(this)},Wn.prototype.commit=function(){return new zn(this.value(),this.__chain__)},Wn.prototype.next=function(){this.__values__===r&&(this.__values__=qa(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?r:this.__values__[this.__index__++]}},Wn.prototype.plant=function(t){for(var e,n=this;n instanceof qn;){var o=yr(n);o.__index__=0,o.__values__=r,e?i.__wrapped__=o:e=o;var i=o;n=n.__wrapped__}return i.__wrapped__=t,e},Wn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Fn){var e=t;return this.__actions__.length&&(e=new Fn(this)),(e=e.reverse()).__actions__.push({func:Vr,args:[Rr],thisArg:r}),new zn(e,this.__chain__)}return this.thru(Rr)},Wn.prototype.toJSON=Wn.prototype.valueOf=Wn.prototype.value=function(){return ci(this.__wrapped__,this.__actions__)},ce&&(Wn.prototype[ce]=function(){return this}),Wn}();(Se||Pe||{})._=wn,(o=function(){return wn}.call(e,n,e,t))===r||(t.exports=o)}).call(this)}).call(e,n(9)(t),function(){return this}())},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){window.cytubeEnhanced=new window.CytubeEnhanced(window.cytubeEnhancedSettings&&window.cytubeEnhancedSettings.language||"ru",window.cytubeEnhancedSettings&&window.cytubeEnhancedSettings.modulesSettings||{},window.cytubeEnhancedSettings&&window.cytubeEnhancedSettings.modulesExtends||{})},function(t,e){window.cytubeEnhanced.addModule("additionalChatCommands",function(t,e){"use strict";var n=this;(e=$.extend({},{permittedCommands:["*"]},e)).permittedCommands=_.isArray(e.permittedCommands)?e.permittedCommands:[],e.permittedCommands=_.map(e.permittedCommands,function(t){return _.toLower(t)}),this.$chatline=$("#chatline"),this.isCommandPermitted=function(t){return!!n.commandsList[t]&&(!n.commandsList[t].canBeOmitted||(-1!==e.permittedCommands.indexOf("*")||-1!==e.permittedCommands.indexOf(t)))},this.askAnswers=["100%",t.t("qCommands[.]of course"),t.t("qCommands[.]yes"),t.t("qCommands[.]maybe"),t.t("qCommands[.]impossible"),t.t("qCommands[.]no way"),t.t("qCommands[.]don't think so"),t.t("qCommands[.]no"),"50/50",t.t("qCommands[.]cirno is busy"),t.t("qCommands[.]I regret to inform you")];var o={default:"",caucas:"",quotes:""};$.getJSON("https://dl.dropboxusercontent.com/s/8it8p0jsxzbz460/caucas.txt",function(t){o.caucas=t}),$.getJSON("https://dl.dropboxusercontent.com/s/xaflixguz2jz3eb/status.txt",function(t){o.default=t}),$.getJSON(`${DB}1fjgydrp4wkhhp2/quotes.txt`,function(t){o.quotes=t}),this.randomQuotes=[],this.dices=["https://i.imgur.com/GvBChl2.png","https://i.imgur.com/KqvO605.png","https://i.imgur.com/ynHLA6n.png","https://i.imgur.com/CQetKN5.png","https://i.imgur.com/MFXv2aS.png","https://i.imgur.com/ohez1Nf.png"];var i=new Audio(DB+"sqwxirtfao71hct/dice_sound.mp3");i.volume=.6,this.movieActors=[],this.ytVideoComments=[],this.maxYtComments=500,this.requestComments=((t,e)=>{const o=void 0===e?"":`&pageToken=${e}`;$.ajax({dataType:"jsonp",type:"GET",url:`https://www.googleapis.com/youtube/v3/commentThreads\n\t\t\t\t\t\t?key=AIzaSyACCt5AYwvKSBbcmmA8_mABpf3Q9LNODZ0\n\t\t\t\t\t\t&textFormat=plainText\n\t\t\t\t\t\t&part=snippet\n\t\t\t\t\t\t&maxResults=100\n\t\t\t\t\t\t&videoId=${t}\n\t\t\t\t\t\t${o}\n\t\t\t\t\t`,success:e=>{const o=e.nextPageToken;if(!(n.ytVideoComments.length>n.maxYtComments)){for(let t=0;t<e.items.length;t++){const o=e.items[t];n.ytVideoComments.push(o)}void 0!==o&&n.requestComments(t,o)}},error:t=>{console.log("Error occured while fetching comments from YouTube video"),console.log(t),n.ytVideoComments=[],n.ytVideoComments[0]="Не удалось загрузить комментарии."}})}),socket.on("changeMedia",t=>{"yt"!=t.type?(n.ytVideoComments=[],n.ytVideoComments[0]="Видео не из ютуба."):(n.ytVideoComments=[],n.requestComments(t.id,void 0))}),window.cytubeEnhanced.getModule("additionalChatCommands").done(t=>{"yt"==PLAYER.mediaType?(t.ytVideoComments=[],t.requestComments(PLAYER.yt.getVideoData().video_id,void 0)):(t.ytVideoComments=[],t.ytVideoComments[0]="Видео не из ютуба.")}),this.wikiRes=void 0,this.pic=void 0,this.randomPic=void 0,String.prototype.hashCode=function(){var t,e=0;if(0===this.length)return e;for(t=0;t<this.length;t++)e=(e<<5)-e+this.charCodeAt(t),e|=0;return e},void 0===this.isSketchfabLoaded&&($.getScript("https://static.sketchfab.com/api/sketchfab-viewer-1.10.4.js"),this.isSketchfabLoaded=!0),this.sketchfab=void 0,this.commandsList={"!pick":{description:t.t("chatCommands[.]random option from the list of options (!pick option1, option2, option3)"),value:function(e){var n=_.trim(e.replace("!pick",""));if(""===n)return t.t("chatCommands[.]Use !pick variant1, variant2");var o=n.split(",");return _.trim(o[Math.floor(Math.random()*o.length)])},canBeOmitted:!0},"!time":{description:t.t("chatCommands[.]show the current time"),value:function(){var e=(new Date).getHours();e<10&&(e="0"+e);var n=(new Date).getMinutes();return n<10&&(n="0"+n),t.t("chatCommands[.]current time")+": "+e+":"+n},canBeOmitted:!0},"!ask":{description:t.t("chatCommands[.]asking a question with yes/no/... type answer (e.g. <i>!ask Will i be rich?</i>)"),value:function(){return n.askAnswers[Math.floor(Math.random()*n.askAnswers.length)]},canBeOmitted:!0},"!who":{description:t.t("chatCommands[.]Выбрать случайного пользователя"),value:function(t){let e=document.querySelectorAll(".userlist_item div strong");return e[Math.floor(Math.random()*Math.floor(e.length))].innerText},canBeOmitted:!0},"!roll":{description:t.t("chatCommands[.]random number between 0 and 99"),value:function(){var t=Math.floor(100*Math.random());return t<100?t="0"+t:t<10&&(t="00"+t),t},canBeOmitted:!0},"!sm":{description:t.t("chatCommands[.]show the random emote"),value:function(){var t=window.CHANNEL.emotes.map(function(t){return t.name});return t[Math.floor(Math.random()*t.length)]+" "},canBeOmitted:!0},"!ауф":{description:t.t("chatCommands[.]show the random quote"),value:function(e){return 0===o.quotes.length?t.t("chatCommands[.]there aren't any quotes."):o.quotes[Math.floor(Math.random()*(o.quotes.length-1))]},canBeOmitted:!0},"кто я":{description:t.t("chatCommands[.]Ответить кто вы."),value:function(e){return 0===o.default.length?t.t("chatCommands[.]Вы никто."):"Вы: "+o.default[Math.floor(Math.random()*(o.default.length-1))]},canBeOmitted:!0},"жи есть":{description:t.t("chatCommands[.]Ответить кто вы на кавказе."),value:function(e){return 0===o.caucas.length?t.t("chatCommands[.]Вы не кавказец."):"Вы: "+o.caucas[Math.floor(Math.random()*(o.caucas.length-1))]},canBeOmitted:!0},"!dice":{description:t.t("chatCommands[.]throw a dice"),value:function(){return i.play(),n.dices[Math.floor(6*Math.random())]+" "+n.dices[Math.floor(6*Math.random())]},canBeOmitted:!0},"!actor":{description:t.t("chatCommands[.]Зароллить рандомного актера из фильма"),value:function(t){let e=n.movieActors[Math.floor(Math.random()*(n.movieActors.length-1))];return`Вы: ${e.actorName} (${e.actorDescription}) ${e.actorPhoto}`},canBeOmitted:!0},"!test":{description:t.t("chatCommands[.]show the random quote"),value:function(t){return $("img").attr("src","https://i.imgur.com/vLgg3Gn.png"),$("button").attr("style","background: url(https://i.imgur.com/vLgg3Gn.png) no-repeat;"),$("span").attr("style","background: url(https://i.imgur.com/vLgg3Gn.png) no-repeat;"),"https://i.imgur.com/vLgg3Gn.png"},canBeOmitted:!0},"!comment":{description:"Random comment from the currently playing YouTube video",value:function(t){if("yt"==PLAYER.mediaType){const e=n.ytVideoComments[Math.floor(Math.random()*(n.ytVideoComments.length-1))];console.log("commentItem"),console.log(e),t=e.snippet.topLevelComment.snippet.textDisplay}else t="Видео не из ютуба.";return void 0===n.ytVideoComments&&(t="Пусто."),t},canBeOmitted:!0},"!temp":{description:"Current temperature in your region",value:function(t){function e(t){const e=t.coords.latitude,o=t.coords.longitude;$.ajax({type:"GET",url:`https://api.openweathermap.org/data/2.5/onecall?lat=${e}&lon=${o}&appid=b9f80f1adf78ac3e025393df85a77485&units=metric`,success:function(t){n.currentTemp=t.current.temp},error:function(){alert("Произошла ошибка при получении данных о погоде.")}})}function o(){alert("Неозможно получить ваше местоположение.")}function i(t){if("granted"==t.state)throw navigator.geolocation?navigator.geolocation.getCurrentPosition(e,o):alert("Геолокация не поддерживается вашем браузером."),"Загрузка погоды...";"prompt"==t.state?(navigator.geolocation?navigator.geolocation.getCurrentPosition(e,o):alert("Геолокация не поддерживается вашем браузером."),alert("Предоставьте данные геолокации.")):"denied"==t.state&&alert("Геолокация отключена.")}if(navigator.permissions.query({name:"geolocation"}).then(function(t){i(t),t.onchange=function(){i(t)}}),void 0===n.currentTemp)throw"Не удалось получить данные о погоде. Попробуйте ещё раз.";return"Температура в моём регионе: "+n.currentTemp+" °C"},canBeOmitted:!0},"!wiki":{description:"Short snippet from the wikipepdia about the subject",value:function(t){let e=_.trim(t.replace("!wiki",""));if(""===e)return"Укажите слово для поиска.";const o=e,i=/[а-я]/i.test(o)?"ru":"en";if(void 0===n.wikiRes)throw $.ajax({url:`https://${i}.wikipedia.org/w/api.php`,data:{origin:"*",action:"query",format:"json",prop:"extracts",indexpageids:1,redirects:1,utf8:1,exchars:230,exlimit:1,exintro:1,explaintext:1,titles:o},dataType:"jsonp",success:t=>{const e=t.query.pageids[0].toString();let o;console.log(e),""===(o="-1"===e?"Не удалось найти ответ.":t.query.pages[e].extract)&&(o="Не удалось найти ответ."),n.wikiRes=o;const i=jQuery.Event("keydown");i.keyCode=$.ui.keyCode.ENTER,$("#chatline").trigger(i)},error:()=>{n.wikiRes="Не удалось найти ответ.";const t=jQuery.Event("keydown");t.keyCode=$.ui.keyCode.ENTER,$("#chatline").trigger(t)},timeout:1e3}),"Waiting for the wikipedia response";{const t=n.wikiRes;return n.wikiRes=void 0,t}},canBeOmitted:!0},"!picwiki":{description:"Thumbnail from the wikipedia article",value:function(t){let e=_.trim(t.replace("!picwiki",""));if(""===e)return"Укажите слово для поиска.";const o=e,i=/[а-я]/i.test(o)?"ru":"en";if(void 0===n.wikiRes)throw $.ajax({url:`https://${i}.wikipedia.org/w/api.php`,data:{origin:"*",action:"query",format:"json",prop:"pageimages",indexpageids:1,redirects:1,utf8:1,piprop:"original",titles:o},dataType:"jsonp",success:t=>{const e=t.query.pageids[0].toString();let o;console.log(e),""===(o="-1"===e?"Не удалось найти картинку.":t.query.pages[e].original.source)&&(o="Не удалось найти картинку."),console.log(o),n.wikiRes=o;const i=jQuery.Event("keydown");i.keyCode=$.ui.keyCode.ENTER,$("#chatline").trigger(i)},error:()=>{n.wikiRes="Не удалось найти картинку.";const t=jQuery.Event("keydown");t.keyCode=$.ui.keyCode.ENTER,$("#chatline").trigger(t)},timeout:1e3}),"Waiting for the wikipedia picture response";{const t=n.wikiRes;return n.wikiRes=void 0,t}},canBeOmitted:!0},"!joke":{description:"Get random joke from the VK community wall",value:function(t){if(void 0===n.joke)throw $.ajax({url:"https://api.vk.com/method/wall.get",data:{v:"5.131",access_token:atob("MTkzOWU0ZWIxOTM5ZTRlYjE5MzllNGViNjcxOTQxNzk2ZjExOTM5MTkzOWU0ZWI3OWM4OTg1NGIyODIyYTEzYmJiY2IzZjU"),domain:"shortikicom",count:1,offset:69999*Math.random()+1},dataType:"jsonp",success:t=>{const e=t.response.items[0].text;""===e&&(e="Шутки кончились."),n.joke=e;const o=jQuery.Event("keydown");o.keyCode=$.ui.keyCode.ENTER,$("#chatline").trigger(o)},error:()=>{n.joke="Не удалось найти шутку.";const t=jQuery.Event("keydown");t.keyCode=$.ui.keyCode.ENTER,$("#chatline").trigger(t)},timeout:1e3}),"Waiting for the VK response";{const t=n.joke;return n.joke=void 0,t}},canBeOmitted:!0},"!ts":{description:"Show random thread shot",value:function(t){if(void 0===n.ts){const t=Math.floor(2*Math.random())?"threadshot":"thewebmthread";throw $.ajax({url:"https://api.vk.com/method/wall.get",data:{v:"5.131",access_token:atob("MTkzOWU0ZWIxOTM5ZTRlYjE5MzllNGViNjcxOTQxNzk2ZjExOTM5MTkzOWU0ZWI3OWM4OTg1NGIyODIyYTEzYmJiY2IzZjU"),domain:t,count:1,offset:Math.floor(9999*Math.random()+1)},dataType:"jsonp",success:t=>{let e="";""===(e=t.response.items[0].attachments[0].photo.sizes.slice(-1)[0].url)&&(e="Тредшот не найден."),n.ts=e;const o=jQuery.Event("keydown");o.keyCode=$.ui.keyCode.ENTER,$("#chatline").trigger(o)},error:()=>{n.ts="Не удалось найти тредшот.";const t=jQuery.Event("keydown");t.keyCode=$.ui.keyCode.ENTER,$("#chatline").trigger(t)},timeout:1e3}),"Waiting for the VK threadshot response"}{const t=n.ts;return n.ts=void 0,t}},canBeOmitted:!0},"!gif":{description:"Random gif from tenor",value:function(t){let e=_.trim(t.replace("!gif",""));if(""===e)return"Укажите слово для поиска.";if(void 0===n.gif)throw $.ajax({url:"https://g.tenor.com/v1/search",data:{key:atob("M1pCM0pSTzkwTVNI"),q:e,media_filter:"minimal",ar_range:"all",limit:50},dataType:"jsonp",success:t=>{console.log(t);const e=t.results,o=e.length;if(o<1)n.gif="Не удалось найти гифку.";else{const t=e[Math.floor(Math.random()*(o-1))];n.gif=t.media[0].gif.url}const i=jQuery.Event("keydown");i.keyCode=$.ui.keyCode.ENTER,$("#chatline").trigger(i)},error:()=>{n.gif="Не удалось найти картинку.";const t=jQuery.Event("keydown");t.keyCode=$.ui.keyCode.ENTER,$("#chatline").trigger(t)},timeout:2e3}),"Waiting for tenor gif response";{const t=n.gif;return n.gif=void 0,t}},canBeOmitted:!0},"!kak kin4":{description:"Short movie review",value:function(t){if(void 0===n.shortReview){const t=$(".queue_active a").text(),e=/.*?https?:\/\/www\.kinopoisk\.ru\/film\/(\d+)\/?/g;if(!e.test(t))return"Дождитесь начала фильма.";const o={type:"GET",dataType:"application/json",url:"https://kinopoiskapiunofficial.tech/api/v1/reviews",data:{filmId:t.replace(e,"$1"),page:1},beforeSend:function(t){t.setRequestHeader("X-API-KEY","4c00a7fb-8f7f-4a27-9073-70e7b1af0d3d")},timeout:3e3};throw o.complete=(t=>{const e=JSON.parse(t.responseText).pagesCount;throw console.log("Pages count: "+e),o.data.page=Math.floor(Math.random()*(e-1)),0==o.data.page&&(o.data.page=1),console.log("settings.data.page: "+o.data.page),o.complete=(t=>{const e=JSON.parse(t.responseText).reviews;if(console.log("reviews: "+e),void 0===e)n.shortReview="Короткие рецензии отсутствуют";else{const t=e.length;if(e.length<1)n.shortReview="Короткие рецензии отсутствуют";else{console.log("Reviews amount: "+t);let o=[];e.map(t=>{null!=t.reviewTitle&&o.push(t.reviewTitle)}),console.log(o);const i=Math.floor(Math.random()*(o.length-1)),r=o[i];console.log("randomReview: "+r),n.shortReview=r}}const o=jQuery.Event("keydown");o.keyCode=$.ui.keyCode.ENTER,$("#chatline").trigger(o)}),$.ajax(o),"Waiting for review response"}),console.log(o),$.ajax(o),"Waiting for review pages response"}{const t=n.shortReview;return n.shortReview=void 0,t}},canBeOmitted:!0},"!find wife":{description:"Find a christian or an anime wife",value:function(t){let e=26044370,o=_.trim(t.replace("!find wife","")).toLowerCase();if(console.log("groupName: "+o),"аниме"!==o&&"anime"!==o||(e=78855837),void 0===n.findWife)throw $.ajax({url:"https://api.vk.com/method/groups.getMembers",data:{v:"5.131",access_token:atob("MTkzOWU0ZWIxOTM5ZTRlYjE5MzllNGViNjcxOTQxNzk2ZjExOTM5MTkzOWU0ZWI3OWM4OTg1NGIyODIyYTEzYmJiY2IzZjU"),group_id:e,count:1e3,fields:"sex, photo_max_orig"},dataType:"jsonp",success:t=>{let e="";console.log(t);const o=[];t.response.items.map(t=>{1===t.sex&&void 0===t.deactivated&&"https://vk.com/images/camera_400.png"!==t.photo_max_orig&&o.push(t)}),console.log(o);const i=Math.floor(Math.random()*(o.length-1+1))+1;console.log("Random wife number: "+i),e=`${o[i].photo_max_orig} *${o[i].first_name} ${o[i].last_name}*  ID: https://vk.com/id${o[i].id}`,n.findWife=e;const r=jQuery.Event("keydown");r.keyCode=$.ui.keyCode.ENTER,$("#chatline").trigger(r)},error:()=>{n.findWife="Не удалось найти жену.";const t=jQuery.Event("keydown");t.keyCode=$.ui.keyCode.ENTER,$("#chatline").trigger(t)},timeout:2500}),"Waiting for the VK wife response";{const t=n.findWife;return n.findWife=void 0,t}},canBeOmitted:!0},"!moder":{description:"Request moder",value:function(t){return $.ajax({url:"https://trusting-curvy-hyena.glitch.me/getModer",type:"POST",dataType:"json",success:function(t){console.log(t)},error:function(t){console.log(t)}}),"Модератор скоро придёт."},canBeOmitted:!0},"!pic":{description:"Random image from imgur",value:function(t){let e=_.trim(t.replace("!pic",""));if(""===e)return"Укажите слово для поиска.";if(void 0===n.pic)throw $.ajax({url:"https://api.imgur.com/3/gallery/search/top/all/0/",method:"GET",headers:{Authorization:"Client-ID 711a7fc76bd63f3"},contentType:!1,data:{q:e},success:t=>{let e;const o=t.data;if(0===o.length)e="Не удалось найти картинку.";else{const t=o[Math.floor(Math.random()*o.length)];let n="";e=n=void 0===t.images?t.link:t.images[0].link}n.pic=e;const i=jQuery.Event("keydown");i.keyCode=$.ui.keyCode.ENTER,$("#chatline").trigger(i)},error:t=>{n.pic="Не удалось найти ответ.";const e=jQuery.Event("keydown");e.keyCode=$.ui.keyCode.ENTER,$("#chatline").trigger(e),console.log(t)}}),"Waiting for the imgur response";{const t=n.pic;return n.pic=void 0,t}},canBeOmitted:!0},"!randompic":{description:"Random image from imgur",value:function(t){if(void 0===n.randomPic){const t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let e,o;const i=()=>{let n="https://i.imgur.com/";for(e=0;e<5;e++)o=Math.floor(Math.random()*t.length),n+=t.charAt(o);return n+=".jpg"},r=t=>{$.ajax({url:t,success:e=>{if(-2006913416!==e.hashCode()){console.log("Success link!"),console.log(t),n.randomPic=t;const e=jQuery.Event("keydown");e.keyCode=$.ui.keyCode.ENTER,$("#chatline").trigger(e)}else console.log("Error link!"),console.log(t),r(i())},error:t=>{n.randomPic="Не удалось найти картинку. =(";const e=jQuery.Event("keydown");e.keyCode=$.ui.keyCode.ENTER,$("#chatline").trigger(e)}})};throw r(i()),"Waiting for the imgur response"}{const t=n.randomPic;return n.randomPic=void 0,t}},canBeOmitted:!0},"!3d":{description:"Get random model from sketchfab by query",value:function(t){console.log(`msg: ${t}`);let e=_.trim(t.replace("!3d",""));if(""===e)return"Укажите слово для поиска.";if(void 0===n.sketchfab)throw $.ajax({url:"https://api.sketchfab.com/v3/search",method:"GET",headers:{Authorization:"Token f403eed2a4ea4068af4c41ae5de25b95"},data:{type:"models",q:e},success:t=>{let e;const o=t.results;if(console.log(`sketchfab results: ${o.length}`),0===o.length)e="Не удалось найти 3D модель.";else{const t=o[Math.floor(Math.random()*o.length)];console.log("randomData"),console.log(t);t.uid,t.embedUrl;e=t.thumbnails.images[0].url}n.sketchfab=e;const i=jQuery.Event("keydown");i.keyCode=$.ui.keyCode.ENTER,$("#chatline").trigger(i)},error:t=>{n.sketchfab="Не удалось найти ответ.";const e=jQuery.Event("keydown");e.keyCode=$.ui.keyCode.ENTER,$("#chatline").trigger(e),console.log(t)}}),"Waiting for the sketchfab response";{const t=n.sketchfab;return n.sketchfab=void 0,t}},canBeOmitted:!0}},this.IS_COMMAND=!1,this.prepareMessage=function(t){for(var e in n.IS_COMMAND=!1,n.commandsList)if(this.commandsList.hasOwnProperty(e)&&0===_.toLower(_.trim(t)).indexOf(e)){!n.isCommandPermitted(e)||n.commandsList[e].isAvailable&&!n.commandsList[e].isAvailable()||(n.IS_COMMAND=!0,t=n.commandsList[e].value(t));break}return t},this.sendUserChatMessage=function(t){if(13!==t.keyCode){if(9===t.keyCode){try{window.chatTabComplete()}catch(t){console.error(t)}return t.preventDefault(),!1}return 38===t.keyCode?(window.CHATHISTIDX===window.CHATHIST.length&&window.CHATHIST.push(n.$chatline.val()),window.CHATHISTIDX>0&&(window.CHATHISTIDX--,n.$chatline.val(window.CHATHIST[window.CHATHISTIDX])),t.preventDefault(),!1):40===t.keyCode?(window.CHATHISTIDX<window.CHATHIST.length-1&&(window.CHATHISTIDX++,n.$chatline.val(window.CHATHIST[window.CHATHISTIDX])),t.preventDefault(),!1):void 0}if(!window.CHATTHROTTLE){var e=n.$chatline.val().trim();if(""!==e){var o={};window.USEROPTS.adminhat&&window.CLIENT.rank>=255?e="/a "+e:window.USEROPTS.modhat&&window.CLIENT.rank>=window.Rank.Moderator&&(o.modflair=window.CLIENT.rank),window.CLIENT.rank>=2&&0===e.indexOf("/m ")&&(o.modflair=window.CLIENT.rank,e=e.substring(3));var i=this.prepareMessage(e);n.IS_COMMAND?(window.socket.emit("chatMsg",{msg:e,meta:o}),window.socket.emit("chatMsg",{msg:"Смотрящий: "+i}),n.IS_COMMAND=!1):(1!==UI_UsernameColors||null===usernameColor||n.IS_COMMAND||0===e.indexOf("/")||(e=usernameColor+" "+e),window.socket.emit("chatMsg",{msg:e,meta:o})),window.CHATHIST.push(n.$chatline.val()),window.CHATHISTIDX=window.CHATHIST.length,n.$chatline.val("")}}},n.$chatline.off().on("keydown",function(t){n.sendUserChatMessage(t)}),$("#chatbtn").off().on("click",function(t){n.sendUserChatMessage(t)})})},function(t,e,n){n(13),window.cytubeEnhanced.addModule("bbCodesHelper",function(t,e){"use strict";var n,o=this;e=$.extend({},{templateButtons:["b","i","sp","code","s"],templateButtonsAnimationSpeed:150},e),0===$("#chat-controls").length&&$('<div id="chat-controls" class="btn-group">').appendTo("#chatwrap"),this.handleMarkdownHelperBtnClick=function(t,n){t.hasClass("btn-default")?(t.removeClass("btn-default"),t.addClass("btn-success"),n.show(),n.children().animate({left:0},e.templateButtonsAnimationSpeed)):(t.removeClass("btn-success"),t.addClass("btn-default"),n.children().animate({left:-n.width()},e.templateButtonsAnimationSpeed,function(){n.hide()}))},this.$markdownHelperBtn=$('<button id="markdown-helper-btn" type="button" class="btn btn-sm btn-default" title="'+t.t("markdown[.]Markdown helper")+'">').html('<i class="glyphicon glyphicon-font"></i>').on("click",function(){o.handleMarkdownHelperBtnClick($(this),o.$markdownTemplatesWrapper),t.storage.toggle("bb-codes-opened")}),0!==$("#chat-help-btn").length?this.$markdownHelperBtn.insertBefore("#chat-help-btn"):this.$markdownHelperBtn.appendTo("#chat-controls"),this.$markdownTemplatesWrapper=$('<div class="btn-group markdown-helper-templates-wrapper">').insertAfter(this.$markdownHelperBtn).hide(),t.storage.get("bb-codes-opened")&&this.handleMarkdownHelperBtnClick(this.$markdownHelperBtn,this.$markdownTemplatesWrapper),this.markdownTemplates={b:{text:"<b>B</b>",title:t.t("markdown[.]Bold text")},i:{text:"<i>I</i>",title:t.t("markdown[.]Cursive text")},sp:{text:"SP",title:t.t("markdown[.]Spoiler")},code:{text:"<code>CODE</code>",title:t.t("markdown[.]Monospace")},s:{text:"<s>S</s>",title:t.t("markdown[.]Strike")}};for(var i=0,r=e.templateButtons.length;i<r;i++)n=e.templateButtons[i],$('<button type="button" class="btn btn-sm btn-default" title="'+this.markdownTemplates[n].title+'">').html(this.markdownTemplates[n].text).data("template",n).appendTo(this.$markdownTemplatesWrapper);this.handleMarkdown=function(t){this.markdownTemplates.hasOwnProperty(t)&&$("#chatline").selection("insert",{text:"["+t+"]",mode:"before"}).selection("insert",{text:"[/"+t+"]",mode:"after"})},this.$markdownTemplatesWrapper.on("click","button",function(){return o.handleMarkdown($(this).data("template")),!1})})},function(t,e){var n,o,i,r,a;n=jQuery,o=window,i=window.document,r=function(t){var e={text:"",start:0,end:0};if(!t.value)return e;try{if(o.getSelection)e.start=t.selectionStart,e.end=t.selectionEnd,e.text=t.value.slice(e.start,e.end);else if(i.selection){t.focus();var n=i.selection.createRange(),r=i.body.createTextRange();e.text=n.text;try{r.moveToElementText(t),r.setEndPoint("StartToStart",n)}catch(e){(r=t.createTextRange()).setEndPoint("StartToStart",n)}e.start=t.value.length-r.text.length,e.end=e.start+n.text.length}}catch(t){}return e},a={getPos:function(t){var e=r(t);return{start:e.start,end:e.end}},setPos:function(t,e,n){"start"===(n=this._caretMode(n))?e.end=e.start:"end"===n&&(e.start=e.end),t.focus();try{if(t.createTextRange){var i=t.createTextRange();o.navigator.userAgent.toLowerCase().indexOf("msie")>=0&&(e.start=t.value.substr(0,e.start).replace(/\r/g,"").length,e.end=t.value.substr(0,e.end).replace(/\r/g,"").length),i.collapse(!0),i.moveStart("character",e.start),i.moveEnd("character",e.end-e.start),i.select()}else t.setSelectionRange&&t.setSelectionRange(e.start,e.end)}catch(t){}},getText:function(t){return r(t).text},_caretMode:function(t){switch(!1===(t=t||"keep")&&(t="end"),t){case"keep":case"start":case"end":break;default:t="keep"}return t},replace:function(t,e,o){var i=r(t),a=t.value,s=n(t).scrollTop(),l={start:i.start,end:i.start+e.length};t.value=a.substr(0,i.start)+e+a.substr(i.end),n(t).scrollTop(s),this.setPos(t,l,o)},insertBefore:function(t,e,o){var i=r(t),a=t.value,s=n(t).scrollTop(),l={start:i.start+e.length,end:i.end+e.length};t.value=a.substr(0,i.start)+e+a.substr(i.start),n(t).scrollTop(s),this.setPos(t,l,o)},insertAfter:function(t,e,o){var i=r(t),a=t.value,s=n(t).scrollTop(),l={start:i.start,end:i.end};t.value=a.substr(0,i.end)+e+a.substr(i.end),n(t).scrollTop(s),this.setPos(t,l,o)}},n.extend({selection:function(t){var e="text"===(t||"text").toLowerCase();try{if(o.getSelection){if(e)return o.getSelection().toString();var r,a=o.getSelection();return a.getRangeAt?r=a.getRangeAt(0):((r=i.createRange()).setStart(a.anchorNode,a.anchorOffset),r.setEnd(a.focusNode,a.focusOffset)),n("<div></div>").append(r.cloneContents()).html()}if(i.selection)return e?i.selection.createRange().text:i.selection.createRange().htmlText}catch(t){}return""}}),n.fn.extend({selection:function(t,e){switch(e=e||{},t){case"getPos":return a.getPos(this[0]);case"setPos":return this.each(function(){a.setPos(this,e)});case"replace":return this.each(function(){a.replace(this,e.text,e.caret)});case"insert":return this.each(function(){"before"===e.mode?a.insertBefore(this,e.text,e.caret):a.insertAfter(this,e.text,e.caret)});case"get":default:return a.getText(this[0])}return this}})},function(t,e){window.cytubeEnhanced.addModule("chatAvatars",function(t,e){"use strict";var n=this,o=t.Settings.getTab("general",t.t("general[.]General"),100),i=t.Settings.storage,r=t.storage;e=$.extend({},{avatarClass:"chat-avatar",smallAvatarClass:"chat-avatar_small",bigAvatarClass:"chat-avatar_big"},e);var a,s;this.scheme={"avatars-mode":{title:t.t("chatAvatars[.]Chat avatars"),default:"",options:[{value:"",title:t.t("chatAvatars[.]Disabled")},{value:"small",title:t.t("chatAvatars[.]Small")},{value:"big",title:t.t("chatAvatars[.]Big")}]}},r.setDefault("avatars.cache",[]),this.cacheAvatar=function(t,e){var n=r.get("avatars.cache");n.length>=50&&(n=n.slice(0,49)),n.unshift({username:t,avatar:e}),r.set("avatars.cache",n)},this.getAvatarFromCache=function(t){var e=_.findLast(r.get("avatars.cache"),function(e){return e.username==t});return e=e?e.avatar:null},this.getAvatarFromUserlist=function(t){return window.findUserlistItem(t)&&window.findUserlistItem(t).data("profile").image?window.findUserlistItem(t).data("profile").image:null},this.applyAvatar=function(t,o,r){o=o||t.text().replace(/^\s+|[:]?\s+$/g,""),r=r||n.getAvatarFromUserlist(o);var a=n.getAvatarFromCache(o),s=t.parent();if((a||r)&&(a||n.cacheAvatar(o,r),0===s.find("."+e.avatarClass).length)){var l=$("<img>").attr("src",r||a).addClass(e.avatarClass+" "+("big"==i.get("avatars.avatars-mode")?e.bigAvatarClass:e.smallAvatarClass)).prependTo(s);"big"==i.get("avatars.avatars-mode")&&($(this).css("display","none"),l.attr("title",o))}};var l,c=100;for(var u in this.scheme){if(a=this.scheme[u],i.setDefault("avatars."+u,a.default),i.get("avatars."+u))for(s in a.options)a.options[s].selected=i.get("avatars."+u)==a.options[s].value;o.addControl("select","horizontal",a.title,u,a.options,null,c),c+=100}t.Settings.onSave(function(e){for(var o in n.scheme)e.set("avatars."+o,$("#"+t.prefix+o).val());e.isDirty("avatars.avatars-mode")&&t.Settings.requestPageReload()}),i.get("avatars.avatars-mode")&&(window.formatChatMessage=(l=window.formatChatMessage,function(t,e){var o=l(t,e);return n.applyAvatar(o.find(".username"),t.username),o}),$(".username").each(function(){n.applyAvatar($(this))}),window.socket.on("addUser",function(t){t.profile&&t.profile.image&&t.name&&$('.username:contains("'+t.name+':")').each(function(){n.applyAvatar($(this),t.name,t.profile.image)})}))})},function(t,e){window.cytubeEnhanced.addModule("chatCommandsHelp",function(t,e){"use strict";var n=this,o={commands:{"/me":t.t("chatCommands[.]%username% action (e.g: <i>/me is dancing</i>)"),"/sp":t.t("chatCommands[.]spoiler"),"/afk":t.t('chatCommands[.]sets the "AFK" status')}};e=$.extend({},o,e),0===$("#chat-controls").length&&$('<div id="chat-controls" class="btn-group">').appendTo("#chatwrap"),this.commands={},this.commands[t.t("Standard commands")]=e.commands,t.isModulePermitted("additionalChatCommands")&&t.getModule("additionalChatCommands").done(function(e){var o={};for(var i in e.commandsList)e.commandsList.hasOwnProperty(i)&&e.isCommandPermitted(i)&&(!e.commandsList[i].isAvailable||e.commandsList[i].isAvailable())&&(o[i]=e.commandsList[i].description||"");n.commands[t.t("Extra commands")]=o}),this.handleChatHelpBtn=function(e){var n=$('<h3 class="modal-title">').text(t.t("The list of chat commands")),o=$("<div>");for(var i in e)if(e.hasOwnProperty(i)){$("<h3>").html(i).appendTo(o);var r=$("<ul>");for(var a in e[i])e[i].hasOwnProperty(a)&&$("<li>").html("<code>"+a+"</code> - "+e[i][a]+".").appendTo(r);r.appendTo(o)}t.UI.createModalWindow("chat-commands-help",n,o)},this.$chatHelpBtn=$('<button id="chat-help-btn" class="btn btn-sm btn-default">').text(t.t("Commands list")).appendTo("#leftcontrols").on("click",function(){n.handleChatHelpBtn(n.commands)})})},function(t,e){window.cytubeEnhanced.addModule("chatControls",function(t,e){"use strict";var n=this;e=$.extend({},{afkButton:!0,clearChatButton:!0},e),0==$("#afk-btn").length&&(this.handleAfkBtn=function(){window.socket.emit("chatMsg",{msg:"/afk"})},this.$afkBtn=$('<span id="afk-btn" class="label label-default pull-right pointer glyphicon glyphicon-time">').text(" ").attr("title","АФК").appendTo("#chatheader").on("click",function(){n.handleAfkBtn()}),this.handleAfk=function(t){t.name===window.CLIENT.name&&(t.afk?(n.$afkBtn.removeClass("label-default"),n.$afkBtn.addClass("label-success")):(n.$afkBtn.addClass("label-default"),n.$afkBtn.removeClass("label-success")))},e.afkButton?window.socket.on("setAFK",function(t){n.handleAfk(t)}):this.$afkBtn.hide()),0==$("#clear-chat-btn").length&&(this.handleClearBtn=function(){window.confirm(t.t("Are you sure, that you want to clear the chat?"))&&window.socket.emit("chatMsg",{msg:"/clear"})},this.$clearChatBtn=$('<span id="clear-chat-btn" class="label label-default pull-right pointer glyphicon glyphicon-remove">').text(" ").attr("title","Очистить чат").insertAfter(this.$afkBtn).on("click",function(){n.handleClearBtn()}),window.hasPermission("chatclear")||this.$clearChatBtn.hide(),this.handleChatClear=function(){window.hasPermission("chatclear")&&e.clearChatButton?n.$clearChatBtn.show():n.$clearChatBtn.hide()},window.socket.on("setUserRank",function(){n.handleChatClear()}))})},function(t,e){window.cytubeEnhanced.addModule("chatHistory",function(t,e){"use strict";var n=this;e=$.extend({},{itemsInHistory:75},e),t.storage.setDefault("pmHistory",[]),0==$("#pm-history-btn").length&&(window.socket.on("chatMsg",function(n){if(window.CLIENT.name&&-1!=n.msg.toLowerCase().indexOf(window.CLIENT.name.toLowerCase())){var o=t.storage.get("pmHistory");$.isArray(o)||(o=[]),o.length>=e.itemsInHistory&&(o=o.slice(0,e.itemsInHistory-1)),o.unshift({username:n.username,msg:n.msg,time:n.time}),t.storage.set("pmHistory",o)}}),this.formatHistoryMessage=function(t){var e=$('<div class="pm-history-message">'),n=new Date(t.time),o=n.getDate();o=o<10?"0"+o:o;var i=n.getMonth()+1;i=i<10?"0"+i:i;var r=n.getFullYear(),a=n.getHours();a=a<10?"0"+a:a;var s=n.getMinutes();s=s<10?"0"+s:s;var l=n.getSeconds(),c=o+"."+i+"."+r+" "+a+":"+s+":"+(l=l<10?"0"+l:l);return"[server]"!==t.username&&(e.append($('<div class="pm-history-message-time">['+c+"]</div>")),e.append($('<div class="pm-history-message-username">'+t.username+"</div>")),e.append($('<div class="pm-history-message-content">'+t.msg+"</div>"))),e},this.showChatHistory=function(){var e=t.storage.get("pmHistory");$.isArray(e)||(e=[]);var o=$('<div class="modal-header__inner">');o.append($('<h3 class="modal-title">').text(t.t("pmHistory[.]Chat history"))),o.append($('<div class="modat-header__description">').text(t.t("pmHistory[.]Your chat messages history.")));for(var i=$('<div class="pm-history-content">'),r=0,a=e.length;r<a;r++)i.append(n.formatHistoryMessage(e[r]));var s=$('<button type="button" id="pm-history-reset-btn" class="btn btn-danger" data-dismiss="modal">'+t.t("pmHistory[.]Reset history")+"</button>").on("click",function(){window.confirm(t.t("pmHistory[.]Are you sure, that you want to clear messages history?"))&&n.resetChatHistory()}),l=$('<button type="button" id="pm-history-exit-btn" class="btn btn-default" data-dismiss="modal">'+t.t("pmHistory[.]Exit")+"</button>"),c=$('<div class="pm-history-footer">');return c.append(s),c.append(l),t.UI.createModalWindow("chat-history",o,i,c)},this.$showChatHistoryBtn=$('<span id="pm-history-btn" class="label label-default pull-right pointer glyphicon glyphicon-envelope">').text(" ").attr("title","История чата").appendTo("#chatheader").on("click",function(){n.showChatHistory()}),this.resetChatHistory=function(){t.storage.set("pmHistory",t.storage.getDefault("pmHistory"))})})},function(t,e){window.cytubeEnhanced.addModule("common",function(t,e){"use strict";var n,o=this;e=$.extend({},{insertUsernameOnClick:!1},e),this.$chatline=$("#chatline"),this.$userlist=$("#userlist"),e.insertUsernameOnClick&&$("#messagebuffer").on("click",".username",function(){t.Helpers.addMessageToChatInput($(this).text(),"begin")}).on("click",".chat-avatar",function(){t.Helpers.addMessageToChatInput($(this).parent().find(".username").text(),"begin")}),$("#wrap").children(".navbar-fixed-top").removeClass("navbar-fixed-top"),setTimeout(function(){window.handleWindowResize()},3e3),setTimeout(function(){window.handleWindowResize()},1e4),window.addUserDropdown=(n=window.addUserDropdown,function(t){var e=n(t);return t.find(".user-dropdown>strong").click(function(){o.$chatline.val($(this).text()+": "+o.$chatline.val())}),e});var i=$(".user-dropdown>strong");this.addCB=function(t){$(t).click(function(){o.$chatline.val($(t).text()+": "+o.$chatline.val()).focus()})},i.each((t,e)=>{let n=$._data(e,"events");void 0===n?o.addCB(e):0==n.click.length&&o.addCB(e)}),$("#queue").sortable("option","axis","y")})},function(t,e){window.cytubeEnhanced.addModule("customCss",function(t,e){"use strict";var n=this;e=$.extend({},{aceUrl:"https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.3/ace.js"},e);var o=t.Settings.getTab("custom-css","CSS",200),i=t.parseJSON(window.getOrDefault(window.CHANNEL.name+"_config-layout",void 0),{});t.Settings.storage.setDefault("user-code.css",_.isPlainObject(i)&&_.isString(i["user-css"])?i["user-css"]:"");var r,a=$('<textarea class="'+t.prefix+'custom-editor-textarea"></textarea>').val(t.Settings.storage.get("user-code.css")).appendTo(o.$content),s=$('<div class="'+t.prefix+'custom-editor-ace" id="'+t.prefix+'css-editor"></div>').text(t.Settings.storage.get("user-code.css"));o.onShow(function(){void 0===r&&(void 0===window.ace?(t.Settings.aceIsLoading||t.Settings.aceLoadingFailed||(t.Settings.aceIsLoading=!0,$.ajax({url:e.aceUrl,dataType:"script",timeout:2e4}).done(function(){n.initializeAceEditor()}).always(function(){t.Settings.aceIsLoading=!1,t.Settings.aceLoadingFailed=!0,o.$content.toggleLoader("off")})),t.Settings.aceIsLoading&&!t.Settings.aceLoadingFailed&&o.$content.toggleLoader("on")):n.initializeAceEditor())}),this.applyUserCss=function(e){$("#"+t.prefix+"user-css").remove(),$("head").append('<style id="'+t.prefix+'user-css" type="text/css">'+e+"</style>")},this.initializeAceEditor=function(){s.text(a.val()),a.replaceWith(s),(r=window.ace.edit(t.prefix+"css-editor")).setTheme("ace/theme/tomorrow_night"),r.getSession().setMode("ace/mode/css"),r.getSession().setTabSize(4),r.getSession().setUseSoftTabs(!0),r.getSession().setUseWrapMode(!0),r.getSession().setWrapLimitRange(),r.setOptions({minLines:30,maxLines:30,autoScrollEditorIntoView:!0,highlightActiveLine:!0})},t.Settings.onSave(function(t){r?t.set("user-code.css",r.getValue()):t.set("user-code.css",a.val()),n.applyUserCss(t.get("user-code.css"))}),this.applyUserCss(t.Settings.storage.get("user-code.css"))})},function(t,e){window.cytubeEnhanced.addModule("customJs",function(t,e){"use strict";var n=this;e=$.extend({},{aceUrl:"https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.3/ace.js"},e);var o=t.Settings.getTab("custom-js","JS",300);t.Settings.storage.setDefault("user-code.js","");var i,r=$('<textarea class="'+t.prefix+'custom-editor-textarea"></textarea>').val(t.Settings.storage.get("user-code.js")).appendTo(o.$content),a=$('<div class="'+t.prefix+'custom-editor-ace" id="'+t.prefix+'js-editor"></div>').text(t.Settings.storage.get("user-code.js"));o.onShow(function(){void 0===i&&(void 0===window.ace?(t.Settings.aceIsLoading||t.Settings.aceLoadingFailed||(t.Settings.aceIsLoading=!0,$.ajax({url:e.aceUrl,dataType:"script",timeout:2e4}).done(function(){n.initializeAceEditor()}).always(function(){t.Settings.aceIsLoading=!1,t.Settings.aceLoadingFailed=!0,o.$content.toggleLoader("off")})),t.Settings.aceIsLoading&&!t.Settings.aceLoadingFailed&&o.$content.toggleLoader("on")):n.initializeAceEditor())}),this.applyUserJs=function(e){$("#"+t.prefix+"user-js").remove(),$("body").append('<script id="'+t.prefix+'user-js" type="text/javascript">'+e+"<\/script>")},this.initializeAceEditor=function(){a.text(r.val()),r.replaceWith(a),(i=window.ace.edit(t.prefix+"js-editor")).setTheme("ace/theme/tomorrow_night"),i.getSession().setMode("ace/mode/javascript"),i.getSession().setTabSize(4),i.getSession().setUseSoftTabs(!0),i.getSession().setUseWrapMode(!0),i.getSession().setWrapLimitRange(),i.setOptions({minLines:30,maxLines:30,autoScrollEditorIntoView:!0,highlightActiveLine:!0})},t.Settings.onSave(function(t){i?t.set("user-code.js",i.getValue()):t.set("user-code.js",r.val()),n.applyUserJs(t.get("user-code.js"))}),this.applyUserJs(t.Settings.storage.get("user-code.js"))})},function(t,e){window.cytubeEnhanced.addModule("extras",function(t,e){"use strict";var n=this;e=$.extend({},{enabledModules:["anime-quotes","pirate-quotes"]},e);var o=t.Settings.getTab("extras",t.t("extras[.]Extras"),400),i=$('<div class="row">').appendTo(o.$content).wrap('<div class="'+t.prefix+'extras">'),r=t.Settings.storage,a=$('<div class="'+t.prefix+'extras__info-message">').text("Сторонние модули отсутствуют.").prependTo(o.$content);r.setDefault("extras.enabled",e.enabledModules),this.enabledModules=r.get("extras.enabled")||[],this.extraModules={},this.add=function(e){a.text(t.t("extras[.]Extras for additional functionality")),n.extraModules[e.name]=e,n.extraModules[e.name].$el=n.addMarkup(e).appendTo(i),n.sort(),-1!=n.enabledModules.indexOf(e.name)&&$.getScript(n.extraModules[e.name].url+"?ac="+Date.now())},this.enable=function(t){return n.enabledModules.push(t)},this.disable=function(t){var e=n.enabledModules.indexOf(t);return-1!==e&&n.enabledModules.splice(e,1)},this.addMarkup=function(e){var o=$('<div class="'+t.prefix+'extras__item">');o.data("name",e.name),e.authorUrl=_.trim(e.authorUrl);e.authorUrl?$('<a class="'+t.prefix+"extras__item__title "+t.prefix+'extras__item__title_link" target="_blank">').attr("href",e.authorUrl).text(e.title).appendTo(o):$('<div class="'+t.prefix+"extras__item__title "+t.prefix+'extras__item__title_text">').text(e.title).appendTo(o),$('<div class="'+t.prefix+'extras__item__description">').text(e.description||"Нет описания").appendTo(o);var i=$('<div class="'+t.prefix+'extras__item__button btn btn-xs">').appendTo(o).data("enabled",-1!=n.enabledModules.indexOf(e.name)).on("click",function(){$(this).data("enabled")?($(this).data("enabled",!1),n.disable(e.name),$(this).removeClass("btn-danger").addClass("btn-success").text("Включить")):($(this).data("enabled",!0),n.enable(e.name),$(this).removeClass("btn-success").addClass("btn-danger").text("Выключить"))});return-1!=n.enabledModules.indexOf(e.name)?i.addClass("btn-danger").text("Выключить"):i.addClass("btn-success").text("Включить"),o=$('<div class="col-md-6">').append(o)},this.sort=function(){var t=[];for(var e in n.extraModules)t.push(n.extraModules[e]);for(var o=0,r=(t=t.sort(function(t,e){var o=+(-1!=n.enabledModules.indexOf(t.name)),i=+(-1!=n.enabledModules.indexOf(e.name));return o<i?1:o>i?-1:t.title.toLowerCase()>e.title.toLowerCase()?1:t.title.toLowerCase()<e.title.toLowerCase()?-1:0})).length;o<r;o++)t[o].$el.detach().appendTo(i)},t.Settings.onSave(function(e){e.set("extras.enabled",n.enabledModules),e.isDirty("extras.enabled")&&t.Settings.requestPageReload()})})},function(t,e){window.cytubeEnhanced.addModule("favouritePictures",function(t){"use strict";var e=this,n=t.parseJSON(window.localStorage.getItem("favouritePictures"),[]);t.storage.setDefault("favouritePictures",_.isArray(n)?n:[]),this.$toggleFavouritePicturesPanelBtn=$('<span id="favourite-pictures-btn" title="'+t.t("favPics[.]Show your favorite images")+'" style="padding: 5px 0px;cursor: pointer">').html('<img src="https://i.imgur.com/w0wVICg.png" style="max-height: 40px;" />'),0==$("#favourite-pictures-btn").length&&(this.$toggleFavouritePicturesPanelBtn.insertAfter("#emotelistbtn"),this.$favpicsrow=$('<div class="row" id="favpicsrow">').insertAfter("#controlsrow"),this.$favouritePicturesPanel=$('<div id="favourite-pictures-panel">').prependTo(this.$favpicsrow).hide(),this.$favouritePicturesPanelRow=$('<div class="favourite-pictures-panel-row">').appendTo(this.$favouritePicturesPanel),this.$favouritePicturesTrash=$('<div id="pictures-trash" title="'+t.t("favPics[.]Drop the picture here to remove it")+'">').append('<i class="pictures-trash-icon glyphicon glyphicon-trash">').appendTo(this.$favouritePicturesPanelRow),this.$favouritePicturesBodyPanel=$('<div id="pictures-body-panel">').appendTo(this.$favouritePicturesPanelRow),this.$favouritePicturesControlPanel=$('<div id="pictures-control-panel" class="row">').appendTo(this.$favouritePicturesPanel),this.$favouritePicturesControlPanelForm=$('<div class="col-md-12">').html('<div class="input-group"><span class="input-group-btn"><button id="help-pictures-btn" class="btn btn-sm btn-default" style="border-radius:0;" type="button">?</button></span><span class="input-group-btn"><button id="export-pictures" class="btn btn-sm btn-default" style="border-radius:0;" type="button">'+t.t("favPics[.]Export pictures")+'</button></span><span class="input-group-btn"><label for="import-pictures" class="btn btn-sm btn-default" style="border-radius:0;">'+t.t("favPics[.]Import pictures")+'</label><input type="file" style="display:none;" id="import-pictures" name="pictures-import"></span><input type="text" id="picture-address" class="form-control input-sm" placeholder="'+t.t("favPics[.]Picture url")+'"><span class="input-group-btn"><button id="add-picture-btn" class="btn btn-sm btn-default" style="border-radius:0;" type="button">'+t.t("favPics[.]Add")+"</button></span></div>").appendTo(this.$favouritePicturesControlPanel)),this.makeSmilesAndPicturesTogether=function(){e.smilesAndPicturesTogether=!0,e.$toggleFavouritePicturesPanelBtn.hide(),e.$favouritePicturesPanel.hide()},this.entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},this.replaceUnsafeSymbol=function(t){return e.entityMap[t]},this.renderFavouritePictures=function(){var n=t.storage.get("favouritePictures")||[];this.$favouritePicturesBodyPanel.empty();for(var o=0,i=n.length;o<i;o++){var r=n[o].replace(/[&<>"']/g,this.replaceUnsafeSymbol);$('<img class="favourite-picture-on-panel">').attr({src:r}).appendTo(this.$favouritePicturesBodyPanel).on("click",t=>e.insertFavouritePicture($(t.target).attr("src")))}},this.insertFavouritePicture=function(e){t.Helpers.addMessageToChatInput(" "+e+" ","end")},this.handleFavouritePicturesPanel=function(t){var e=this.smilesAndPicturesTogether||!1;0===$("#smiles-panel").length||e||$("#smiles-panel").hide(),this.$favouritePicturesPanel.slideToggle(200),e||(t.hasClass("favImg-default")?(0!==$("#smiles-btn").length&&$("#smiles-btn").hasClass("btn-success")&&($("#smiles-btn").removeClass("btn-success"),$("#smiles-btn").addClass("btn-default")),t.removeClass("favImg-default"),t.addClass("favImg-success")):(t.removeClass("favImg-success"),t.addClass("favImg-default")))},this.$toggleFavouritePicturesPanelBtn.on("click",function(){0===$("#pictures-body-panel").children().length&&e.renderFavouritePictures(),e.handleFavouritePicturesPanel($(this))}),this.addFavouritePicture=function(e){if(""!==(e=_.trim(e))){var n=t.storage.get("favouritePictures")||[];if(-1!==n.indexOf(e))return window.makeAlert(t.t("favPics[.]The image already exists")).prependTo(this.$favouritePicturesBodyPanel),$("#picture-address").val(""),!1;n.push(e),$("#picture-address").val(""),t.storage.set("favouritePictures",n),this.renderFavouritePictures()}},$("#add-picture-btn").on("click",function(t){t.preventDefault(),e.addFavouritePicture($("#picture-address").val().trim())}),$("#picture-address").on("keypress",function(t){13==t.which&&e.addFavouritePicture($("#picture-address").val().trim())}),this.showHelp=function(){var e=$('<div class="modal-header__inner">');e.append($('<h3 class="modal-title">').text(t.t("Help")));var n=$('<div class="help-pictures-content">');n.append($("<p>"+t.t("favPics[.]<p>Favourite pictures feature if for saving favourite pictures like browser bookmarks.</p><p>Features:<ul><li><strong>Only links to images can be saved</strong>, so if image from link was removed, it also removes from your panel.</li><li>Images links are storing in browser. There are export and import buttons to share them between browsers.</li><li>Images are the same for site channels, but <strong>they are different for http:// and https://</strong></li></ul></p>")+"</p>"));var o=$('<button type="button" id="help-pictures-exit-btn" class="btn btn-info" data-dismiss="modal">'+t.t("favPics[.]Exit")+"</button>"),i=$('<div class="help-pictures-footer">');return i.append(o),t.UI.createModalWindow("chat-history",e,n,i)},$("#help-pictures-btn").on("click",function(t){t.preventDefault(),e.showHelp()}),this.exportPictures=function(){var e=$("<a>").attr({href:"data:text/plain;charset=utf-8,"+encodeURIComponent(t.toJSON(t.storage.get("favouritePictures")||[])),download:"cytube_enhanced_favourite_images.txt"}).hide().appendTo($(document.body));e[0].click(),e.remove()},$("#export-pictures").on("click",function(){e.exportPictures()}),this.importPictures=function(n){var o=new FileReader;o.addEventListener("load",function(n){var o=t.parseJSON(n.target.result);_.isArray(o)?(t.storage.set("favouritePictures",t.parseJSON(n.target.result)),e.renderFavouritePictures()):t.UI.createAlertWindow(t.t("favPics[.]Can't detect any pictures in this file."))}),o.readAsText(n)},$("#import-pictures").on("change",function(){var n=$(this)[0].files[0];t.UI.createConfirmWindow(t.t("favPics[.]Your old pictures will be removed and replaced with the images from uploaded file (file must correspond to format of the file from export button of this panel).<br>Are you sure you want to continue?"),function(t){t&&n&&e.importPictures(n)})}),this.$favouritePicturesBodyPanel.sortable({containment:this.$favouritePicturesPanelRow,revert:!0,update:function(e,n){var o,i=$(n.item).attr("src"),r=$(n.item).next().attr("src"),a=t.storage.get("favouritePictures");if(-1!==(o=a.indexOf(i))){var s;if(a.splice(o,1),void 0!==r)-1!==(s=a.indexOf(r))&&a.splice(s,0,i);else a.push(i);t.storage.set("favouritePictures",a)}}}),this.$favouritePicturesTrash.droppable({accept:".favourite-picture-on-panel",hoverClass:"favourite-picture-drop-hover",drop:function(e,n){var o,i=n.draggable.attr("src"),r=t.storage.get("favouritePictures");-1!==(o=r.indexOf(i))&&(r.splice(o,1),t.storage.set("favouritePictures",r)),n.draggable.remove()}})})},function(t,e,n){n(24)($),n(25),window.cytubeEnhanced.addModule("imagePreview",function(t,e){"use strict";var n=this;e=$.extend({},{selectorsToPreview:".chat-picture, .motd-tab-content img",zoom:.15},e),this.showPicturePreview=function(t){if($(t).is(e.selectorsToPreview)){var n=$('<img src="'+$(t).attr("src")+'">');n.ready(function(){$('<div id="modal-picture-overlay">').appendTo($(document.body));var t=$('<div id="modal-picture">').appendTo($(document.body)).draggable(),e=n.prop("width"),o=n.prop("height"),i=$('<div id="modal-picture-options">');t.append($('<div id="modal-picture-options-wrapper">').append(i)),$('<a href="'+n.prop("src")+'" target="_blank" class="btn btn-sm btn-default"><i class="glyphicon glyphicon-eye-open"></i></button>').appendTo(i),$('<a href="https://www.google.com/searchbyimage?image_url='+n.prop("src")+'" target="_blank" class="btn btn-sm btn-default"><i class="glyphicon glyphicon-search"></i></button>').appendTo(i);var r=1;e>document.documentElement.clientWidth&&o>document.documentElement.clientHeight?r=o-document.documentElement.clientHeight>e-document.documentElement.clientWidth?o/(.8*document.documentElement.clientHeight):e/(.8*document.documentElement.clientWidth):o>document.documentElement.clientHeight?r=o/(.8*document.documentElement.clientHeight):e>document.documentElement.clientWidth&&(r=e/(.8*document.documentElement.clientWidth)),o/=r,e/=r,t.css({width:e,height:o,marginLeft:-e/2,marginTop:-o/2}),n.appendTo(t)})}},$(document.body).on("click",function(t){n.showPicturePreview(t.target)}),this.handleModalPictureMouseWheel=function(t){var n=$("#modal-picture"),o=parseInt(n.css("width"),10),i=parseInt(n.css("height"),10),r=parseInt(n.css("marginLeft"),10),a=parseInt(n.css("marginTop"),10);t.originalEvent.deltaY<0?n.css({width:o*(1+e.zoom),height:i*(1+e.zoom),marginLeft:r+-o*e.zoom/2,marginTop:a+-i*e.zoom/2}):n.css({width:o*(1-e.zoom),height:i*(1-e.zoom),marginLeft:r+o*e.zoom/2,marginTop:a+i*e.zoom/2})},$(document.body).on("mousewheel","#modal-picture",function(t){return n.handleModalPictureMouseWheel(t),!1}),this.closePictureByClick=function(){$("#modal-picture-overlay").remove(),$("#modal-picture").remove()},$(document.body).on("click","#modal-picture-overlay, #modal-picture",function(){n.closePictureByClick()}),this.closePictureByEscape=function(t){27===t.which&&0!==$("#modal-picture").length&&($("#modal-picture-overlay").remove(),$("#modal-picture").remove())},$(document.body).on("keydown",function(t){n.closePictureByEscape(t)})})},function(t,e){var n;n=function(t){var e,n,o=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],i="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],r=Array.prototype.slice;if(t.event.fixHooks)for(var a=o.length;a;)t.event.fixHooks[o[--a]]=t.event.mouseHooks;var s=t.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var e=i.length;e;)this.addEventListener(i[--e],l,!1);else this.onmousewheel=l;t.data(this,"mousewheel-line-height",s.getLineHeight(this)),t.data(this,"mousewheel-page-height",s.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=i.length;e;)this.removeEventListener(i[--e],l,!1);else this.onmousewheel=null;t.removeData(this,"mousewheel-line-height"),t.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var n=t(e),o=n["offsetParent"in t.fn?"offsetParent":"parent"]();return o.length||(o=t("body")),parseInt(o.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(e){return t(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};function l(o){var i,a=o||window.event,l=r.call(arguments,1),d=0,h=0,p=0,f=0,m=0;if((o=t.event.fix(a)).type="mousewheel","detail"in a&&(p=-1*a.detail),"wheelDelta"in a&&(p=a.wheelDelta),"wheelDeltaY"in a&&(p=a.wheelDeltaY),"wheelDeltaX"in a&&(h=-1*a.wheelDeltaX),"axis"in a&&a.axis===a.HORIZONTAL_AXIS&&(h=-1*p,p=0),d=0===p?h:p,"deltaY"in a&&(d=p=-1*a.deltaY),"deltaX"in a&&(h=a.deltaX,0===p&&(d=-1*h)),0!==p||0!==h){if(1===a.deltaMode){var v=t.data(this,"mousewheel-line-height");d*=v,p*=v,h*=v}else if(2===a.deltaMode){var g=t.data(this,"mousewheel-page-height");d*=g,p*=g,h*=g}if(i=Math.max(Math.abs(p),Math.abs(h)),(!n||i<n)&&(n=i,u(a,i)&&(n/=40)),u(a,i)&&(d/=40,h/=40,p/=40),d=Math[d>=1?"floor":"ceil"](d/n),h=Math[h>=1?"floor":"ceil"](h/n),p=Math[p>=1?"floor":"ceil"](p/n),s.settings.normalizeOffset&&this.getBoundingClientRect){var b=this.getBoundingClientRect();f=o.clientX-b.left,m=o.clientY-b.top}return o.deltaX=h,o.deltaY=p,o.deltaFactor=n,o.offsetX=f,o.offsetY=m,o.deltaMode=0,l.unshift(o,d,h,p),e&&clearTimeout(e),e=setTimeout(c,200),(t.event.dispatch||t.event.handle).apply(this,l)}}function c(){n=null}function u(t,e){return s.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120==0}t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})},"function"==typeof define&&define.amd?define(["jquery"],n):"object"==typeof e?t.exports=n:n(jQuery)},function(t,e){!function(t){if(t.support.touch="ontouchend"in document,t.support.touch){var e,n=t.ui.mouse.prototype,o=n._mouseInit,i=n._mouseDestroy;n._touchStart=function(t){!e&&this._mouseCapture(t.originalEvent.changedTouches[0])&&(e=!0,this._touchMoved=!1,r(t,"mouseover"),r(t,"mousemove"),r(t,"mousedown"))},n._touchMove=function(t){e&&(this._touchMoved=!0,r(t,"mousemove"))},n._touchEnd=function(t){e&&(r(t,"mouseup"),r(t,"mouseout"),this._touchMoved||r(t,"click"),e=!1)},n._mouseInit=function(){this.element.bind({touchstart:t.proxy(this,"_touchStart"),touchmove:t.proxy(this,"_touchMove"),touchend:t.proxy(this,"_touchEnd")}),o.call(this)},n._mouseDestroy=function(){this.element.unbind({touchstart:t.proxy(this,"_touchStart"),touchmove:t.proxy(this,"_touchMove"),touchend:t.proxy(this,"_touchEnd")}),i.call(this)}}function r(t,e){if(!(t.originalEvent.touches.length>1)){t.preventDefault();var n=t.originalEvent.changedTouches[0],o=document.createEvent("MouseEvents");o.initMouseEvent(e,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(o)}}}(jQuery)},function(t,e){window.cytubeEnhanced.addModule("languageSwitcher",function(t){"use strict";var e=t.Settings.getTab("general",t.t("general[.]General"),100),n=["en"];for(var o in t.translations)n.push(o);var i=[];for(var r in n)i.push({value:n[r],title:t.t(n[r]),selected:n[r]==t.storage.get("language")});e.addControl("select","horizontal",t.t("general[.]Interface language"),"language",i,null,2e4),t.Settings.onSave(function(e){t.storage.set("language",$("#"+t.prefix+"language").val()),t.storage.isDirty("language")&&t.Settings.requestPageReload()})})},function(t,e){window.cytubeEnhanced.addModule("navMenuTabs",function(t){"use strict";var e=this;this.addTabInput=function(e,n,o){n=n||"",o=o||"";var i=$('<div class="row tab-option-wrapper">').appendTo(e),r=$('<div class="col-sm-4 col-md-3">').appendTo(i),a=$('<div class="form-group">').appendTo(r);$('<input name="title" type="text" class="form-control" placeholder="'+t.t("tabs[.]Title")+'">').val(n).appendTo(a);var s=$('<div class="col-sm-8 col-md-9">').appendTo(i),l=$('<div class="form-group">').appendTo(s);$('<input name="content" type="text" class="form-control" placeholder="'+t.t("tabs[.]Content")+'">').val(o).appendTo(l)},this.tabsConfigToHtml=function(t,e){var n=$("<div>");if(void 0!==t&&""!==t&&$('<div id="motd-channel-description">').html(t).appendTo(n),0!==e.length)for(var o=$('<div id="motd-tabs-wrapper">').appendTo(n),i=$('<div id="motd-tabs">').appendTo(o),r=$('<div id="motd-tabs-content">').appendTo(o),a=0,s=e.length;a<s;a++)if(0===e[a][0].indexOf("!dropdown!")){var l=$('<div class="btn-group">');$('<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">').html(e[a][0].replace("!dropdown!","")+' <span class="caret"></span>').appendTo(l);for(var c=$('<ul class="dropdown-menu">').appendTo(l),u=e[a][1],d=0,h=e[a][1].length;d<h;d++){var p=$("<a>").attr({href:u[d][1],target:"_blank"}).text(u[d][0]);$("<li>").html(p).appendTo(c)}l.appendTo(i)}else 0===e[a][0].indexOf("!link!")?$('<a href="'+e[a][1]+'" target="_blank" class="btn btn-default btn-link">').html(e[a][0].replace("!link!","")).appendTo(i):($('<button class="btn btn-default motd-tab-btn" data-tab-index="'+a+'">').html(e[a][0]).appendTo(i),$('<div class="motd-tab-content" data-tab-index="'+a+'">').hide().html(e[a][1]).appendTo(r));return n.html()},this.tabsHtmlToCondig=function(t){this.$tabsArea.empty();var n=$("<div>").html(t),o=n.find("#motd-tabs").children(),i=n.find("#motd-tabs-content");$("#channel-description-input").val(n.find("#motd-channel-description").html()),o.each(function(){if($(this).hasClass("btn-group")){var t="";$(this).children("ul").children().each(function(){var e=$(this).children("a");t+="[n]"+e.text()+"[/n][a]"+e.attr("href")+"[/a], "}),t=t.slice(0,-2),e.addTabInput(e.$tabsArea,"!dropdown!"+$(this).children("button").html().replace(' <span class="caret"></span>',""),t)}else $(this).hasClass("btn-link")?e.addTabInput(e.$tabsArea,"!link!"+$(this).html(),$(this).attr("href")):e.addTabInput(e.$tabsArea,$(this).html(),i.find('[data-tab-index="'+$(this).data("tabIndex")+'"]').html())})},this.motdCutMap={"<iframe $1>$2</iframe>":/\[iframe(.*?)\](.*?)[/iframe]]/g},this.fixMotdCut=function(){$("#motd-tabs-content").find(".motd-tab-content").each(function(){for(var t in e.motdCutMap)e.motdCutMap.hasOwnProperty(t)&&$(this).html($(this).html().replace(e.motdCutMap[t],t))})},this.$tabsSettings=$('<div id="tabs-settings">').html("<hr><h3>"+t.t("tabs[.]Tabs settings")+"</h3><ul><li>"+t.t("tabs[.]By default tab behaves like simple tab.")+"</li><li>"+t.t('tabs[.]Use !dropdown! prefix to create dropdown list. Example: !dropdown!My dropdown. Value must look like "[n]Link title 1[/n][a]URL 1[/a], [n]Link title 2[/n][a]URL 2[/a], [n]Link title 3[/n][a]URL 3[/a]"')+"</li><li>"+t.t("tabs[.]Use !link! prefix to create link. Example: !link!My link. Value must contain URL.")+"</li></ul>").insertBefore("#cs-motdtext").hide(),this.$tabSettingsBtn=$('<button type="button" class="btn btn-primary motd-bottom-btn" id="show-tabs-settings">').text(t.t("tabs[.]Show tabs settings (cytube enhanced)")).appendTo("#cs-motdeditor").on("click",function(){$(this).hasClass("btn-primary")?(e.$tabsSettings.show(),$(this).removeClass("btn-primary"),$(this).addClass("btn-success")):(e.$tabsSettings.hide(),$(this).removeClass("btn-success"),$(this).addClass("btn-primary"))}),$("#cs-motdtext").before("<hr>"),this.$channelDescriptionInputWrapper=$('<div class="form-group">').appendTo(this.$tabsSettings),this.$channelDescriptionLabel=$('<label for="channel-description-input">'+t.t("tabs[.]Channel description")+"</label>").appendTo(this.$channelDescriptionInputWrapper),this.$channelDescriptionInput=$('<input id="channel-description-input" placeholder="'+t.t("tabs[.]Channel description")+'" class="form-control">').appendTo(this.$channelDescriptionInputWrapper),this.$tabsArea=$('<div id="tabs-settings-area">').appendTo(this.$tabsSettings),$("<p>Вкладки</p>").insertBefore(this.$tabsArea),this.$addTabToTabsSettingsBtn=$('<button type="button" class="btn btn-sm btn-primary" id="tabs-settings-add">').text(t.t("tabs[.]Add tab")).appendTo(this.$tabsSettings).on("click",function(){e.addTabInput(e.$tabsArea)}),this.$removeLastTabFromTabsSettingsBtn=$('<button type="button" class="btn btn-sm btn-primary" id="tabs-settings-remove">').text(t.t("tabs[.]Remove the last tab")).appendTo(this.$tabsSettings).on("click",function(){e.$tabsArea.children(".tab-option-wrapper").last().remove()}),this.$tabsToHtml=$('<button type="button" class="btn btn-sm btn-primary" id="tabs-settings-to-html">').text(t.t("tabs[.]Convert to the editor's code")).appendTo(this.$tabsSettings).on("click",function(){if(window.confirm(t.t("tabs[.]The code in the editor will be replaced with the new code, continue?"))){$(this).removeClass("btn-success");var n=[];e.$tabsArea.find(".tab-option-wrapper").each(function(){var e=$(this).find('input[name="title"]').val().trim(),o=$(this).find('input[name="content"]').val().trim();if(0===e.indexOf("!dropdown!")){if(!/^(?:\[n\](.+?)\[\/n\]\[a\](.+?)\[\/a\][ ]*,[ ]*)*\[n\](.+?)\[\/n\]\[a\](.+?)\[\/a\]$/.test(o))return void window.alert(t.t("tabs[.]Wrong content for the dropdown")+e.replace("!dropdown!","")+".");o=o.split(",").map(function(t){return[(t=t.trim().match(/^\[n\](.+?)\[\/n\]\[a\](.+?)\[\/a\]$/))[1].trim(),t[2].trim()]})}else e.indexOf("!link!");n.push([e,o])}),$("#cs-motdtext").val(e.tabsConfigToHtml(e.$channelDescriptionInput.val(),n))}}),this.$htmlToTabs=$('<button type="button" class="btn btn-sm btn-primary" id="tabs-settings-from-html">').text(t.t("tabs[.]Convert from the editor's code")).appendTo(this.$tabsSettings).on("click",function(){window.confirm(t.t("tabs[.]Tabs settings will be replaced with the code from the editor, continue?"))&&($(this).removeClass("btn-success"),e.tabsHtmlToCondig($("#cs-motdtext").val()))}),this.showMotdTab=function(t){var e=$("#motd-tabs-content").find('[data-tab-index="'+t.data("tabIndex")+'"]');t.hasClass("btn-default")?($(".motd-tab-content").hide(),e.show(),$(".motd-tab-btn").removeClass("btn-success").addClass("btn-default"),t.removeClass("btn-default"),t.addClass("btn-success")):(e.hide(),t.removeClass("btn-success"),t.addClass("btn-default"))},$(document.body).on("click","#motd-tabs .motd-tab-btn",function(){e.showMotdTab($(this))}),this.motdHandleDropdown=function(){$(".motd-tab-btn").removeClass("btn-success").addClass("btn-default"),$(".motd-tab-content").hide()},$(document.body).on("click","#motd-tabs .dropdown-toggle",function(){e.motdHandleDropdown()}),this.tabsHtmlToCondig($("#cs-motdtext").val()),this.fixMotdCut(),window.socket.on("setMotd",function(){e.fixMotdCut()}),$(document).on("change keypress","#tabs-settings-area input, #tabs-settings-area textarea",function(){e.$tabsToHtml.addClass("btn-success")}),$(document).on("change keypress","#cs-motdtext",function(){e.$htmlToTabs.addClass("btn-success")})})},function(t,e){window.cytubeEnhanced.addModule("showVideoInfo",function(t){"use strict";var e=this;this.$titleRow=$('<div id="titlerow" class="row">').insertBefore("#main"),this.$titleRowOuter=$('<div id="titlerow-outer" class="col-md-12" />').html($("#currenttitle").text(""!==$(".queue_active a").text()?$("#currenttitle").text().replace(/^Currently Playing:/,t.t("videoInfo[.]Now:")):"").detach()).appendTo(this.$titleRow),this.$mediaInfo=$('<p id="mediainfo">').appendTo("#videowrap-header"),this.showPlaylistInfo=function(){0!==$(".queue_active").length?($("#currenttitle").text($("#currenttitle").text().replace(/^Currently Playing:/,t.t("videoInfo[.]Now:"))),this.$mediaInfo.text($(".queue_active").attr("title").replace("Added by",t.t("videoInfo[.]Added by")))):($("#currenttitle").text(""),this.$mediaInfo.text(t.t("videoInfo[.]Nothing is playing now")))},this.showPlaylistInfo(),window.socket.on("changeMedia",function(){e.showPlaylistInfo()})})},function(t,e){window.cytubeEnhanced.addModule("smilesAndFavouritePicturesTogether",function(t){"use strict";var e=this,n=t.Settings.getTab("general",t.t("general[.]General"),100),o=t.Settings.storage;if(t.isModulePermitted("smiles")&&t.isModulePermitted("favouritePictures")){var i,r;this.scheme={"smiles-and-favourite-pictures-together":{title:t.t("general[.]Smiles and pictures together"),default:"no",options:[{value:"yes",title:t.t("settings[.]Yes")},{value:"no",title:t.t("settings[.]No")}]}};var a=1e4;for(var s in this.scheme){if(i=this.scheme[s],o.setDefault("general."+s,i.default),o.get("general."+s))for(r in i.options)i.options[r].selected=o.get("general."+s)==i.options[r].value;n.addControl("select","horizontal",i.title,s,i.options,null,a),a+=100}t.Settings.onSave(function(n){for(var o in e.scheme)n.set("general."+o,$("#"+t.prefix+o).val());n.isDirty("general.smiles-and-favourite-pictures-together")&&t.Settings.requestPageReload()}),"yes"==o.get("general.smiles-and-favourite-pictures-together")&&(t.getModule("smiles").done(function(t){t.makeSmilesAndPicturesTogether()}),t.getModule("favouritePictures").done(function(t){t.makeSmilesAndPicturesTogether()}),$('<button id="smiles-and-picture-btn" class="btn btn-sm btn-default" title="'+t.t("general[.]Show emotes and favorite images")+'">').html('<i class="glyphicon glyphicon-th-large"></i>').prependTo($("#chat-controls")).on("click",function(){$("#smiles-btn").click(),$("#favourite-pictures-btn").click(),$(this).hasClass("btn-default")?($(this).removeClass("btn-default"),$(this).addClass("btn-success")):($(this).removeClass("btn-success"),$(this).addClass("btn-default"))}))}})},function(t,e){window.cytubeEnhanced.addModule("smiles",function(t){"use strict";var e=this;$("#emotelistbtn").hide(),0===$("#chat-panel").length&&$('<div id="chat-panel" class="row">').insertAfter("#main"),0===$("#chat-controls").length&&$('<div id="chat-controls" class="btn-group">').appendTo("#chatwrap"),this.$smilesBtn=$('<button id="smiles-btn" class="btn btn-sm btn-default" title="'+t.t("emotes[.]Show emotes")+'">').html('<i class="glyphicon glyphicon-picture"></i>').prependTo("#chat-controls"),this.$smilesPanel=$('<div id="smiles-panel">').prependTo("#chat-panel").hide(),this.renderSmiles=function(){for(var t=window.CHANNEL.emotes,e=0,n=t.length;e<n;e++)$('<img class="smile-on-panel">').attr({src:t[e].image}).data("name",t[e].name).appendTo(this.$smilesPanel)},this.insertSmile=function(e){t.Helpers.addMessageToChatInput(" "+e+" ","end")},$(document.body).on("click",".smile-on-panel",function(){e.insertSmile($(this).data("name"))}),$(window).on("resize",function(){t.Helpers.getViewportSize().width<992&&e.$smilesPanel.empty()}),this.showSmilesPanel=function(){if(t.Helpers.getViewportSize().width<992)e.$smilesPanel.empty(),$("#emotelistbtn").click();else{""===e.$smilesPanel.html()&&e.renderSmiles();var n=this.smilesAndPicturesTogether||!1;0===$("#favourite-pictures-panel").length||n||$("#favourite-pictures-panel").hide(),e.$smilesPanel.toggle(),n||(e.$smilesBtn.hasClass("btn-default")?(0!==$("#favourite-pictures-btn").length&&$("#favourite-pictures-btn").hasClass("btn-success")&&$("#favourite-pictures-btn").removeClass("btn-success").addClass("btn-default"),e.$smilesBtn.removeClass("btn-default"),e.$smilesBtn.addClass("btn-success")):(e.$smilesBtn.removeClass("btn-success"),e.$smilesBtn.addClass("btn-default")))}},this.$smilesBtn.on("click",function(){e.showSmilesPanel()}),this.makeSmilesAndPicturesTogether=function(){e.smilesAndPicturesTogether=!0,e.$smilesBtn.hide(),e.$smilesPanel.hide()}})},function(t,e){window.cytubeEnhanced.addModule("themes",function(t,e){"use strict";var n=this;e=$.extend({},{defaultTheme:"halloween",themeId:"theme-css"},e),$("#us-theme").closest(".form-group").hide().val("/css/themes/slate.css"),window.createCookie&&window.createCookie("cytube-theme","/css/themes/slate.css",1e3);var o=t.Settings.getTab("themes",t.t("themes[.]Themes"),500),i=$('<div class="'+t.prefix+'themes">').appendTo(o.$content),r=t.Settings.storage,a=$('<div class="'+t.prefix+'themes__info-message">').text("Темы отсутствуют.").prependTo(o.$content);r.setDefault("themes.selected",e.defaultTheme),this.themes={},this.applyNewDefaultTheme=function(){var o=r.get("themes.previousDefaultTheme");if(r.get("themes.selected")==o)r.set("themes.previousDefaultTheme",e.defaultTheme),n.setTheme(e.defaultTheme),r.save(),console.log("reloading"),window.location.reload();else if((!o||o&&o!=e.defaultTheme)&&(r.set("themes.previousDefaultTheme",e.defaultTheme),r.save(),e.defaultTheme!=r.get("themes.selected"))){var i=n.themes[e.defaultTheme].title;t.UI.createConfirmWindow(t.t('themes[.]Default theme was changed to "%themeTitle%" by administrator. Do you want to try it? (Don\'t forget, that you can switch your theme in extended settings anytime.)').replace("%themeTitle%",i),function(o){o&&(n.setTheme(e.defaultTheme),r.save(),t.UI.createConfirmWindow(t.t("settings[.]Some settings need to refresh the page to get to work. Do it now?"),function(t){t&&window.location.reload()}))})}},this.add=function(t){a.remove(),n.themes[t.name]=t,n.themes[t.name].$el=n.addMarkup(t).appendTo(i),n.sort(),t.name===r.get("themes.selected")?(t.name===e.defaultTheme&&(r.set("themes.previousDefaultTheme",e.defaultTheme),r.save()),n.setTheme(t.name),n.applyTheme(t.name)):t.name===e.defaultTheme&&n.applyNewDefaultTheme()},o.onShow(function(){$("."+t.prefix+"themes__item").removeClass("active").filter(function(){return $(this).data("name")===r.get("themes.selected")}).addClass("active")}),this.setTheme=function(e){r.set("themes.selected",e),$("."+t.prefix+"themes__item").removeClass("active").filter(function(){return $(this).data("name")===e}).addClass("active")},this.applyTheme=function(t){var o=n.themes[t];$("#"+e.themeId).remove(),o.cssUrl?$('<link rel="stylesheet" id="'+e.themeId+'">').attr("href",o.cssUrl).appendTo($("head")):n.setTheme(r.getDefault("themes.selected")),o.jsUrl&&$.getScript(o.jsUrl)},this.addMarkup=function(e){var o=$('<div class="'+t.prefix+'themes__item">').data("name",e.name).on("click",function(){var e=$(this).data("name");e!==r.get("themes.selected")&&t.UI.createConfirmWindow(t.t("themes[.]Apply this theme?"),function(t){t&&n.setTheme(e)})});$('<div class="'+t.prefix+'themes__item__title">').text(e.title).appendTo(o);return void 0!==e.pictureUrl&&""!==(e.pictureUrl=e.pictureUrl.trim())&&$('<div class="'+t.prefix+'themes__item__picture">').appendTo(o).css("background-image",'url("'+e.pictureUrl+'")'),o},this.sort=function(){var t=[];for(var e in n.themes)t.push(n.themes[e]);for(var o=0,r=(t=t.sort(function(t,e){return t.title.toLowerCase()>e.title.toLowerCase()?1:t.title.toLowerCase()<e.title.toLowerCase()?-1:0})).length;o<r;o++)t[o].$el.detach().appendTo(i)},t.Settings.onSave(function(e){e.isDirty("themes.selected")&&t.Settings.requestPageReload()})})},function(t,e){window.cytubeEnhanced.addModule("uiRussianTranslate",function(t){"use strict";var e=this;if("ru"===t.storage.get("language")){0!==$("#newpollbtn").length&&$("#newpollbtn").text(t.t("standardUI[.]Create a poll")),0!==$("#welcome").length&&$("#welcome").text(t.t("standardUI[.]Welcome, ")+window.CLIENT.name),0!==$("#logout").length&&$("#logout").text(t.t("standardUI[.]Log out")),0!==$("#username").length&&$("#username").attr({placeholder:t.t("standardUI[.]Login")}),0!==$("#password").length&&$("#password").attr({placeholder:t.t("standardUI[.]Password")}),0!==$("#loginform").find(".checkbox").find(".navbar-text-nofloat").length&&$("#loginform").find(".checkbox").find(".navbar-text-nofloat").text(t.t("standardUI[.]Remember me")),0!==$("#login").length&&$("#login").text(t.t("standardUI[.]Site login"));var n,o={Home:t.t("standardUI[.]Home"),Account:t.t("standardUI[.]Account"),Logout:t.t("standardUI[.]Logout"),Channels:t.t("standardUI[.]Channels"),Profile:t.t("standardUI[.]Profile"),"Change Password/Email":t.t("standardUI[.]Change Password/Email"),Login:t.t("standardUI[.]Log in"),Register:t.t("standardUI[.]Register"),Options:t.t("standardUI[.]Options"),"Channel Settings":t.t("standardUI[.]Channel Settings"),Layout:t.t("standardUI[.]Layout"),"Chat Only":t.t("standardUI[.]Chat Only"),"Remove Video":t.t("standardUI[.]Remove Video")};$(".navbar").find(".navbar-nav").children().each(function(){$(this).find("a").each(function(){for(var t in o)o.hasOwnProperty(t)&&$(this).html($(this).html().replace(t,o[t]))})}),0!==$("#mediaurl").length&&$("#mediaurl").attr("placeholder",t.t("standardUI[.]Video url")),0!==$("#queue_next").length&&$("#queue_next").text(t.t("standardUI[.]Next")),0!==$("#queue_end").length&&$("#queue_end").text(t.t("standardUI[.]At end")),$(".qbtn-play").each(function(){$(this).html($(this).html().replace(/\s*Play/," "+t.t("standardUI[.]Play")))}),$(".qbtn-next").each(function(){$(this).html($(this).html().replace(/\s*Queue Next/," "+t.t("standardUI[.]Queue Next")))}),$(".qbtn-tmp").each(function(){$(this).html($(this).html().replace(/\s*Make Temporary/," "+t.t("standardUI[.]Make Temporary")).replace(/\s*Make Permanent/," "+t.t("standardUI[.]Make Permanent")))}),$(".qbtn-delete").each(function(){$(this).html($(this).html().replace(/\s*Delete/," "+t.t("standardUI[.]Delete")))}),window.addQueueButtons=(n=window.addQueueButtons,function(e){var o=n(e);return 0!==e.find(".qbtn-play").length&&e.find(".qbtn-play").html(e.find(".qbtn-play").html().replace(/\s*Play/," "+t.t("standardUI[.]Play"))),0!==e.find(".qbtn-next").length&&e.find(".qbtn-next").html(e.find(".qbtn-next").html().replace(/\s*Queue Next/," "+t.t("standardUI[.]Queue Next"))),0!==e.find(".qbtn-tmp").length&&e.find(".qbtn-tmp").html(e.find(".qbtn-tmp").html().replace(/\s*Make Temporary/," "+t.t("standardUI[.]Make Temporary")).replace(/\s*Make Permanent/," "+t.t("standardUI[.]Make Permanent"))),0!==e.find(".qbtn-delete").length&&e.find(".qbtn-delete").html(e.find(".qbtn-delete").html().replace(/\s*Delete/," "+t.t("standardUI[.]Delete"))),o}),this.handleTemp=function(e){var n=$(".pluid-"+e.uid).find(".qbtn-tmp");0!==n.length&&(e.temp?n.html(n.html().replace("Сделать временным",t.t("standardUI[.]Make Temporary"))):n.html(n.html().replace("Сделать постоянным",t.t("standardUI[.]Make Permanent"))))},window.socket.on("setTemp",function(t){e.handleTemp(t)}),0!==$("#guestname").length&&$("#guestname").attr("placeholder",t.t("standardUI[.]Name")),$("#guestlogin")&&$("#guestlogin").find(".input-group-addon").text(t.t("standardUI[.]Guest login")),0!==$("#chatbtn").length&&$("#chatbtn").text("Отправить"),0!==$("#modflair").length&&$("#modflair").text("Мод")}})},function(t,e){window.cytubeEnhanced.addModule("videoControls",function(t,e){"use strict";var n=this;e=$.extend({},{turnOffVideoOption:!0,selectQualityOption:!0,expandPlaylistOption:!0,showVideoContributorsOption:!0,playlistHeight:500},e),$("#mediarefresh").hide(),this.$topVideoControls=$('<div id="top-video-controls" class="btn-group">').appendTo("#videowrap"),this.refreshVideo=function(){$("#mediarefresh").click()},this.$refreshVideoBtn=$('<button id="refresh-video" class="btn btn-sm btn-default" title="'+t.t("video[.]Refresh video")+'">').html('<i class="glyphicon glyphicon-refresh">').appendTo(this.$topVideoControls).on("click",function(){n.refreshVideo()}),this.hidePlayer=function(t){if(t.hasClass("btn-default")){var e=$("#videowrap").find(".embed-responsive");e.css({position:"relative"}),$('<div id="player-overlay">').appendTo(e),t.html('<i class="glyphicon glyphicon-film">').removeClass("btn-default").addClass("btn-success")}else $("#player-overlay").remove(),t.html('<i class="glyphicon glyphicon-ban-circle">').removeClass("btn-success").addClass("btn-default")},this.$hidePlayerBtn=$('<button id="hide-player-btn" class="btn btn-sm btn-default" title="'+t.t("video[.]Hide video")+'">').html('<i class="glyphicon glyphicon-ban-circle">').appendTo(this.$topVideoControls).on("click",function(){n.hidePlayer($(this))}),e.turnOffVideoOption||this.$hidePlayerBtn.hide(),this.qualityLabelsTranslate={auto:"авто",240:"240p",360:"360p",480:"480p",720:"720p",1080:"1080p",best:t.t("video[.]best")};var o=["auto",240,360,480,720,1080,"best"];this.$videoQualityBtnGroup=$('<div class="btn-group">').html('<button type="button" class="btn btn-default btn-sm video-dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">'+t.t("video[.]Quality")+": "+this.qualityLabelsTranslate[window.USEROPTS.default_quality||"auto"]+' <span class="caret"></span></button>').appendTo(this.$topVideoControls),this.$videoQualityList=$('<ul class="dropdown-menu">');for(var i=0,r=o.length;i<r;i++)$("<li>").html('<a href="#" data-quality="'+o[i]+'">'+this.qualityLabelsTranslate[o[i]]+"</a>").appendTo(this.$videoQualityList);this.$videoQualityList.appendTo(this.$videoQualityBtnGroup),this.changeVideoQuality=function(e){this.settingsFix(),$("#us-default-quality").val(e.data("quality")),window.saveUserOptions(),this.$refreshVideoBtn.click(),this.$videoQualityBtnGroup.find("button").html(t.t("video[.]Quality")+": "+e.text()+' <span class="caret"></span>'),$(".video-dropdown-toggle").dropdown()},this.$videoQualityBtnGroup.on("click","a",function(){return n.changeVideoQuality($(this)),!1}),$("#us-default-quality").on("change",function(){n.$videoQualityBtnGroup.find("button").html(t.t("video[.]Quality")+": "+n.qualityLabelsTranslate[$(this).val()]+' <span class="caret"></span>')}),e.selectQualityOption||this.$videoQualityBtnGroup.hide(),this.settingsFix=function(){$("#us-theme").val(window.USEROPTS.theme),$("#us-layout").val(window.USEROPTS.layout),$("#us-no-channelcss").prop("checked",window.USEROPTS.ignore_channelcss),$("#us-no-channeljs").prop("checked",window.USEROPTS.ignore_channeljs),$("#us-synch").prop("checked",window.USEROPTS.synch),$("#us-synch-accuracy").val(window.USEROPTS.sync_accuracy),$("#us-wmode-transparent").prop("checked",window.USEROPTS.wmode_transparent),$("#us-hidevideo").prop("checked",window.USEROPTS.hidevid),$("#us-playlistbuttons").prop("checked",window.USEROPTS.qbtn_hide),$("#us-oldbtns").prop("checked",window.USEROPTS.qbtn_idontlikechange),$("#us-default-quality").val(window.USEROPTS.default_quality||"auto"),$("#us-chat-timestamp").prop("checked",window.USEROPTS.show_timestamps),$("#us-sort-rank").prop("checked",window.USEROPTS.sort_rank),$("#us-sort-afk").prop("checked",window.USEROPTS.sort_afk),$("#us-blink-title").val(window.USEROPTS.blink_title),$("#us-ping-sound").val(window.USEROPTS.boop),$("#us-sendbtn").prop("checked",window.USEROPTS.chatbtn),$("#us-no-emotes").prop("checked",window.USEROPTS.no_emotes),$("#us-modflair").prop("checked",window.USEROPTS.modhat),$("#us-joinmessage").prop("checked",window.USEROPTS.joinmessage),$("#us-shadowchat").prop("checked",window.USEROPTS.show_shadowchat)},0!==$("#showmediaurl").length&&$("#showmediaurl").html(t.t("standardUI[.]Add video")).attr({title:t.t("standardUI[.]Add video from url")}).detach().insertBefore($("#showsearch")),this.expandPlaylist=function(n){n.hasClass("btn-success")?($("#queue").css("max-height",e.playlistHeight+"px"),n.attr("title",t.t("video[.]Expand playlist")),n.removeClass("btn-success"),n.addClass("btn-default")):($("#queue").css("max-height","100000px"),n.attr("title",t.t("video[.]Unexpand playlist")),n.removeClass("btn-default"),n.addClass("btn-success"),window.scrollQueue())},this.$expandPlaylistBtn=$('<button id="expand-playlist-btn" class="btn btn-sm btn-default" data-expanded="0" title="'+t.t("video[.]Expand playlist")+'">').append('<span class="glyphicon glyphicon-resize-full">').prependTo("#videocontrols").on("click",function(){n.expandPlaylist($(this))}),e.expandPlaylistOption||this.$expandPlaylistBtn.hide(),this.$scrollToCurrentBtn=$('<button id="scroll-to-current-btn" class="btn btn-sm btn-default" title="'+t.t("video[.]Scroll the playlist to the current video")+'">').append('<span class="glyphicon glyphicon-hand-right">').prependTo("#videocontrols").on("click",function(){window.scrollQueue()}),this.showVideoContributorsList=function(){var e=$('<h3 class="modal-title">').text(t.t("video[.]Contributors' list")),n=$("<div>"),o={};$("#queue").find(".queue_entry").each(function(){var t=$(this).attr("title").replace("Added by: ","");void 0===o[t]?o[t]=1:o[t]+=1}),n.append($("<p>"+t.t("video[.]Video's count")+": "+($("#queue").find(".queue_entry").length+1)+"</p>"));var i=$("<ol>");for(var r in o)o.hasOwnProperty(r)&&i.append($("<li>"+r+": "+o[r]+".</li>"));i.appendTo(n),t.UI.createModalWindow("video-contributors-list",e,n)},this.$videoContributorsBtn=$('<button id="video-contributors-btn" class="btn btn-sm btn-default" title="'+t.t("video[.]Contributors' list")+'">').append('<span class="glyphicon glyphicon-user">').prependTo("#videocontrols").on("click",function(){n.showVideoContributorsList()}),e.showVideoContributorsOption||this.$videoContributorsBtn.hide()})},function(t,e){window.cytubeEnhanced.addModule("videoResize",function(t,e){"use strict";if((e=$.extend({},{turnedOn:!0},e)).turnedOn){t.storage.setDefault("chatWidthInColumns",5);var n=new function(){var e=this;e.ARROW="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADZJREFUeNpiYBgFVAfzoZhoeSYsihJwGDIfKkeUK/6jGYJNjGhDSNaMbghZmokN1FFADQAQYACgYhHrEaVEsQAAAABJRU5ErkJggg==",e.COLCOUNT=12,e.PREFIX="set-width-",e.AUTHOR="dfdfg",e.positions=[],e.mode="show",e.checkPosition=function(){var t=document.getElementById("chatwrap"),n=document.getElementById("videowrap");return t.nextSibling==n?e.positions=[t,n]:e.positions=[n,t],$(t).position().top==$(n).position().top},e.addHtml=function(){var t=[];t.push('<div id="'+e.PREFIX+'wrap" style="top: -17px; position: relative; height: 0px;line-height: 0px;">');for(var n=1;n<e.COLCOUNT;n++)t.push('<div style="left: '+100*n/e.COLCOUNT+'%; position: relative;height: 0px;">'),t.push('<img id="'+e.PREFIX+"arrow-"+n+'" class="'+e.PREFIX+'arrow" src="'+e.ARROW+'" style="cursor: pointer; margin-left: -8px; background-color:rgba(255,255,255,0.1); border-radius: 8px;">'),t.push("</div>");t.push("</div>"),$("#main").prepend(t.join("\n"))},e.hide=function(t){if(-1==(t=t||-1)){var n=e.positions[0].getAttribute("class");t=n.substr(n.lastIndexOf("-")+1)}for(var o=1;o<e.COLCOUNT;o++)o!=t&&$("#"+e.PREFIX+"arrow-"+o).parent().hide();e.mode="hide"},e.show=function(t){$("."+e.PREFIX+"arrow").parent().show(),e.mode="show"},e.setHandlers=function(){$("."+e.PREFIX+"arrow").click(function(n){if("show"==e.mode){var o=n.currentTarget.id,i=o.substr(o.lastIndexOf("-")+1),r=e.COLCOUNT-i,a=$("#"+e.PREFIX+"wrap").next();return t.storage.set("chatWidthInColumns",i),a.attr("class","col-lg-"+i+" col-md-"+i),(a=a.next()).attr("class","col-lg-"+r+" col-md-"+r),e.hide(i),void window.handleWindowResize()}e.show()})},e.loadPosition=function(){var e=t.storage.get("chatWidthInColumns");e&&$("#"+n.PREFIX+"arrow-"+e).trigger("click").load(function(){$(this).trigger("click")})},e.create=function(){$("#"+e.PREFIX+"wrap").remove(),e.checkPosition()&&(e.addHtml(),e.setHandlers(),e.hide(),e.loadPosition())}};n.create()}})},function(t,e){window.cytubeEnhanced.addModule("videojsProgress",function(){"use strict";var t=this;this.handleProgress=function(){if(window.PLAYER instanceof window.VideoJSPlayer&&("Html5"===window.PLAYER.player.techName||"Html5"===window.PLAYER.player.Ua)){var t=$('<div class="vjs-tip">').insertAfter(".vjs-progress-control"),e=$('<div class="vjs-tip-body">').appendTo(t);$('<div class="vjs-tip-body-arrow">').appendTo(e);var n=$('<div class="vjs-tip-body-inner">').appendTo(e);$(".vjs-progress-control").on("mousemove",function(e){var o=$(window.PLAYER.player.controlBar.progressControl.seekBar.el()),i=o.outerWidth()/window.PLAYER.player.duration(),r=(e.pageX-o.offset().left)/i,a=Math.floor(r/3600),s=a>0?Math.floor(r%3600/60):Math.floor(r/60);s<10&&a>0&&(s="0"+s);var l=Math.floor(r%60);l<10&&(l="0"+l),a>0?n.text(a+":"+s+":"+l):n.text(s+":"+l);var c=$(".vjs-control-bar");t.css("top",-(c.height()+$(".vjs-progress-control").height())+"px").css("left",e.pageX-c.offset().left-n.outerWidth()/2+"px").show()}),$(".vjs-progress-control, .vjs-play-control").on("mouseout",function(){t.hide()})}},this.handleProgress(),window.socket.on("changeMedia",function(){t.handleProgress()})})},function(t,e){window.cytubeEnhanced.getModule("extras").done(function(t){t.add({title:"Аниме-цитаты",name:"anime-quotes",description:"Нескучные аниме-цитаты.",url:"//cdn.rawgit.com/kaba99/cytube-enhanced/master/extras/anime-quotes/anime-quotes.js"})})},function(t,e){window.cytubeEnhanced.getModule("extras").done(function(t){t.add({title:"Цитаты пирата",name:"pirate-quotes",description:"Нескучные цитаты Пирата.",url:"//cdn.rawgit.com/kaba99/cytube-enhanced/master/extras/pirate-quotes/pirate-quotes.js"})})},function(t,e){window.cytubeEnhanced.getModule("extras").done(function(t){t.add({title:"Скрипт пирата",name:"pirate-script",description:"Ну, в общем, скриптец вот, всякие плюшки прикрутил. Теперь можно срать в чат еще эффективнее, раздражать модераторов еще больше и многое другое.",authorUrl:"https://github.com/Pirate505/animach-xtra",url:"//cdn.rawgit.com/Pirate505/animach-xtra/master/src/animachxtra.user.js"})})},function(t,e){window.cytubeEnhanced.getModule("themes").done(function(t){t.add({title:"Стандартная тема",name:"default",cssUrl:"https://rawgit.com/kaba99/cytube-enhanced/master/themes/default/theme.css",jsUrl:"https://rawgit.com/kaba99/cytube-enhanced/master/themes/default/theme.js",pictureUrl:"https://rawgit.com/kaba99/cytube-enhanced/master/themes/default/screenshot.png"})})},function(t,e){window.cytubeEnhanced.getModule("themes").done(function(t){t.add({title:"Halloween",name:"halloween",cssUrl:"https://rawgit.com/kaba99/cytube-enhanced/master/themes/halloween/theme.css",jsUrl:"https://rawgit.com/kaba99/cytube-enhanced/master/themes/halloween/theme.js",pictureUrl:"https://rawgit.com/kaba99/cytube-enhanced/master/themes/halloween/screenshot.png"})})},function(t,e){window.cytubeEnhanced.getModule("themes").done(function(t){t.add({title:"Новогодняя тема",name:"new-year",cssUrl:"https://rawgit.com/kaba99/cytube-enhanced/master/themes/new_year/theme.css",jsUrl:"https://rawgit.com/kaba99/cytube-enhanced/master/themes/new_year/theme.js",pictureUrl:"https://rawgit.com/kaba99/cytube-enhanced/master/themes/new_year/screenshot.png"})})},function(t,e){window.cytubeEnhanced.getModule("themes").done(function(t){t.add({title:"Военная тема",name:"war",cssUrl:"https://rawgit.com/kaba99/cytube-enhanced/master/themes/war/theme.css",jsUrl:"https://rawgit.com/kaba99/cytube-enhanced/master/themes/war/theme.js",pictureUrl:"https://rawgit.com/kaba99/cytube-enhanced/master/themes/war/screenshot.png"})})},function(t,e){window.cytubeEnhanced.addModule("skipLockButton",function(t,e){"use strict";if(CLIENT.rank>=2&&0==$("#skipLockButton").length){let t=CHANNEL.opts.allow_voteskip?"success":"danger";$("<button>").addClass("btn").addClass("btn-sm").addClass(`btn-${t}`).attr("id","skipLockButton").attr("title","Вкл / Выкл скиплок").html('<span class="glyphicon glyphicon-step-forward" />').prependTo($("#videocontrols")).click(t=>{$("#cs-allow_voteskip")[0].click()}),window.socket.on("channelOpts",function(t){let e=!t.allow_voteskip;var n=$("#skipLockButton");e?(n.hasClass("btn-success")&&n.removeClass("btn-success"),n.hasClass("btn-danger")||n.addClass("btn-danger")):(n.hasClass("btn-danger")&&n.removeClass("btn-danger"),n.hasClass("btn-success")||n.addClass("btn-success"))})}})},function(t,e){window.cytubeEnhanced.addModule("movieInfo",function(t,e){"use strict";this.kinoID,this.movieActors=[],this.movieDirectors="",this.movieProducers="",this.movieCompositors="";var n=this;this.movieFetch=function(){let e=$(".queue_active a").text(),o=/.*?https?:\/\/www\.kinopoisk\.ru\/film\/(\d+)\//g;n.kinoID=e.replace(o,"$1");var i=o.test(e);this.createMovieButton(i),i&&(this.updateMoviePanelInfo(),t.getModule("additionalChatCommands").done(function(t){t.movieActors=[]}),$.ajax({type:"GET",dataType:"application/json",url:`${atob("aHR0cHM6Ly9raW5vcG9pc2thcGl1bm9mZmljaWFsLnRlY2gvYXBpL3YxL3N0YWZmP2ZpbG1JZD0=")}${this.kinoID}`,beforeSend:function(t){t.setRequestHeader(`${atob("WC1BUEktS0VZ")}`,`${atob("NGMwMGE3ZmItOGY3Zi00YTI3LTkwNzMtNzBlN2IxYWYwZDNk")}`)},complete:function(e){let o=e,i=JSON.parse(o.responseText);n.movieDirectors="",n.movieProducers="",n.movieCompositors="",n.movieActors=[],$.each(i,function(e,o){if("ACTOR"===o.professionKey){let e=o.description;if(e&&!e.includes("в титрах не указан")){let i=o.posterUrl;$(`<img src=${i} />`).on("load",function(){let r=$(this)[0].width;if($(this)[0].remove(),52!=r){var a={actorName:o.nameRu,actorPhoto:i,actorDescription:e};n.movieActors.push(a),t.getModule("additionalChatCommands").done(function(t){t.movieActors.push(a)})}})}}"DIRECTOR"===o.professionKey&&n.movieDirectors.length<50&&(n.movieDirectors+=o.nameRu+", "),"PRODUCER"===o.professionKey&&n.movieProducers.length<50&&(n.movieProducers+=o.nameRu+", "),"COMPOSER"===o.professionKey&&n.movieCompositors.length<50&&(n.movieCompositors+=o.nameRu+", ")})}}))},this.createMovieButton=function(t){t&&0==$("#movieButton").length&&($('<span id="movieButton" title="Описание фильма" style="padding: 0px 0px;cursor: pointer">').html('<img src="https://i.imgur.com/bpvLec5.png" style="max-height: 40px;" onload="" onerror="$(this).remove();"/>').appendTo("#leftcontrols").on("click",t=>$("#moviePanel").slideToggle(200)),this.createMoviePanel(),this.pickActorBtnCB())},this.pickActorBtnCB=function(){$("#rollActor").on("click",function(){let t=$("#chatline").val();$("#chatline").val("!actor");let e=jQuery.Event("keydown");e.which=13,e.keyCode=13,$("#chatline").trigger(e),$("#chatline").val(t)})},this.createMoviePanel=function(){0==$("#moviePanel").length&&($("<style>").appendTo("head").text("\n\t\t\t\t@import url('https://fonts.googleapis.com/css2?family=Open+Sans&display=swap');\n\t\t\n\t\t\t\t.movieImg{\n\t\t\t\t\tmax-width: 10em;\n\t\t\t\t\tborder: double;\n\t\t\t\t\tborder-color: crimson;\n\t\t\t\t}\n\t\t\n\t\t\t\t#moviePanel hr{\n\t\t\t\t\tmargin-top: 1em;\n\t\t\t\t\tmargin-bottom: 1em;\n\t\t\t\t}\n\t\t\n\t\t\t\t.movie-rate-img{\n\t\t\t\t\tmax-width: 32px;\n\t\t\t\t\tmax-height: 32px;\n\t\t\t\t}\n\t\t\n\t\t\t\t.movie-rate-txt{\n\t\t\t\t\ttext-size: 2em;\n\t\t\t\t}\n\t\t\n\t\t\t\t#moviePanel {\n\t\t\t\t\tfont-family: 'Open Sans', sans-serif;\n\t\t\t\t}\n\t\t\t"),$('\n\t\t\t\t\t<div class="col-lg-12 col-md-12 closePanel" id="moviePanel" style="display: none;">\n\t\t\t\t\t\t<div class="well" id="moviePanelContent" style="min-height: 20em">\n\t\t\t\n\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t<div id="moviePanelHeader" class="row text-center"><strong>Информация о фильме</strong></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\n\t\t\t\t\t\t\t<br>\n\t\t\t\n\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t<div class="col-lg-12 col-md-12 col-lg-12" style="padding: 0">\n\t\t\t\t\t\t\t\t\t<div class="col-lg-4 col-md-4 col-lg-4">\n\t\t\t\t\t\t\t\t\t\t<img id="movieImg" class="movieImg" src="" />\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<br>\n\t\t\t\t\t\t\t\t\t\t\t<div class="row text-center">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="col-lg-12 col-md-12 col-lg-12">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="col-lg-6 col-md-6 col-lg-6"><div id="rateKP"><a href="#" target="_blank" rel="noopener noreferrer" ><img class="movie-rate-img" src="https://i.imgur.com/QJinjle.png" /> <strong class="movie-rate-txt"></strong></a></div></div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="col-lg-6 col-md-6 col-lg-6"><div id="rateIMDB"><a href="#" target="_blank" rel="noopener noreferrer" ><img class="movie-rate-img" src="https://i.imgur.com/AD1JBPx.png" /> <strong class="movie-rate-txt"></strong></a></div></div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<br>\n\t\t\t\t\t\t\t\t\t\t\t<div class="text-center"><button id="rollActor" class="btn btn-sm btn-success" title="Зароллить рандомного актёра из фильма">Выбрать актёра</button></div>\n\t\t\t\t\t\t\t\t\t\t\t<br>\n\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t<strong>В главных ролях:</strong>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<br>\n\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div id="actor0"><p><a href="#" target="_blank" rel="noopener noreferrer" ></a></p></div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div id="actor1"><p><a href="#" target="_blank" rel="noopener noreferrer" ></a></p></div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div id="actor2"><p><a href="#" target="_blank" rel="noopener noreferrer" ></a></p></div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div id="actor3"><p><a href="#" target="_blank" rel="noopener noreferrer" ></a></p></div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div id="actor4"><p><a href="#" target="_blank" rel="noopener noreferrer" ></a></p></div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div id="actor5"><p><a href="#" target="_blank" rel="noopener noreferrer" ></a></p></div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div id="actor6"><p><a href="#" target="_blank" rel="noopener noreferrer" ></a></p></div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="col-lg-8 col-md-8 col-lg-8">\n\t\t\t\t\t\t\t\t\t\t<div id="movieContent">\n\t\t\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t\t\t\t<div id="movieNameRu" style="font-size: 24px;"><a href="#" target="_blank" rel="noopener noreferrer" ><strong></strong></a></div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t\t\t\t<div id="movieNameEn"><em>Test</em></div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t\t\t\t<hr>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\n\t\t\n\t\t\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="col-lg-6 col-md-6 col-lg-6">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p>Год производства: </p>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div id="movieYear" class="col-lg-6 col-md-6 col-lg-6">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p></p>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="col-lg-6 col-md-6 col-lg-6">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p>Страна: </p>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div id="movieCountries" class="col-lg-6 col-md-6 col-lg-6">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p></p>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="col-lg-6 col-md-6 col-lg-6">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p>Жанр: </p>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div id="movieGenres" class="col-lg-6 col-md-6 col-lg-6">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p></p>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\n\t\t\t\t\t\t\t\t\t\t\t<hr>\n\t\t\n\t\t\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="col-lg-6 col-md-6 col-lg-6">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p>Режиссеры: </p>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div id="movieDirectors" class="col-lg-6 col-md-6 col-lg-6">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p></p>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="col-lg-6 col-md-6 col-lg-6">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p>Продюсеры: </p>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div id="movieProducers" class="col-lg-6 col-md-6 col-lg-6">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p></p>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="col-lg-6 col-md-6 col-lg-6">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p>Композиторы: </p>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div id="movieCompositors" class="col-lg-6 col-md-6 col-lg-6">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p></p>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\n\t\t\t\t\t\t\t\t\t\t\t<hr>\n\t\t\n\t\t\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="col-lg-6 col-md-6 col-lg-6">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p>Бюджет: </p>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div id="movieBudget" class="col-lg-6 col-md-6 col-lg-6">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p></p>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\n\t\t\t\t\t\t\t\t\t\t\t<br>\n\t\t\n\t\t\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="col-lg-6 col-md-6 col-lg-6">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p>Сборы в России: </p>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div id="movieGrossRu" class="col-lg-6 col-md-6 col-lg-6">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p></p>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="col-lg-6 col-md-6 col-lg-6">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p>Сборы в США: </p>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div id="movieGrossUsa" class="col-lg-6 col-md-6 col-lg-6">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p></p>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="col-lg-6 col-md-6 col-lg-6">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p>Сборы в мире: </p>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div id="movieGrossWorld" class="col-lg-6 col-md-6 col-lg-6">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p></p>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\n\t\t\t\t\t\t\t\t\t\t\t<hr>\n\t\t\n\t\t\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="col-lg-6 col-md-6 col-lg-6">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p>Премьера в России: </p>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div id="moviePremiereRu" class="col-lg-6 col-md-6 col-lg-6">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p></p>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="col-lg-6 col-md-6 col-lg-6">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p>Премьера в мире: </p>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div id="moviePremiereWorld" class="col-lg-6 col-md-6 col-lg-6">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p></p>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\n\t\t\t\t\t\t\t\t\t\t\t<hr>\n\t\t\n\t\t\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="col-lg-6 col-md-6 col-lg-6">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p>Время: </p>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div id="movieLength" class="col-lg-6 col-md-6 col-lg-6">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p></p>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\n\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t<div class="col-lg-12 col-md-12 col-lg-12">\n\t\t\t\t\t\t\t\t<hr>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<h4><strong>Описание</strong></h4>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div id="movieDescription">\n\t\t\t\t\t\t\t\t\t<p class="movie-description" style="text-align: justify;">\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t').insertBefore("#pollwrap"))},this.updateMoviePanelInfo=function(){$.ajax({type:"GET",dataType:"application/json",url:`${atob("aHR0cHM6Ly9raW5vcG9pc2thcGl1bm9mZmljaWFsLnRlY2gvYXBpL3YyLjEvZmlsbXMv")}${n.kinoID}${atob("P2FwcGVuZF90b19yZXNwb25zZT1CVURHRVQsIFJBVElORw==")}`,beforeSend:function(t){t.setRequestHeader(`${atob("WC1BUEktS0VZ")}`,`${atob("NGMwMGE3ZmItOGY3Zi00YTI3LTkwNzMtNzBlN2IxYWYwZDNk")}`)},complete:function(t){let e=JSON.parse(t.responseText),o=e.data,i=e.budget,r=e.rating,a=e.externalId.imdbId,s="неизвестно";console.log(o),console.log(i),console.log(r),$("#rateKP > a > strong")[0].innerText=r.rating,$("#rateIMDB > a > strong")[0].innerText=r.ratingImdb,$("#rateKP > a")[0].href=o.webUrl,$("#rateIMDB > a")[0].href=`${atob("aHR0cHM6Ly93d3cuaW1kYi5jb20vdGl0bGUv")}${a}`,$($("#movieImg")[0]).attr("src",o.posterUrl),$("#movieNameRu > a > strong")[0].innerText=o.nameRu,$("#movieNameEn > em")[0].innerText=o.nameEn,$("#movieNameRu > a")[0].href=o.webUrl,setTimeout(()=>{if(n.movieActors.length>0)for(var t=0;t<7;t++){$(`#actor${t} > p > a`)[0].innerText=n.movieActors[t]?n.movieActors[t].actorName:"";let e=n.movieActors[t].actorPhoto.split("/")[6].split(".")[0];$(`#actor${t} > p > a`)[0].href=`${atob("aHR0cHM6Ly93d3cua2lub3BvaXNrLnJ1L25hbWUv")}${e}`}$("#movieDirectors > p")[0].innerText=n.movieDirectors.length>0?n.movieDirectors.slice(0,-2):s,$("#movieProducers > p")[0].innerText=n.movieProducers.length>0?n.movieProducers.slice(0,-2):s,$("#movieCompositors > p")[0].innerText=n.movieCompositors.length>0?n.movieCompositors.slice(0,-2):s},5e3),$("#movieYear > p")[0].innerText=o.year;let l="";o.countries.forEach(function(t,e){l+=t.country+", "}),$("#movieCountries > p")[0].innerText=n.checkForNull(l.slice(0,-2),s);let c="";o.genres.forEach(function(t,e){c+=t.genre+", "}),$("#movieGenres > p")[0].innerText=n.checkForNull(c.slice(0,-2),s),$("#movieBudget > p")[0].innerText=null===i.budget?s:`${i.budget}`,$("#movieGrossRu > p")[0].innerText=null===i.grossRu?s:`$${i.grossRu}`,$("#movieGrossUsa > p")[0].innerText=null===i.grossUsa?s:`$${i.grossUsa}`,$("#movieGrossWorld > p")[0].innerText=null===i.grossWorld?s:`$${i.grossWorld}`,$("#moviePremiereRu > p")[0].innerText=n.checkForNull(o.premiereRu,s),$("#moviePremiereWorld > p")[0].innerText=n.checkForNull(o.premiereWorld,s),$("#movieLength > p")[0].innerText=n.checkForNull(o.filmLength,s),$("#movieDescription > p")[0].innerText=n.checkForNull(o.description,s)}})},this.checkForNull=function(t,e){return null===t?e:t},this.movieFetch(),window.socket.on("changeMedia",function(){n.movieFetch()}),this.createMovieOptions=function(t){$(".well.active > .option").each(function(t,e){let o=/.*?https?:\/\/www\.kinopoisk\.ru\/film\/(\d+)\//g,i=$(e).text().substring(2);if(o.test(i)){let t=i.replace(o,"$1");$('<i id="movieInfoToggle" class="glyphicon glyphicon-chevron-left pull-right pointer" />').attr("title","Показать информацию о фильме").on("click",t=>{let e=$(this).find("#movieInfoToggle"),o=$(this).find("#movieOptionPanel");n.toggleOptionDropdown(e),n.renderOptionPanel(o)}).prependTo($(e));$.ajax({type:"GET",dataType:"application/json",url:`${atob("aHR0cHM6Ly9raW5vcG9pc2thcGl1bm9mZmljaWFsLnRlY2gvYXBpL3YyLjEvZmlsbXMv")}${t}${atob("P2FwcGVuZF90b19yZXNwb25zZT1CVURHRVQsIFJBVElORw==")}`,beforeSend:function(t){t.setRequestHeader(`${atob("WC1BUEktS0VZ")}`,`${atob("NGMwMGE3ZmItOGY3Zi00YTI3LTkwNzMtNzBlN2IxYWYwZDNk")}`)},complete:function(t){let o=JSON.parse(t.responseText),i=o.data,r=o.rating,a=o.externalId.imdbId,s=`<img class="movieImg" src="${i.posterUrl}" style="max-width: 10em;border: double;border-color: crimson;"/>`,l=`<a href=${i.webUrl} target="_blank" rel="noopener noreferrer" ><img class="movie-rate-img" src="https://i.imgur.com/QJinjle.png" /><strong> ${r.rating}</strong></a>`,c=`<a href=${atob("aHR0cHM6Ly93d3cuaW1kYi5jb20vdGl0bGUv")}${a} target="_blank" rel="noopener noreferrer" ><img class="movie-rate-img" src="https://i.imgur.com/AD1JBPx.png" /><strong> ${r.ratingImdb}</strong></a>`,u=`<a href="${i.webUrl}"><strong>${i.nameRu}</strong></a>`,d=`<em>${i.nameEn}</em>`,h=i.year,p="";i.countries.forEach(function(t,e){p+=t.country+", "}),p=n.checkForNull(p.slice(0,-2),"неизвестно");let f="";i.genres.forEach(function(t,e){f+=t.genre+", "}),f=n.checkForNull(f.slice(0,-2),"неизвестно");let m=n.checkForNull(i.filmLength,"неизвестно"),v=n.checkForNull(i.description,"неизвестно");$(`\n\t\t\t\t\t\t\t\t<div id="movieOptionPanel" class="well closePanel" style="display: none;">\n\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t\t<div class="col-lg-5 col-md-5 col-lg-5">\n\t\t\t\t\t\t\t\t\t\t\t${s}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div id="movieInfoContent" class="col-lg-7 col-md-7 col-lg-7">\n\t\t\t\t\t\t\t\t\t\t\t<div class="row" style="font-size: 24px;">\n\t\t\t\t\t\t\t\t\t\t\t\t${u}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t\t\t\t${d}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<br>\n\t\t\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t\t\t\t<p>Год производства: ${h}</p>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t\t\t\t<p>Жанр: ${f}</p>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t\t\t\t<p>Страна: ${p}</p>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t\t\t\t<p>Время: ${m}</p>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="col-lg-6 col-md-6 col-lg-6">${l}</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="col-lg-6 col-md-6 col-lg-6">${c}</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<hr>\n\t\t\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t\t\t<div class="col-lg-12 col-md-12 col-lg-12">\n\t\t\t\t\t\t\t\t\t\t\t<h4><strong>Описание</strong></h4>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="col-lg-12 col-md-12 col-lg-12">\n\t\t\t\t\t\t\t\t\t\t\t${v}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t`).appendTo($(e))}})}})},this.toggleOptionDropdown=function(t){t.hasClass("glyphicon-chevron-left")?(t.removeClass("glyphicon-chevron-left"),t.addClass("glyphicon-chevron-down")):(t.removeClass("glyphicon-chevron-down"),t.addClass("glyphicon-chevron-left"))},this.renderOptionPanel=function(t){if(!t)return null;t.hasClass("openPanel")?(t.hide(),t.removeClass("openPanel"),t.addClass("closePanel")):(t.show(),t.removeClass("closePanel"),t.addClass("openPanel"))},setTimeout(function(){n.createMovieOptions()},4e3),window.socket.on("newPoll",function(){n.createMovieOptions()})})},function(t,e){window.cytubeEnhanced.addModule("chess",function(t,e){"use strict";var n=this;this.addChessButton=function(){0==$("#chessButton").length&&($('<span id="chessButton" title="Играть в шахматы" style="padding: 0px 0px;cursor: pointer">').html('<img src="https://i.imgur.com/RuE7GeG.png" style="max-height: 40px;"/>').appendTo("#leftcontrols").on("click",t=>{n.renderChessPanel(),n.updateChessPanel()}),this.createChessPanel())},this.createStyles=function(){$("<style>").appendTo("head").text("\n\t\t\t\t.chess-game-id-input {\n\t\t\t\t\twidth: calc(100% - 145px - 15px);\n\n\t\t\t\t\tmargin-left: 15px;\n\t\t\t\t}\n\n\t\t\t\t.chess-join-game-btn {\n\t\t\t\t\tmargin-left: calc(100% - 145px - 15px);\n\n\t\t\t\t\tposition: relative;\n\t\t\t\t\ttop: -38px;\n\t\t\t\t}\n\t\t\t")},this.createChessPanel=function(){0==$("#chessPanel").length&&$('\n\t\t\t\t\t<div class="col-lg-12 col-md-12 closePanel" id="chessPanel" style="display: none;">\n\t\t\t\t\t\t<div class="well" id="chessPanelContent" style="min-height: 20em">\n\t\t\t\n\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t<div id="chessHeader" class="row text-center"><strong>Шахматы</strong></div>\n\t\t\t\t\t\t\t</div>\n\t\t\n\t\t\t\t\t\t\t<hr>\n\t\t\n\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t<div class="col-lg-12 col-md-12">\n\t\t\t\t\t\t\t\t\t<div class="col-lg-3 col-md-3 col-lg-3">\n\t\t\t\t\t\t\t\t\t\t<strong>ID игры:</strong>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div id="chessGameID" class="col-lg-3 col-md-3 col-lg-3">\n\t\t\t\t\t\t\t\t\t\t<strong></strong>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div id="chessGameID" class="col-lg-6 col-md-6 col-lg-6">\n\t\t\t\t\t\t\t\t\t<button id="chessInviteBtn" class="btn btn-sm btn-info pull-right">Пригласить <span class="fa fa-share" /></button>\n\t\t\t\t\t\t\t\t\t<button id="chessCreateGame" class="btn btn-sm btn-success pull-right">Создать <span class="fa fa-chess-knight" /></button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<hr>\n\t\t\n\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t<div class="col-xs-12 col-md-12 col-lg-12" >\n\t\t\t\t\t\t\t\t\t<input class="chess-game-id-input form-control not-contained" type="text" id="chessGameIDinput" placeholder="ID игры" maxlength="8">\n\t\t\t\t\t\t\t\t\t<div class="c-wrap">\n\t\t\t\t\t\t\t\t\t\t<span id="chessJoinBtn" class="chess-join-game-btn btn btn-md btn-success share-points-btn" title="Подарить барбитульки">\n\t\t\t\t\t\t\t\t\t\t\t<span class="fa fa-chess-knight">\n\t\t\t\t\t\t\t\t\t\t\t\tПрисоединиться\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div> \n\t\t\t\t\t\t\t</div>\n\t\t\n\t\t\t\t\t\t\t<hr>  \n\t\t\n\t\t\t\t\t\t\t<div class="row">\n\t\t\t\t\t\t\t\t<div class="col-lg-12 col-md-12">\n\t\t\t\t\t\t\t\t\t<div id="chessView" class="row text-center">\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\n\t\t\t\t\t\t\t<hr>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t').insertBefore("#pollwrap")},this.renderChessPanel=function(){var t=$("#chessPanel");t&&(t.hasClass("openPanel")?(t.hide(),t.removeClass("openPanel"),t.addClass("closePanel")):(t.show(),t.removeClass("closePanel"),t.addClass("openPanel")))},this.updateChessPanel=function(){let t=randomByte();$("#chessGameID > strong")[0].innerText=t,$("#chessInviteBtn").unbind("click"),$("#chessInviteBtn").on("click",e=>{n.shareGameId(t)}),$("#chessCreateGame").unbind("click"),$("#chessCreateGame").on("click",e=>{n.createRoom(t)}),$("#chessJoinBtn").unbind("click"),$("#chessJoinBtn").on("click",t=>{n.createRoom()})},this.shareGameId=function(t){window.socket.emit("chatMsg",{msg:`:2peepochess: Шахматы: ${t}`})},this.createRoom=function(){$("#chessIframe").length>0&&$("#chessIframe").remove();let t=$("#chessGameIDinput").val(),e=$("#chessPanel").width()-40;$(`<iframe id="chessIframe" src="https://play.chessbase.com/en/Play?room=${t}" style="width:${e}px;height:${e}px"></iframe>`).appendTo("#chessView"),$("#chessHelp").remove();$('\n\t\t\t\t<div class="row" id="chessHelp">\n\t\t\t\t\t<div class="col-lg-12 col-md-12">\n\t\t\t\t\t\t<div class="row text-center">\n\t\t\t\t\t\t\t<img src="https://i.imgur.com/ejTXTFv.png" />\n\t\t\t\t\t\t\t<br>\n\t\t\t\t\t\t\t<p>Нажмите "5 min Blitz" для начала игры</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>').appendTo("#chessPanelContent")},this.addChessButton(),this.createStyles()})},function(t,e){window.cytubeEnhanced.addModule("chatlineSmiles",function(t,e){"use strict";var n=this;this.tabNames=new Array("YOBA","PEPE","MUSIC","POLITICS","OTHER"),this.chatlineCloseCallback=function(){"undefined"!==$._data($("#chatline")[0],"events").click&&$("#chatline").on("click",t=>{$("#smileDiv").hasClass("copen")&&$("#btn-smile").click()})},this.init=function(){n.createEmotesBoard("smileDiv");var t=n.CElement("div","btn-smile","","");USEROPTS.chatbtn&&$(t).addClass("shifted"),$(t).insertAfter("#messagebuffer"),$(t).on("click",t=>{$("#chatline").focus(),n.upDiv("smileDiv"),n.toggleButton(this,"","")}),n.chatlineCloseCallback(),window.socket.on("updateEmote",function(){n.updateEmotesBoard()}),window.socket.on("importEmotes",function(){n.updateEmotesBoard()}),window.socket.on("removeEmote",function(){n.updateEmotesBoard()}),window.socket.on("emoteList",function(){n.updateEmotesBoard()})},this.toggleButton=function(t,e,o){0===$("#emojipanel0").children().length&&n.updateEmotesBoard(),(t=$(t)).toggleClass("cpushed"),t.hasClass("cpushed")?t.html(o):t.html(e)},this.upDiv=function(t){$(`#${t}`).toggleClass("copen")},this.createEmotesBoard=function(t){for(var e=$("<div></div>").attr("id",t),o=[],i=0;i<n.tabNames.length;i++)o.push(new n.CElement("div","emojipanel"+i,"","emoji-panel")),$(o[i]).appendTo(e);o.length>0&&$(o[0]).addClass("copen");var r=n.createMotdButtons(t+"Radio","btn btn-default emoji-button",n.tabNames,o);$(r).insertAfter("#messagebuffer"),$(e).insertAfter("#messagebuffer"),n.appendCSS()},this.CElement=function(t,e,n,o){return $(`<${t}></${t}>`).attr("id",e).addClass(o).html(n)},this.createMotdButtons=function(t,e,n,o){var i=$("<div></div>").attr("id",t);let r=new Array(n.length),a=new Array(n.length);return $(n).each(function(n,s){r[n]=$(`<input type="radio" name=${t} id=${t+n} value=${n}>`),a[n]=$(`<label for=${t+n} class="${e}" >${s}</label>`),$(a[n]).on("click",t=>{$(a).each(function(t,e){t==n?$(o[t]).addClass("copen"):$(o[t]).removeClass("copen")})}),$(r[n]).appendTo(i),$(a[n]).appendTo(i)}),i},this.updateEmotesBoard=function(){var t=$(".emoji-panel");t.each(function(t,e){$(e).html("")}),CHANNEL.emotes.forEach(function(e){switch(e.name[1]){case"1":n.addSmileToDiv(t[0],e);break;case"2":n.addSmileToDiv(t[1],e);break;case"3":n.addSmileToDiv(t[2],e);break;case"4":n.addSmileToDiv(t[3],e);break;default:n.addSmileToDiv(t[4],e)}})},this.addSmileToDiv=function(t,e){let o=$('<img class="smile-preview">').attr({src:e.image}).click(function(){n.pasteSmile(e.name)});$(t).append(o)},this.pasteSmile=function(t){$("#chatline").val(`${$("#chatline").val()} ${t} `).focus()},this.sendEvent=function(t,e){if(t.fireEvent)t.fireEvent("on"+e);else{var n=doc.createEvent("Events");n.initEvent(e,!0,!1),t.dispatchEvent(n)}},this.appendCSS=function(){$("<style>").appendTo("head").text("\n\t\t\t@media (max-width: 991px) { \n\t\t\t\t#smileDiv, #smileDivRadio {\n\t\t\t\t\tbottom: 76px;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t@media (min-width: 992px) { \n\t\t\t\t#smileDiv, #smileDivRadio {\n\t\t\t\t\tbottom: 38px;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t#smileDiv, #smileDivRadio {\n\t\t\t\tposition: absolute;\n\t\t\t\toverflow: hidden;\n\t\t\t\twidth: 100%;\n\t\t\t\tleft: 0;\n\t\t\t\tz-index: 9;\n\t\t\t\tmax-height: 0;\n\t\t\t\tfont-size: 14px;\n\t\t\t\ttransition-duration: 0.115s;\n\t\t\t\ttransition-timing-function: cubic-bezier(0.75, 0.00, 0.25, 1.00);\n\t\t\t\ttext-align: center;\n\t\t\t\tpadding: 0;\n\t\t\t\tborder-radius: 0;\n\t\t\t\tbackground-color: rgb(0 0 0 / 75%);\n\t\t\t}\n\t\t\t\t#smileDivRadio input {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\t\t\t\t#smileDivRadio label:hover {\n\t\t\t\t\tbackground-color: hsl(0deg 0% 85%);\n\t\t\t\t}\n\t\t\t\t#smileDivRadio input:checked + label {\n\t\t\t\t\tbackground-color: transparent;\n\t\t\t\t\tcolor: inherit;\n\t\t\t\t}\n\t\t\t\t#smileDiv {\n\t\t\t\t\tborder-top: solid 0em;\n\t\t\t\t}\n\t\t\t\t#smileDiv.copen {\n\t\t\t\t\tmax-height: 60%;\n\t\t\t\t\tborder-bottom: 2em solid transparent!important;\n\t\t\t\t\toverflow-y: auto;\n\t\t\t\t\tpadding: 0.5em 0;\n\t\t\t\t}\n\t\t\t\t#smileDiv.copen + #smileDivRadio {\n\t\t\t\t\tmax-height: 100%;\n\t\t\t\t}\n\t\t\t\t\t.smile-preview {\n\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\tmargin: 0.2em;\n\t\t\t\t\t\tmax-height: 40px;\n\t\t\t\t\t}\n\t\t\t\t\t.chat-image {\n\t\t\t\t\t\tmax-height: 8em;\n\t\t\t\t\t\tmax-width: 100%;\n\t\t\t\t\t\tcursor: zoom-in;\n\t\t\t\t\t}\n\t\t\t\t.emoji-panel {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\t\t\t\t.emoji-panel.copen {\n\t\t\t\t\tdisplay: block;\n\t\t\t\t}\n\t\t\t\t.emoji-button {\n\t\t\t\t\tcolor: white;\n\t\t\t\t\tfont-weight: 600;\n\t\t\t\t\ttext-shadow: none;\n\t\t\t\t\tline-height: 2em;\n\t\t\t\t\tpadding: 0;\n\t\t\t\t\twidth: 20%;\n\t\t\t\t}\n\t\t\t\t.emoji-button:focus {\n\t\t\t\t\tcolor: #fff;\n\t\t\t\t\tbackground-color: rgba(0,0,0,0);\n\t\t\t\t}\n\t\t\t\t.emoji-button:hover {\n\t\t\t\t\tcolor: #333;\n\t\t\t\t\ttext-shadow: none;\n\t\t\t\t}\n\t\t\t\n\t\t\t\t#smileDivRadio0 + label { background-color: hsl(50deg 100% 35%);}\n\t\t\t\t#smileDivRadio1 + label { background-color: hsl(100deg 100% 25%);}\n\t\t\t\t#smileDivRadio2 + label { background-color: hsl(300deg 100% 25%);}\n\t\t\t\t#smileDivRadio3 + label { background-color: hsl(200deg 100% 25%);}\n\t\t\t\t#smileDivRadio4 + label { background-color: hsl(0deg 0% 35%);}\n\t\t\t\n\t\t\t\t#btn-smile {\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t\theight: 2.5em;\n\t\t\t\t\tz-index: 1;\n\t\t\t\t\tright: 0px;\n\t\t\t\t\twidth: 3em;\n\t\t\t\t\tbackground-image: url(https://i.imgur.com/nGePXmR.png);\n\t\t\t\t\tbackground-size: auto 82%;\n\t\t\t\t\tbackground-position: center;\n\t\t\t\t\tbackground-repeat: no-repeat;\n\t\t\t\t}\n\t\t\t\t\t#btn-smile.cpushed {\n\t\t\t\t\t\tbackground-image: url(https://i.imgur.com/dFq5DXU.png);\n\t\t\t\t\t}\n\n\t\t\t\t\t#btn-smile.shifted {\n\t\t\t\t\t\tright: 50px;\n\t\t\t\t\t}\n\n\t\t\t\t\t#btn-smile {\n\t\t\t\t\t\topacity: 0.5; \n\t\t\t\t\t}  \n\n\t\t\t\t\t#btn-smile:hover {\n\t\t\t\t\t\topacity: 1; \n\t\t\t\t\t}\n\t\t\t\t\n\t\t\t\t#chatline {\n\t\t\t\t\tpadding-right: 40px;\n\t\t\t\t}\n\n\t\t\t")},this.init()})},function(t,e){window.cytubeEnhanced.addModule("copyChatEmote",function(t,e){"use strict";var n=this;this.$chatline=$("#chatline"),this.addClickCallback=function(){$(".channel-emote").each((t,e)=>{e=$(e);let o=$(e),i=o.attr("title");o.off(),o.click(t=>{n.$chatline.val(n.$chatline.val()+` ${i} `).focus()}),o.attr("style","cursor: pointer")})},setTimeout(function(){n.addClickCallback()},1e3),window.socket.on("chatMsg",function(){setTimeout(function(){n.addClickCallback()},1e3)})})},function(t,e){window.cytubeEnhanced.addModule("modPoll",function(t,e){"use strict";var n=this;if(!(window.CLIENT.rank<2)){console.log("[cytubeEnhanced]: modPoll module is loading...");e=$.extend({},{pollTitleTemplates:[{name:"Реквесты",text:"Реквесты в ЛС. Название + ссылка на Кинопоиск"},{name:"Единички",text:"Отборочный (единички)"},{name:"Отборочный",text:"Отборочный"},{name:"Финал",text:"Финалочка"},{name:"ГОЛОСОВАНИЕ",text:"ГОЛОСОВАНИЕ"}],pollTimeoutTemplates:[{name:"30 сек",text:"30"},{name:"1 минута",text:"1:00"},{name:"3 минуты",text:"3:00"},{name:"5 минут",text:"5:00"}]},e),this.init=function(){n.setupNewPollButton(),n.setupNewPollCallback(),n.appendCSS()},this.setupNewPollButton=function(){$("#newpollbtn").on("click",function(){$(".poll-menu-option").remove(),n.addOptionBtnSetup(),n.addTemplates()})},this.setupNewPollCallback=function(){window.socket.on("newPoll",function(){setTimeout(function(){n.copyOptionSetup()},1e3)}),setTimeout(function(){n.copyOptionSetup()},5e3)},this.addTemplates=function(){n.addTitleTemplates(),n.addTimeoutTemplates()},this.addTitleTemplates=function(){let t=$($("#pollwrap > .well.poll-menu > input.form-control")[0]),n=$("<div>").addClass("input-group").addClass("pointer").insertBefore($(t));$("<br><br>").insertBefore($(n)),$("<span>").addClass("btn-md").addClass("btn-default").addClass("dropdown-toggle").addClass("input-group-addon").attr("id","poll-dropdown-addon").attr("data-toggle","dropdown").attr("aria-haspopup","true").attr("aria-expanded","false").appendTo($(n)).html('<strong>Шаблоны</strong><span class="caret"></span>'),t.attr("placeholder","Название опроса").attr("aria-describedby","poll-dropdown-addon").attr("id","poll-title").appendTo($(n));let o=$("<ul>").addClass("dropdown-menu").prependTo($(n));for(var i=0;i<e.pollTitleTemplates.length;i++){let n=e.pollTitleTemplates[i].text;$("<li>").attr("id",`poll-option-${i}`).html(`<a>${e.pollTitleTemplates[i].name}</a>`).appendTo(o).on("click",function(){t.val(`${n}`)})}},this.addTimeoutTemplates=function(){let t=$($("#pollwrap > .well.poll-menu > input.form-control")[0]),n=$("<div>").addClass("input-group").addClass("pointer").insertBefore($(t));$("<span>").addClass("btn-md").addClass("btn-default").addClass("dropdown-toggle").addClass("input-group-addon").attr("id","poll-dropdown-addon").attr("data-toggle","dropdown").attr("aria-haspopup","true").attr("aria-expanded","false").appendTo($(n)).html('<strong>Шаблоны</strong><span class="caret"></span>'),t.attr("placeholder","Таймер").attr("aria-describedby","poll-dropdown-addon").attr("id","poll-timeout").appendTo($(n));let o=$("<ul>").addClass("dropdown-menu").prependTo($(n));for(var i=0;i<e.pollTimeoutTemplates.length;i++){let n=e.pollTimeoutTemplates[i].text;$("<li>").attr("id",`poll-option-${i}`).html(`<a>${e.pollTimeoutTemplates[i].name}</a>`).appendTo(o).on("click",function(){t.val(`${n}`)})}},this.copyOptionSetup=function(){$("poll-copy-option").length>0&&0==$(".option").length||($("<br>").insertAfter($("#pollwrap > .well.active > h3")),$(".well.active > .option").each(function(t,e){$('<span id="pollOptionCopy" class="btn btn-sm btn-info pull-left pointer" title="Очистить строку"><i class="glyphicon glyphicon-duplicate" /></span>').attr("title","Скопировать вариант в новое голосование").on("click",t=>{n.addOption(this)}).prependTo($(e))}))},this.addOption=function(t){let e=t.innerText.split(/(^([0-9]*(\?)*))/g)[4],n=$(".poll-menu-option");if(0==n.length)return;let o=!1;for(var i=0;i<n.length;i++)if(""===$(n[i]).val())return $(n[i]).val(e),void(o=!0);return o?void 0:($("#addNewOptionBtn").click(),void $($(".poll-menu-option").last()).val(e))},this.addOptionBtnSetup=function(){let t=$("#pollwrap .btn-block");$("<br>").insertBefore(t);var e=$("#pollwrap button:contains(Добавить вариант)");e.attr("id","addNewOptionBtn"),e.off(),e.insertBefore(t),$("<br>").insertBefore(t),e.click(n.createPollOption),n.createPollOption(),n.createPollOption(),n.createRemoveLastOptionButton(e)},this.createRemoveLastOptionButton=function(t){$("<button>").attr("id","removeLastOptionButton").addClass("btn").addClass("btn-sm").addClass("btn-default").html("Убрать последний вариант").insertAfter(t).click(t=>{0!=$(".poll-clean-option").length&&($(".form-control.poll-menu-option").last().remove(),$(".poll-clean-option").last().remove())})},this.createPollOption=function(){let t=$("<input/>").addClass("form-control").attr("type","text").addClass("poll-menu-option").insertBefore("#pollwrap .btn-block"),e=$("<span>").addClass("btn").addClass("btn-sm").addClass("btn-danger").addClass("poll-clean-option").attr("title","Очистить строку").html('<span class="glyphicon glyphicon-trash">');e.click(n=>{$(t).remove(),$(e).remove()}),$("<div>").addClass("c-wrap").append(e).insertAfter(t)},this.appendCSS=function(){$("<style>").appendTo("head").text("\n\t\t\t\n\t\t\t.poll-clean-option{\n\t\t\t\tposition: relative;\n\t\t\t\ttop: -44px;\n\t\t\t\tmargin-left: calc(100% - 38px);\n\t\t\t\topacity: 0.8;\n\t\t\t}\n\n\t\t\t\t.poll-clean-option:hover{\n\t\t\t\t\topacity: 1.0\n\t\t\t\t}\n\n\t\t\t.c-wrap{\n\t\t\t\theight: 0px\n\t\t\t}\n\n\t\t\t.form-control.poll-menu-option{\n\t\t\t\tpadding-right: 40px;\n\t\t\t}\n\n\t\t\t#pollOptionCopy{\n\t\t\t\ttop: 8px;\n    \t\tright: 4px;\n\t\t\t}\n\n\t\t\t")},this.init(),console.log("[cytubeEnhanced]: modPoll module is loaded!")}})},function(t,e){window.cytubeEnhanced.addModule("videoRewindButton",function(t,e){"use strict";var n=this;e=$.extend({},{rewindRate:10},e),this.playerRewind=function(t){"number"==typeof t&&PLAYER.getTime(function(e){let n=e,o=n+t;USEROPTS.synch=!1,PLAYER.seekTo(o),$("#videoRewindButton").attr("disabled",!0);let i=n+Math.abs(t);setTimeout(t=>{PLAYER.seekTo(i),USEROPTS.synch=!0,$("#videoRewindButton").attr("disabled",!1)},1e3*Math.abs(t))})},this.setup=function(){0==$("#videoRewindButton").length&&$("<button>").addClass("btn").addClass("btn-sm").addClass("btn-default").attr("id","videoRewindButton").attr("title",`Отмотать на ${e.rewindRate} секунд`).attr("disabled",!1).html(`<span class="glyphicon glyphicon-backward"><strong> ${e.rewindRate}</strong></span>`).prependTo($("#videocontrols")).click(t=>{n.playerRewind(-e.rewindRate)})},this.setup()})},function(t,e){window.cytubeEnhanced.addModule("playerMuteButton",function(t,e){"use strict";var n=this;this.init=function(){0===$("#playerMuteBtn").length&&$('<button class="btn btn-sm btn-default" id="playerMuteBtn"><span class="glyphicon glyphicon-volume-up"></span></button>').on("click",function(){n.toggleMute()}).appendTo("#plcontrol")},this.toggleMute=function(){window.PLAYER.getVolume(t=>{t>0?window.PLAYER.setVolume(0):window.PLAYER.setVolume(1)})},this.init()})},function(t,e){window.cytubeEnhanced.addModule("emoteList",function(t,e){"use strict";const n=this;e=$.extend({},{visibleAmount:276},e),this.init=(()=>{n.setupVisible(),n.setupHidden(),n.emoteEditCallbacks()}),this.refreshVisibleEmotes=(()=>{$("#visibleEmotesList").empty();for(var n=0;n<e.visibleAmount;n++)$('<img class="panelemote">').attr({src:CHANNEL.emotes[n].image,title:CHANNEL.emotes[n].name}).on("click",e=>t.Helpers.addMessageToChatInput(" "+$(e.target).attr("title")+" ","end")).bind("contextmenu",()=>!1).on("contextmenu",e=>t.Helpers.addMessageToChatInput(" [f] "+$(e.target).attr("title")+" [/f] ","end")).appendTo("#visibleEmotesList")}),this.setupVisible=(()=>{$('<div class="row" id="visibleEmotes">').html('<div class="col-lg-12 col-md-12"><div class="well" id="visibleEmotesList" style="display: none;"></div></div>').insertBefore("#playlistrow"),$("#emotelistbtn").on("click",()=>{0===$("#visibleEmotesList").children().length&&n.refreshVisibleEmotes(),$("#visibleEmotesList").slideToggle(200)})}),this.refreshHiddenEmotes=(()=>{$("#hiddenEmotesList").empty();for(var n=e.visibleAmount;n<CHANNEL.emotes.length;n++)$('<img class="panelemote">').attr({src:CHANNEL.emotes[n].image,title:CHANNEL.emotes[n].name}).on("click",e=>t.Helpers.addMessageToChatInput(" "+$(e.target).attr("title")+" ","end")).bind("contextmenu",()=>!1).on("contextmenu",e=>t.Helpers.addMessageToChatInput(" [f] "+$(e.target).attr("title")+" [/f] ","end")).appendTo("#hiddenEmotesList")}),this.setupHidden=(()=>{$('<div class="row" id="hiddenEmotes">').html('<div class="col-lg-12 col-md-12"><div class="well" id="hiddenEmotesList" style="display: none;"></div></div>').insertAfter("#visibleEmotes"),$("#emotelistbtn").bind("contextmenu",()=>!1),$("#emotelistbtn").on("contextmenu",()=>{0===$("#hiddenEmotesList").children().length&&n.refreshHiddenEmotes(),$("#hiddenEmotesList").slideToggle(200)})}),this.handleEmoteEdit=(()=>{n.refreshVisibleEmotes(),n.refreshHiddenEmotes()}),this.emoteEditCallbacks=(()=>{window.socket.on("updateEmote",function(){n.handleEmoteEdit()}),window.socket.on("importEmotes",function(){n.handleEmoteEdit()}),window.socket.on("removeEmote",function(){n.handleEmoteEdit()}),window.socket.on("emoteList",function(){n.handleEmoteEdit()})}),this.init()})},function(t,e){window.cytubeEnhanced.addModule("enchancedIgnore",function(){"use strict";const t=this;this.init=function(){t.loadIgnoreList(),t.updateUserDropdown(),t.reloadUersDropdown()},this.loadIgnoreList=(()=>(window.IGNORED=JSON.parse(localStorage.getItem("IGNORED"))||[],window.IGNORED)),this.updateUserDropdown=function(){var e;window.addUserDropdown=(e=window.addUserDropdown,function(n){var o=e(n);const i=n.data("name");return $(n.find(".user-dropdown > .btn-group-vertical")[0].firstChild).on("click",()=>{const e=t.loadIgnoreList();-1!=e.indexOf(i)?(e.splice(e.indexOf(i),1),localStorage.setItem("IGNORED",JSON.stringify(e))):(e.push(i),localStorage.setItem("IGNORED",JSON.stringify(e)))}),o})},this.reloadUersDropdown=(()=>{const t=$("#userlist").children();for(var e=0;e<t.length;e++)window.addUserDropdown($(t[e]))}),this.init()})},function(t,e){window.cytubeEnhanced.addModule("voiceMsg",function(t,e){"use strict";const n=this;e=$.extend({},{test:1},e),this.init=(()=>{n.createPanelToggle(),n.createPanel(),n.appendCSS()}),this.createPanelToggle=(()=>{0==$("#audioPanelToggle").length&&($("#leftcontrols").append('<button id="audioPanelToggle" class="btn btn-sm btn-default" title="Голосовое сообщение" data-toggle="modal">\n\t\t\t\t\t\t\t<span class="glyphicon glyphicon-uploadbtn"></span>\n\t\t\t\t\t\t</button>'),$("#audioPanelToggle").on("click",t=>$("#audioPanel").slideToggle(200)))}),this.createPanel=(()=>{$('\n\t\t\t\t<div class="col-lg-12 col-md-12" id="audioPanel" style="display: none;">\n\t\t\t\t\t<div class="well img-menu text-center" id="audioPanelContent" style="margin-bottom: 0 !important; min-height: 100px;">\n\t\t\t\t\t\t<div><strong>Голосовое сообщение</strong></div>\n\n\t\t\t\t\t\t<br>\n\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<button id="voiceRecordBtn" class="btn btn-md btn-info" title="Начать / Закончить запись">\n\t\t\t\t\t\t\t\t<span id="recordStartIcon" class="glyphicon glyphicon-ice-lolly"></span>\n\t\t\t\t\t\t\t\t<span id="recordStopIcon" class="glyphicon glyphicon-stop" style="display: none;"></span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button id="voiceSendBtn" class="btn btn-md btn-success" title="Загрузить и отправить" style="display: none;">\n\t\t\t\t\t\t\t\t<span class="glyphicon glyphicon-send"></span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<hr>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div id="recContent">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t').insertBefore("#pollwrap"),$("#voiceRecordBtn").on("click",()=>{this.handleRecording()}),$("#voiceSendBtn").on("click",()=>{this.handleSendVoice()})});let o=null;this.handleRecording=(()=>{$("#voiceRecordBtn").hasClass("btn-info")?(console.log("Start recording"),$("#recordStartIcon").hide(),$("#recordStopIcon").show(),$("#voiceRecordBtn").removeClass("btn-info"),$("#voiceRecordBtn").addClass("btn-danger"),(()=>{o=null;navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.getUserMedia({audio:!0},t=>{const e=[];(o=new MediaRecorder(t,{type:"audio/ogg; codecs=opus"})).start(),o.ondataavailable=(t=>{e.push(t.data)}),o.onstop=function(t){const n=new Blob(e,{type:"audio/ogg; codecs=opus"}),o=window.URL.createObjectURL(n);console.log("audioURL"),console.log(o);const i=$("<audio>");i.attr({id:"audioRec",controls:"true",src:o}),i.appendTo("#recContent"),console.log("recorder stopped"),$("#voiceSendBtn").show()}},t=>{console.log(t)})})()):(console.log("Stop recording"),$("#recordStopIcon").hide(),$("#recordStartIcon").show(),$("#voiceRecordBtn").removeClass("btn-danger"),$("#voiceRecordBtn").addClass("btn-info"),o.stop())}),this.handleSendVoice=(async()=>{const t=$("#audioRec"),e=await fetch(t.attr("src")).then(t=>t.blob()),n=await this.blobToBase64(e);t.remove(),$("#voiceSendBtn").hide(),this.uploadAudio(n)}),this.blobToBase64=(t=>new Promise((e,n)=>{const o=new FileReader;o.onloadend=(()=>e(o.result)),o.readAsDataURL(t)})),this.uploadAudio=(t=>{$.ajax({url:"https://nifty-well-gander.glitch.me/catbox",type:"POST",data:{file:t},dataType:"json",success:function(t){console.log("Voice recording link: "+t),$("#chatline").val(`${$("#chatline").val()} ${t.data.url} `)},error:function(t){console.log(t)}})}),this.appendCSS=function(){$("<style>").appendTo("head").text("\n\t\t\t\n\t\t\t\t#audioPanelToggle {\n\t\t\t\t\t/* background: url(https://i.imgur.com/DLnEPwY.png) no-repeat; */\n\t\t\t\t\tbackground: url(https://i.imgur.com/7rOjHuT.png) no-repeat;\n\t\t\t\t\theight: 40px !important;\n\t\t\t\t\twidth: 40px !important;\n\t\t\t\t\ttext-indent: -9999px;\n\t\t\t\t\toutline: none;\n\t\t\t\t\tborder: none;\n\t\t\t\t\topacity: 0.8;\n\t\t\t\t\tbackground-size: contain !important;\n\t\t\t\t}\n\n\t\t\t")},this.init()})},function(t,e){window.cytubeEnhanced.addModule("findMovie",function(t){"use strict";const e=this;this.init=(()=>{e.createPanelToggle(),e.createPanel(),e.appendCSS()}),this.createPanelToggle=(()=>{0==$("#findMoviePanelToggle").length&&($("#leftcontrols").append('<button id="findMoviePanelToggle" class="btn btn-sm btn-default" title="Найти кин4" data-toggle="modal">\n\t\t\t\t\t\t\t<span class="glyphicon glyphicon-uploadbtn"></span>\n\t\t\t\t\t\t</button>'),$("#findMoviePanelToggle").on("click",t=>$("#findMoviePanel").slideToggle(200)))}),this.createPanel=(()=>{$('\n\t\t\t\t<div class="col-lg-12 col-md-12" id="findMoviePanel" style="display: none;">\n\t\t\t\t\t<div class="well img-menu text-center" id="findMoviePanelContent" style="margin-bottom: 0 !important; min-height: 100px;">\n\t\t\t\t\t\t<div><strong>Найти кин4</strong></div>\n\n\t\t\t\t\t\t<br>\n\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<input class="form-control not-contained" type="text" id="findMovieKPInput" placeholder="Кинопоиск ID">\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<div class="c-wrap">\n\t\t\t\t\t\t\t\t<span id="findMovieKPBtn" class="btn btn-md btn-warning" title="Найти кин4">\n\t\t\t\t\t\t\t\t\t<span class="glyphicon glyphicon-search"></span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<hr>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div id="foundMovieInfo" class="row">\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<br>\n\t\t\t\t\t\t\t<div id="foundMovieLink" class="row">\n\t\t\t\t\t\t\t\t<div id="foundMovieLinkContent" class="col-lg-12 col-md-12">\n\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t').insertBefore("#pollwrap"),$("#findMovieKPBtn").on("click",()=>{this.handleFindMovie()}),$("#findMovieKPInput").on("input",e.handleKpInput)}),this.kpFormatter=(t=>-1!==t.indexOf("kinopoisk.ru")?t.match(/(\d+)/g)[0]||"":t),this.handleKpInput=(()=>{const t=$("#findMovieKPInput").val(),n=e.kpFormatter(t);$("#findMovieKPInput").val(n)}),this.handleFindMovie=(()=>{const t=$("#findMovieKPInput").val();$("#findMovieKPInput").val(""),$.ajax({url:"https://nifty-well-gander.glitch.me/getMovie",type:"POST",data:{kpID:t},dataType:"json",success:function(t){e.createMovieLinks(t.data.movieInfo)},error:function(t){console.log(t)}})}),this.createMovieLinks=(t=>{e.createTranslations(t)}),this.createTranslations=(t=>{$("#found-movie-translation-dropdown").remove(),$("#foundMovieInfo").empty();const n=$('<div id="found-movie-translation-dropdown" class="dropdown col-lg-6 col-md-6">').appendTo("#foundMovieInfo"),o=($('<button class="btn btn-default dropdown-toggle col-lg-12 col-md-12" type="button" id="found-movie-translation" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">').html('Перевод <span class="caret"></span>').appendTo(n),$('<ul class="dropdown-menu pull-left" aria-labelledby="found-movie-translation">').appendTo(n));for(var i=0;i<t.length;i++){const n=t[i].translation,r=i;$("<li>").attr("id",`translation-option-${i}`).html(`<a>${n}</a>`).appendTo(o).on("click",function(){e.createQualities(t,r)})}}),this.createQualities=((t,n)=>{$("#found-movie-qualities-dropdown").remove(),$("#foundMovieLinkContent").empty();const o=$('<div id="found-movie-qualities-dropdown" class="dropdown col-lg-6 col-md-6">').appendTo("#foundMovieInfo"),i=($('<button class="btn btn-default dropdown-toggle col-lg-12 col-md-12" type="button" id="found-movie-qualities" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">').html('Качество <span class="caret"></span>').appendTo(o),$('<ul class="dropdown-menu pull-right" aria-labelledby="found-movie-translation">').appendTo(o)),r=t[n].qualities;for(let t=0;t<r.length;t++){const n=r[t].movieLinks,o=r[t].quality;$("<li>").attr("id",`translation-option-${t}`).html(`<a>${o}</a>`).appendTo(i).on("click",function(){e.createFoundMovieLink(n)})}}),this.createFoundMovieLink=(t=>{$("#foundMovieLinkContent").empty();$('<input disabled="true" class="form-control not-contained" type="text" id="found-movie-link-input">').appendTo("#foundMovieLinkContent").val(t);const e=$('<div class="c-wrap">').html('<span id="found-movie-link-copy-btn" class="btn btn-md btn-info" title="Скопировать ссылку"><span class="glyphicon glyphicon-copy"></span></span>').insertAfter("#found-movie-link-input").on("click",()=>{navigator.clipboard.writeText(t).then(()=>{$("#found-movie-link-copy-btn").hasClass("btn-info")&&($("#found-movie-link-copy-btn").removeClass("btn-info"),$("#found-movie-link-copy-btn").addClass("btn-success"),window.setTimeout(()=>{$("#found-movie-link-copy-btn").removeClass("btn-success"),$("#found-movie-link-copy-btn").addClass("btn-info")},1e3))},t=>{$("#found-movie-link-copy-btn").hasClass("btn-info")&&($("#found-movie-link-copy-btn").removeClass("btn-info"),$("#found-movie-link-copy-btn").addClass("btn-danger"),window.setTimeout(()=>{$("#found-movie-link-copy-btn").removeClass("btn-danger"),$("#found-movie-link-copy-btn").addClass("btn-info")},1e3))})}),n=$('<div class="c-wrap">').html('<span id="found-movie-link-watch-btn" class="btn btn-md btn-success" title="Добавить в плейлист"><span class="glyphicon glyphicon-send"></span></span>').insertAfter(e).on("click",()=>{$("#mediaurl").val(t)});$('<div class="c-wrap">').html('<span id="found-movie-remove-btn" class="btn btn-md btn-danger" title="Удалить ссылку"><span class="glyphicon glyphicon-remove"></span></span>').insertAfter(n).on("click",()=>{$("#foundMovieInfo").empty(),$("#foundMovieLinkContent").empty()})}),this.appendCSS=function(){$("<style>").appendTo("head").text("\n\t\t\t\n\t\t\t\t#findMoviePanelToggle {\n\t\t\t\t\tbackground: url(https://i.imgur.com/zXIOGGM.png) no-repeat;\n\t\t\t\t\theight: 40px !important;\n\t\t\t\t\twidth: 40px !important;\n\t\t\t\t\ttext-indent: -9999px;\n\t\t\t\t\toutline: none;\n\t\t\t\t\tborder: none;\n\t\t\t\t\topacity: 0.8;\n\t\t\t\t\tbackground-size: contain !important;\n\t\t\t\t}\n\n\t\t\t\t.c-wrap{\n\t\t\t\t\theight: 0px\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t#findMovieKPInput {\n\t\t\t\t\twidth: calc(100% - 36px);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t#findMovieKPBtn {\n\t\t\t\t\tmargin-left: calc(100% - 38px);\n\t\t\t\t\tz-index: 0;\n\t\t\t\t\tposition: relative;\n\t\t\t\t\ttop: -38px;\n\t\t\t\t}\t\n\t\t\t\t\n\n\n\t\t\t\t\n\t\t\t\t#found-movie-link-input {\n\t\t\t\t\twidth: calc(100% - 120px);\n\t\t\t\t\tmargin-left: 40px;\n\t\t\t\t}\n\n\t\t\t\t#found-movie-link-copy-btn {\n\t\t\t\t\tmargin-left: calc(100% - 120px);\n\t\t\t\t\tz-index: 0;\n\t\t\t\t\tposition: relative;\n\t\t\t\t\ttop: -38px;\n\t\t\t\t}\n\n\t\t\t\t#found-movie-link-watch-btn {\n\t\t\t\t\tmargin-left: calc(100% - 42px);\n\t\t\t\t\tz-index: 0;\n\t\t\t\t\tposition: relative;\n\t\t\t\t\ttop: -38px;\n\t\t\t\t}\n\n\t\t\t\t#found-movie-remove-btn {\n\t\t\t\t\tmargin-right: 100%;\n\t\t\t\t\tz-index: 0;\n\t\t\t\t\tposition: relative;\n\t\t\t\t\ttop: -38px;\n\t\t\t\t}\n\t\t\t")},this.init()})},function(t,e){window.cytubeEnhanced.addModule("newYear",function(t){"use strict";const e=this;this.init=(()=>{e.fixModHats()}),this.fixModHats=(()=>{CLIENT.rank>2&&$("<style>").appendTo("head").text('\n\t\t\t\t\tdiv[class^="chat-msg-"] span:nth-child(3):nth-last-child(1) {\n\t\t\t\t\t  margin-left: 0px;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tdiv[class^="chat-msg-"] span:nth-child(4):nth-last-child(1) {\n\t\t\t\t\t  margin-left: -20px;\n\t\t\t\t\t}\n\t\t\t\t')}),this.init()})},function(t,e){window.cytubeEnhanced.addModule("previewImageEnchanced",function(t){"use strict";const e=this;this.init=(()=>{e.setupModalPreview(),e.setupPreviewImageButtonsCallbacks()}),this.setupModalPreview=(()=>{e.createClickPreview(),e.createModalPreview()}),this.createClickPreview=(()=>{$("body").on("click",".chat-picture",function(t){t.preventDefault();var n=$(this).attr("src");$("#js_image_container").find(".cmds-content").html('<img id="preview-image-content" class="chat-picture-modal" style="max-width: 100%;" src="'+n+'">'),e.cbSetTitle(),$("#js_image_container").modal("show")})}),this.cbSetTitle=(()=>{const t=$("#preview-image-content").attr("src").split("/"),e=t[t.length-1].split(".")[0];$("#preview-image-label").text(e)}),this.createModalPreview=(()=>{$("body").append('\n\t\t\t\t<div class="modal fade" id="js_image_container" style="text-align: center;" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\n\t\t\t\t\t<div class="modal-dialog">\n\t\t\t\t\t\t<div class="modal-content">\n\t\t\t\t\t\t\t<div class="modal-header">\n\t\t\t\t\t\t\t\t<button id="image-preview-button-paste-to-chat" type="button" class="pull-left preview-image-button glyphicon glyphicon-comment" title="Вставить в сообщение" data-dismiss="modal">\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<button id="image-preview-button-copy-link" type="button" class="pull-left preview-image-button glyphicon glyphicon-duplicate" title="Скопировать ссылку" data-dismiss="modal">\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<button id="image-preview-button-find" type="button" class="pull-left preview-image-button glyphicon glyphicon-search" title="Поиск по картинке" data-dismiss="modal">\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<button id="image-preview-button-close" type="button" class="pull-right preview-image-button glyphicon glyphicon-remove" title="Закрыть" data-dismiss="modal">\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<h4 class="modal-title" id="preview-image-label">&nbsp;</h4>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="modal-body" style="background-color: rgb(8 9 10);">\n\t\t\t\t\t\t\t\t<div class="cmds-content">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t')}),this.setupPreviewImageButtonsCallbacks=(()=>{e.cbPasteToChat(),e.cbCopyLink(),e.cbFind(),e.cbClose()}),this.cbPasteToChat=(()=>{$("#image-preview-button-paste-to-chat").on("click",()=>{const t=$("#preview-image-content").attr("src");$("#chatline").val($("#chatline").val()+" "+t+" ")})}),this.cbCopyLink=(()=>{$("#image-preview-button-copy-link").on("click",()=>{const t=$("#preview-image-content").attr("src");navigator.clipboard.writeText(t)})}),this.cbFind=(()=>{$("#image-preview-button-find").on("click",()=>{const t=$("#preview-image-content").attr("src");window.open(`https://www.google.com/searchbyimage?image_url=${t}`,"_blank").focus()})}),this.cbClose=(()=>{$("body").on("click","#js_image_container",function(t){t.preventDefault(),$("#js_image_container").modal("hide")}),$("#image-preview-button-close").on("click",()=>{event.preventDefault(),$("#js_image_container").modal("hide")}),$("#preview-image-label").text("")}),this.init()})},function(t,e){window.cytubeEnhanced.addModule("snow",function(t){"use strict";const e=this;this.init=(()=>{if(0!==$("#snow").length)return;e.createParent(),e.spawn_snow(32),e.spawnSnowCSS(32),e.appendCSS()}),this.createParent=(()=>{$('<div id="snow" />').prependTo("#wrap")}),this.spawn_snow=((t=200)=>{t-=1;for(let e=0;e<t;e++){let t=document.createElement("div");t.className="snowflake",document.getElementById("snow").appendChild(t)}}),this.add_css=(t=>{let e=document.createElement("style");e.type="text/css",e.appendChild(document.createTextNode(t)),document.getElementsByTagName("head")[0].appendChild(e)}),this.random_int=((t=100)=>Math.floor(Math.random()*t)+1),this.random_range=((t,e)=>(t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t)),this.spawnSnowCSS=((t=200)=>{let n="";"undefined"!=typeof base_css&&(n=base_css);for(let o=1;o<t;o++){let t=100*Math.random(),i=1e-4*e.random_range(-1e5,1e5),r=t+i,a=t+i/2,s=e.random_range(3e4,8e4)/1e5,l=100*s,c=Math.random(),u=1*e.random_range(10,30),d=-1*e.random_int(30);n+=`\n\t\t\t\t.snowflake:nth-child(${o}) {\n\t\t\t\t\topacity: ${Math.random()};\n\t\t\t\t\ttransform: translate(${t}vw, -10px) scale(${c}) rotate(${e.random_range(0,360)}deg);\n\t\t\t\t\tanimation: fall-${o} ${u}s ${d}s linear infinite;\n\t\t\t\t}\n\n\t\t\t\t@keyframes fall-${o} {\n\t\t\t\t\t${100*s}% {\n\t\t\t\t\t\ttransform: translate(${r}vw, ${l}vh) scale(${c});\n\t\t\t\t\t}\n\n\t\t\t\t\tto {\n\t\t\t\t\t\ttransform: translate(${a}vw, 100vh) scale(${c});\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t`}e.add_css(n)}),this.appendCSS=function(){$("<style>").appendTo("head").text("\n\t\t\t\t.snowflake {\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\twidth: 24px;\n\t\t\t\t\theight: 24px;\n\t\t\t\t\tcontent: url(https://i.imgur.com/NpGhQYQ.png);\n\t\t\t\t}\n\t\t\t")},this.init()})},function(t,e){window.cytubeEnhanced.addModule("botPinger",function(t){"use strict";const e=this;this.init=(()=>{e.checkBotPresence()}),this.checkBotPresence=(()=>{0===$(".userlist_item > span:nth-child(2):contains(ZhabaModer)").length&&e.summonBot(),e.createBotPinger()}),this.summonBot=(()=>{$.ajax({url:"https://trusting-curvy-hyena.glitch.me/getModer",type:"POST",dataType:"json",success:function(t){console.log(t)},error:function(t){console.log(t)}})}),this.createBotPinger=(()=>{setInterval(e.pingBot,3e5)}),this.pingBot=(()=>{$.ajax({url:"https://trusting-curvy-hyena.glitch.me/ping",type:"POST",dataType:"json",success:function(t){console.log(t)},error:function(t){console.log(t)}})}),this.init()})}]);